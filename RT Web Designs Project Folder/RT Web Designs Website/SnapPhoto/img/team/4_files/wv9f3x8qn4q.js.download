if (self.CavalryLogger) { CavalryLogger.start_js(["iPW4+"]); }

__d("AdsLoggerConstants",[],(function a(b,c,d,e,f,g){f.exports={DAO_ERROR_EVENT_NAME:"dao_error",ERROR_EVENT_CATEGORY:"errors",UNHANDLED_JS_EXCEPTION_EVENT_NAME:"unhandled_js_exception"}}),null);
__d("ComposedInlineStyle",[],(function a(b,c,d,e,f,g){f.exports={NONE:0,BOLD:1,ITALIC:2,UNDERLINE:4,CODE:8,STRIKETHROUGH:16,SUBSCRIPT:32,SUPERSCRIPT:64,QUOTE:128}}),null);
__d('AdsLogger',['AdsLoggerConstants','AdsUnifiedLoggingConfig','Banzai','ErrorUtils','emptyFunction'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l){this.$AdsLogger4=i;this.$AdsLogger2=c('ErrorUtils').guard(j||c('emptyFunction').thatReturnsNull);this.$AdsLogger3=k||c('emptyFunction').thatReturnsNull;this.$AdsLogger1=l||'logger';c('ErrorUtils').addListener(function(m){if(this.__shouldSilenceError(m))return;var n={error_message:m.message,error_type:m.name,stack_trace:m.stack,error_data:JSON.stringify(m),error_script:m.script,error_line:m.line};this.logError(c('AdsLoggerConstants').UNHANDLED_JS_EXCEPTION_EVENT_NAME,n)}.bind(this))}h.prototype.__shouldSilenceError=function(i){return !!i.type&&i.type!=='mustfix'};h.prototype.logForAnalytics=function(i,j,k){k=k||{};var l=k.vital===undefined?true:k.vital;delete k.vital;var m=babelHelpers['extends']({},this.$AdsLogger2(),k,{event_category:i,event:j});this.$AdsLogger5(j||'',m,c('AdsUnifiedLoggingConfig').stack_traces);if(!m.event)m.stack_trace=new Error('No Event.').stack||'none';c('Banzai').post(this.$AdsLogger1+':'+this.$AdsLogger4,m,l?c('Banzai').VITAL:c('Banzai').BASIC)};h.prototype.$AdsLogger6=function(i){if(i===1){return true}else if(i<=0){return false}else return Math.floor(Math.random()*Math.floor(i)+1)===1;};h.prototype.$AdsLogger5=function(i,j,k){var l=k[i.toLowerCase()];if(l&&this.$AdsLogger6(l)){var m=new Error('Requested Stack-Trace.'),n=c('ErrorUtils').normalizeError(m);j.stack_trace=n.stack}};h.prototype.logError=function(i,j){var k=this.$AdsLogger7();this.logForAnalytics(c('AdsLoggerConstants').ERROR_EVENT_CATEGORY,i,babelHelpers['extends']({},j,k))};h.prototype.$AdsLogger7=function(){var i={};try{i=this.$AdsLogger3()}catch(j){i={reason:'Error while invoking app error callback!',rawError:j}}return i};f.exports=h}),null);
__d("AdsInterfacesComponentsEventCategory",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ERRORS:"errors",GENERAL:"general"})}),null);
__d("AdsInterfacesComponentsEventName",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({BIG_ADOPTION_NO_CONTEXT_THEME:"big_adoption_no_context_theme",BIG_ADOPTION_EXCEPTION:"big_adoption_exception",BIG_COMPONENT_ERROR:"big_component_error",DEPRECATE_CALLED:"deprecate_called"})}),null);
__d('AdsInterfacesLogger',['invariant','Map','Set'],(function a(b,c,d,e,f,g,h){'use strict';var i,j='primary',k='secondary',l='ads_interfaces_logger_primary_app',m='ads_interfaces_logger_secondary_app',n=(i={},i[j]={data:[],isRegistered:false},i[k]={data:[],isRegistered:false},i),o=new (c('Map'))(),p=new (c('Set'))();q.__reset=function(){n[j]={data:[],isRegistered:false};if(o.has(l))o['delete'](l);n[k]={data:[],isRegistered:false};if(o.has(m))o['delete'](m);p=new (c('Set'))()};q.getPath=function(r){return r===j?l:m};q.log=function(r){var s=arguments.length<=1||arguments[1]===undefined?k:arguments[1];if(s===k&&!n[s].isRegistered&&n[j].isRegistered)s=j;if(!n[s].isRegistered){n[s].data.push(r);return}var t=o.get(this.getPath(s));t||h(0);t instanceof q||h(0);t.__log(r)};q.logOnce=function(r){var s=arguments.length<=1||arguments[1]===undefined?k:arguments[1],t=JSON.stringify(r);if(p.has(t))return;q.log(r,s);p.add(t)};q.get=function(){var r=arguments.length<=0||arguments[0]===undefined?k:arguments[0];if(r===k&&!n[r].isRegistered&&n[j].isRegistered)r=j;var s=o.get(this.getPath(r));return s};function q(r,s){this.__log=r.log;this.__interfaceID=s}q.prototype.getInterfaceID=function(){return this.__interfaceID};q.prototype.register=function(r){o.set(this.constructor.getPath(r),this);n[r].isRegistered=true;if(n[r].data.length>0){n[r].data.forEach(this.__log);n[r].data=[]}if(r===j&&n[k].data.length>0){n[k].data.forEach(this.__log);n[k].data=[]}};q.prototype.unregister=function(r){o['delete'](this.constructor.getPath(r));n[r].isRegistered=false};q.LOG_TYPE_PRIMARY_APP=j;q.LOG_TYPE_SECONDARY_APP=k;f.exports=q}),null);
__d('AdsInterfacesComponentsLogger',['AdsInterfacesComponentsEventCategory','AdsInterfacesComponentsEventName','AdsInterfacesLogger','AdsLogger'],(function a(b,c,d,e,f,g){'use strict';var h,i,j='unified_logging',k='components';h=babelHelpers.inherits(l,c('AdsLogger'));i=h&&h.prototype;function l(){i.constructor.call(this,k,undefined,undefined,j)}l.prototype.getInterfaceID=function(){return this.__interface_id};l.prototype.setInterfaceID=function(m){this.__interface_id=m};l.prototype.logForAnalytics=function(m,n,o){o=o||{};if(!o.interface_id){var p=this.getInterfaceID();if(!p){var q=c('AdsInterfacesLogger').get();if(q)p=q.getInterfaceID();}if(p)o.interface_id=p;}i.logForAnalytics.call(this,m,n,o)};l.prototype.logBIGComponentError=function(m,n){this.logForAnalytics(c('AdsInterfacesComponentsEventCategory').ERRORS,c('AdsInterfacesComponentsEventName').BIG_COMPONENT_ERROR,{caller:n,message:m.message,stack_trace:m.stack})};l.prototype.__shouldSilenceError=function(m){return true};f.exports=new l()}),null);
__d('ProgressBar.react',['cx','React','joinClasses'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$UIProgressBar1=function(){var r=this.props,s=Math.min(Math.max((r.value-r.min)/(r.max-r.min)*100,0),100);return s}.bind(this),this.$UIProgressBar2=function(){return this.props.label!=null&&this.props.size!=='small'}.bind(this),this.$UIProgressBar3=function(){return this.$UIProgressBar2()&&this.props.typesetting==='float'}.bind(this),this.$UIProgressBar4=function(){if(!this.$UIProgressBar2())return null;return this.props.label}.bind(this),this.$UIProgressBar5=function(){if(this.$UIProgressBar3())return c('React').createElement('div',{className:"_6a"},' ');return null}.bind(this),this.$UIProgressBar6=function(){var r=Math.round(this.$UIProgressBar1()),s="_5e4k"+(r===0?' '+"_5e2d":'')+(r===100?' '+"_5e4j":''),t=this.$UIProgressBar4();if(t)t=c('React').createElement('span',{className:"_5e2h"},t);var u=c('React').createElement('div',{className:s,style:{width:r+'%'}},this.$UIProgressBar5(),t);return u}.bind(this),this.$UIProgressBar7=function(){var r=this.$UIProgressBar4();if(!r)return null;r=c('React').createElement('span',{className:"_5e2h _5e2n"},r);if(this.$UIProgressBar3()){var s=this.$UIProgressBar1(),t={left:s+'%',width:s+'%'},u=c('React').createElement('div',{className:"_5e2g",style:t},this.$UIProgressBar5(),r);return u}return r}.bind(this),n}l.prototype.render=function(){'use strict';var m="_5e4h"+(!this.$UIProgressBar3()?' '+"_5e2k":'')+(this.$UIProgressBar3()?' '+"_5e2j":'')+(this.props.size==='small'?' '+"_5e2l":'')+(this.props.isRounded===true?' '+"_5e2m":'');if(this.$UIProgressBar3()){return c('React').createElement('div',babelHelpers['extends']({},this.props,{role:'progressbar','aria-valuemin':0,'aria-valuemax':100,'aria-valuenow':this.$UIProgressBar1(),className:c('joinClasses')(this.props.className,m)}),c('React').createElement('div',{className:"_5e2k"},this.$UIProgressBar7(),this.$UIProgressBar6()))}else return c('React').createElement('div',babelHelpers['extends']({},this.props,{role:'progressbar','aria-valuemin':0,'aria-valuemax':100,'aria-valuenow':this.$UIProgressBar1(),className:c('joinClasses')(this.props.className,m)}),this.$UIProgressBar7(),this.$UIProgressBar6());};l.propTypes={value:k.number.isRequired,label:k.oneOfType([k.string,k.element]),min:k.number,max:k.number,size:k.oneOf(['small','large']),typesetting:k.oneOf(['float','inline']),isRounded:k.bool};l.defaultProps={min:0,max:100,size:'large',typesetting:'inline',isRounded:false};f.exports=l}),null);
__d('XUIButtonGroup.react',['cx','invariant','React','joinClasses'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){'use strict';this.validateButtonSize();var n="_51xa"+(this.props.isOverlay?' '+"_51xb":'');return c('React').createElement('div',babelHelpers['extends']({},this.props,{className:c('joinClasses')(this.props.className,n)}),this.props.children)};m.prototype.validateButtonSize=function(){'use strict';if(!this.props.isOverlay){var n;c('React').Children.forEach(this.props.children,function(o){if(o){o.type.getButtonSize||i(0);var p=o.type.getButtonSize(o.props);if(!n){n=p}else p===n||i(0);}})}};function m(){'use strict';j.apply(this,arguments)}m.propTypes={isOverlay:l.bool};f.exports=m}),null);
__d('TypeaheadViewItem',['React','ReactDOM','SearchableEntry','prop-types'],(function a(b,c,d,e,f,g){var h={children:c('prop-types').node,className:c('prop-types').string,entry:c('prop-types').instanceOf(c('SearchableEntry')).isRequired,highlighted:c('prop-types').bool,role:c('prop-types').string,selected:c('prop-types').bool,onSelect:c('prop-types').func.isRequired,onHighlight:c('prop-types').func,onRenderHighlight:c('prop-types').func},i={role:'option'},j={_onSelect:function l(m){this.props.onSelect(this.props.entry,m)},_onHighlight:function l(m){if(this.props.onHighlight)this.props.onHighlight(this.props.entry,m);},getDefaultProps:function l(){return i},shouldComponentUpdate:function l(m){return this.props.entry.getUniqueID()!==m.entry.getUniqueID()||this.props.highlighted!==m.highlighted||this.props.selected!==m.selected},componentDidMount:function l(){var m=this.props.onRenderHighlight;if(this.props.highlighted&&m)m(c('ReactDOM').findDOMNode(this));},componentDidUpdate:function l(){var m=this.props.onRenderHighlight;if(this.props.highlighted&&m)m(c('ReactDOM').findDOMNode(this));}};function k(l){var m,n;return n=m=function(){var o,p;o=babelHelpers.inherits(q,c('React').Component);p=o&&o.prototype;function q(){var r,s;'use strict';for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=p.constructor).call.apply(r,[this].concat(u)),this.$TypeaheadViewItem1=function(w){this.props.onSelect(this.props.entry,w)}.bind(this),this.$TypeaheadViewItem2=function(w){if(this.props.onHighlight)this.props.onHighlight(this.props.entry,w);}.bind(this),s}q.prototype.shouldComponentUpdate=function(r){'use strict';return this.props.entry.getUniqueID()!==r.entry.getUniqueID()||this.props.highlighted!==r.highlighted||this.props.selected!==r.selected};q.prototype.componentDidMount=function(){'use strict';var r=this.props.onRenderHighlight;if(this.props.highlighted&&r)r(c('ReactDOM').findDOMNode(this));};q.prototype.componentDidUpdate=function(){'use strict';var r=this.props.onRenderHighlight;if(this.props.highlighted&&r)r(c('ReactDOM').findDOMNode(this));};q.prototype.render=function(){'use strict';return c('React').createElement(l,babelHelpers['extends']({},this.props,{onSelect:this.$TypeaheadViewItem1,onHighlight:this.$TypeaheadViewItem2}))};return q}(),m.displayName='TypeaheadViewItem('+l.displayName+')',m.defaultProps=i,n}f.exports={makeTypeaheadViewItem:k,Mixin:j,propTypes:h}}),null);
__d('XUITypeaheadTextOnlyView.react',['cx','React','TypeaheadViewItem','TypeaheadViewPropTypes'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').createClass({displayName:'XUITypeaheadTextOnlyViewItem',mixins:[c('TypeaheadViewItem').Mixin],propTypes:c('TypeaheadViewItem').propTypes,render:function m(){var n=this.props.entry,o="_599m"+(this.props.highlighted?' '+"_599n":'');return c('React').createElement('li',{'aria-label':n.getTitle(),'aria-selected':this.props.highlighted,className:o,key:n.getUniqueID(),onMouseDown:this._onSelect,onMouseEnter:this._onHighlight,role:this.props.role,title:n.getTitle()},c('React').createElement('div',{className:"_599p"},n.getTitle()))}});i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$XUITypeaheadTextOnlyView1=function(r){var s=r===this.props.highlightedEntry;return c('React').createElement(k,{entry:r,highlighted:s,key:r.getUniqueID(),onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight})}.bind(this),n}l.prototype.render=function(){'use strict';var m="_599r"+(!this.props.entries.length?' '+"_599s":'');return c('React').createElement('ul',{className:m,id:this.props.ariaOwneeID,role:this.props.role},this.props.entries.map(this.$XUITypeaheadTextOnlyView1))};l.propTypes=c('TypeaheadViewPropTypes');l.defaultProps={role:'listbox'};f.exports=l}),null);
__d('XUITypeaheadViewContainer.react',['cx','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){return c('React').createElement('ul',{className:c('joinClasses')("_599r",this.props.className),'data-testid':this.props.testID,id:this.props.ariaOwneeID,role:this.props.role},this.props.children)};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("LegacyContactTestConstants",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CHOOSE_CONTACT_BUTTON:"choose_contact_button",NOT_NOW_BUTTON:"not_now_button",LEGACY_CONTACT_CARD:"legacy_contact_card",CONFIRM_REMOVE:"confirm_remove",SEND_MESSAGE_BUTTON:"send_message_button",MESSAGE_SEND_CONFIRMED:"message_send_confirmed",DELETE_ACCOUNT_SELECTOR:"delete_account_selector",SAVE_BUTTON:"save_button",DELETE_ACCOUNT_CONFIRM:"delete_account_confirm",DELETE_AFTER_DEATH_CHOSEN:"delete_after_death_chosen",DONT_DELETE_SELECTOR:"dont_delete_selector",YES_ALLOW_SELECTOR:"yes_allow_selector",DATA_ARCHIVE_SETTING:"data_archive_setting",NO_DISALLOW_SELECTOR:"no_disallow_selector",ADD_CONFIRM_BUTTON:"add_confirm_button",DATA_ARCHIVE_SETTING_YES:"data_archive_setting_yes",DATA_ARCHIVE_SETTING_NO:"data_archive_setting_no",CHOOSE_FRIEND_TYPEAHEAD:"choose_friend_typeahead",MESSAGE_COMPOSE_BOX:"message_compose_box",REMOVE_CONTACT_BUTTON:"remove_contact_button",MESSAGE_BUTTON:"message_button",LOADING_INDICATOR:"memorialization_loading_indicator"})}),null);
__d('XUITypeaheadViewItem.react',['cx','BackgroundImage.react','Badge.react','ImageBlock.react','LegacyContactTestConstants','React','TextWithEmoticons.react','Tooltip','TypeaheadViewItem','joinClasses'],(function a(b,c,d,e,f,g,h){var i=c('React').PropTypes,j=c('React').createClass({displayName:'XUITypeaheadViewItem',mixins:[c('TypeaheadViewItem').Mixin],propTypes:babelHelpers['extends']({},c('TypeaheadViewItem').propTypes,{splitText:i.bool,tooltip:i.node,tooltipPosition:i.oneOf(['above','left','below','right'])}),render:function k(){var l=this.props.entry,m=this.props.splitSubtext?l.getSubtitle().split(' \u00b7 ')[0]:l.getSubtitle(),n=m?c('React').createElement('div',{className:"_599q"},this.props.children,m):null,o=l.getPhoto()?c('React').createElement(c('BackgroundImage.react'),{width:32,height:32,backgroundSize:'cover',src:l.getPhoto()}):c('React').createElement('span',null),p=l.getAuxiliaryData(),q=null;if(p)if(p.verified){q=c('React').createElement(c('Badge.react'),null)}else if(p.nonCoworker){q=c('React').createElement(c('Badge.react'),{type:'work_non_coworker'})}else if(p.workUser)q=c('React').createElement(c('Badge.react'),{type:'work'});var r="_599m"+(!n?' '+"_5mne":'')+(this.props.highlighted?' '+"_599n":'');r=c('joinClasses')(r,this.props.className);var s=this.props.tooltipPosition?this.props.tooltipPosition:'right';return c('React').createElement('li',babelHelpers['extends']({'aria-selected':this.props.highlighted,className:r,onMouseDown:this._onSelect,onMouseEnter:this._onHighlight,role:this.props.role,'data-testid':c('LegacyContactTestConstants').CHOOSE_CONTACT_BUTTON},this.props.tooltip?c('Tooltip').propsFor(this.props.tooltip,s):{}),c('React').createElement(c('ImageBlock.react'),{spacing:'medium'},o,c('React').createElement('div',null,c('React').createElement('div',{className:"_599p"},c('React').createElement(c('TextWithEmoticons.react'),{renderEmoticons:false,renderEmoji:true,text:l.getTitle()}),q),n)))}});f.exports=j}),null);
__d('XUITypeaheadView.react',['cx','React','TypeaheadViewPropTypes','XUITypeaheadViewContainer.react','XUITypeaheadViewItem.react','joinClasses'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(){var l,m;'use strict';for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.$XUITypeaheadView1=function(q){var r=q===this.props.highlightedEntry;return c('React').createElement(c('XUITypeaheadViewItem.react'),{key:q.getUniqueID(),entry:q,highlighted:r,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight})}.bind(this),m}k.prototype.render=function(){'use strict';var l=!this.props.entries.length?"_599s":'';if(this.props.className)l=c('joinClasses')(this.props.className,l);return c('React').createElement(c('XUITypeaheadViewContainer.react'),{className:l,id:this.props.ariaOwneeID,role:this.props.role},this.props.entries.map(this.$XUITypeaheadView1))};k.propTypes=c('TypeaheadViewPropTypes');k.defaultProps={role:'listbox'};f.exports=k}),null);
__d('fileSliceName',['UserAgent_DEPRECATED'],(function a(b,c,d,e,f,g){var h='slice',i;if(i=c('UserAgent_DEPRECATED').chrome()){if(i<21)h='webkitSlice';}else if(i=c('UserAgent_DEPRECATED').firefox()){if(i<13)h='mozSlice';}else if(!(i=c('UserAgent_DEPRECATED').safari()))if(c('UserAgent_DEPRECATED').webkit())h='webkitSlice';f.exports=h}),null);
__d('FileHasher',['WebWorker','fileSliceName','emptyFunction','FileHashWorkerResource'],(function a(b,c,d,e,f,g){h.isSupported=function(){'use strict';return c('WebWorker').isSupported()};function h(){'use strict';var i=c('FileHashWorkerResource');c('WebWorker').prepareResource(i);this.$FileHasher1=new (c('WebWorker'))(i).setMessageHandler(function(j){this.$FileHasher2(j)}.bind(this)).execute()}h.prototype.hash=function(i,j){'use strict';this.$FileHasher2=j;this.$FileHasher1.postMessage({file:i,fileSliceName:c('fileSliceName')});return this};h.prototype.destroy=function(){'use strict';this.$FileHasher2=c('emptyFunction');this.$FileHasher1.terminate()};f.exports=h}),null);
__d('fileSlice',['fileSliceName'],(function a(b,c,d,e,f,g){var h=b.File&&b.File.prototype[c('fileSliceName')];f.exports=h}),null);
__d('PagesComposerActionsTypes',['keyMirror'],(function a(b,c,d,e,f,g){var h=c('keyMirror')({BACKDATE:null,SET_DRAFT:null,SCHEDULE:null,SET_ADS_POST:null,SET_BOOSTED_POST:null,SHOW_OFFER_UPSELL:null,ABANDON_OFFER_UPSELL:null,INSTAGRAM_CROSS_POSTING:null});f.exports=h}),null);
__d('ReactComposerStatusActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){f.exports=c('keyMirrorRecursive')({SET_EDITOR_STATE:null,SET_ORIGINAL_EDITOR_STATE:null,SET_TEXT_LENGTH:null,SET_MENTIONS:null,SET_MENTIONS_SOURCE:null,SET_TYPEAHEAD_REPORTER:null},'ReactComposerStatusActionType')}),null);
__d("ComposedBlockType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({UNSTYLED:0,PARAGRAPH:1,UNORDERED_LIST_ITEM:2,ORDERED_LIST_ITEM:3,BLOCKQUOTE:4,HEADER_ONE:5,HEADER_TWO:6,CODE:7,MEDIA:8,PULLQUOTE:9,HEADER_THREE:10,HEADER_FOUR:11,HEADER_FIVE:12,HEADER_SIX:13,CHECKBOX_LIST_ITEM:14})}),null);
__d("ComposedEntityType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({MENTION:0,LINK:1,IMAGE:2,VIDEO:3,EMOTICON:4,TOKEN:5,HASHTAG:6,IMPLICIT_LINK:7,EMBED:8,EMOJI:9,MATH:10})}),null);
__d('ReactComposerMultilingualStatusActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){f.exports=c('keyMirrorRecursive')({MOUNTED_MULTILINGUAL_STATUS:null,MULTILINGUAL_PROMPT_CLICK:null,MULTILINGUAL_PROMPT_CLOSE:null,LANGUAGE_CREATED:null,LANGUAGE_CHANGED:null,LANGUAGE_REMOVED:null,SET_LANGUAGE_EDITOR_STATE:null,SET_SPECIFIED_POST_LANGUAGE:null,PREFILL_MULTILINGUAL_DATA:null},'ReactComposerMultilingualStatusActionType')}),null);
__d('DraftStringKey',[],(function a(b,c,d,e,f,g){'use strict';var h={stringify:function i(j){return '_'+String(j)},unstringify:function i(j){return j.slice(1)}};f.exports=h}),null);
__d('encodeEntityRanges',['DraftStringKey','UnicodeUtils'],(function a(b,c,d,e,f,g){'use strict';var h=c('UnicodeUtils').strlen;function i(j,k){var l=[];j.findEntityRanges(function(m){return !!m.getEntity()},function(m,n){var o=j.getText(),p=j.getEntityAt(m);l.push({offset:h(o.slice(0,m)),length:h(o.slice(m,n)),key:Number(k[c('DraftStringKey').stringify(p)])})});return l}f.exports=i}),null);
__d('encodeInlineStyleRanges',['UnicodeUtils','findRangesImmutable'],(function a(b,c,d,e,f,g){'use strict';var h=function m(n,o){return n===o},i=function m(n){return !!n},j=[];function k(m,n,o){var p=[],q=n.map(function(r){return r.has(o)}).toList();c('findRangesImmutable')(q,h,i,function(r,s){var t=m.getText();p.push({offset:c('UnicodeUtils').strlen(t.slice(0,r)),length:c('UnicodeUtils').strlen(t.slice(r,s)),style:o})});return p}function l(m){var n=m.getCharacterList().map(function(p){return p.getStyle()}).toList(),o=n.flatten().toSet().map(function(p){return k(m,n,p)});return Array.prototype.concat.apply(j,o.toJS())}f.exports=l}),null);
__d('convertFromDraftStateToRaw',['DraftStringKey','encodeEntityRanges','encodeInlineStyleRanges'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=0,k={},l=[];i.getBlockMap().forEach(function(o,p){o.findEntityRanges(function(q){return q.getEntity()!==null},function(q){var r=c('DraftStringKey').stringify(o.getEntityAt(q));if(!Object.prototype.hasOwnProperty.call(k,r))k[r]=''+j++;});l.push({key:p,text:o.getText(),type:o.getType(),depth:o.getDepth(),inlineStyleRanges:c('encodeInlineStyleRanges')(o),entityRanges:c('encodeEntityRanges')(o,k),data:o.getData().toObject()})});var m=Object.keys(k),n={};m.forEach(function(o,p){var q=i.getEntity(c('DraftStringKey').unstringify(o));n[p]={type:q.getType(),mutability:q.getMutability(),data:q.getData()}});return {entityMap:n,blocks:l}}f.exports=h}),null);
__d('encodeBlocks',['ComposedBlockType','ComposedEntityType','ComposedInlineStyle','convertFromDraftStateToRaw','mapObject','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(k){var l=c('convertFromDraftStateToRaw')(k),m=l.blocks,n=l.entityMap,o=m.map(function(q){var r=q.key,s=q.type,t=q.text,u=q.depth,v=q.inlineStyleRanges,w=q.entityRanges,x=q.data;return {key:c('nullthrows')(r),type:i[s],text:t,depth:c('nullthrows')(u),inlineStyleRanges:c('nullthrows')(v).map(function(y){return babelHelpers['extends']({},y,{style:j[y.style]})}),entityRanges:c('nullthrows')(w),data:x}}),p=c('mapObject')(n,function(q){var r=q.data,s=null,t=undefined;if(typeof r==='object'){s=r.id;t=babelHelpers.objectWithoutProperties(r,['id']);if(Object.keys(t).length===0){t=undefined}else t=c('mapObject')(t,function(u){return u==null?'':String(u)});}return {id:s||null,type:c('ComposedEntityType')[q.type],data:t}});return {blocks:o,entityMap:p}}var i={unstyled:c('ComposedBlockType').UNSTYLED,paragraph:c('ComposedBlockType').PARAGRAPH,blockquote:c('ComposedBlockType').BLOCKQUOTE,'ordered-list-item':c('ComposedBlockType').ORDERED_LIST_ITEM,'unordered-list-item':c('ComposedBlockType').UNORDERED_LIST_ITEM,'code-block':c('ComposedBlockType').CODE,'header-one':c('ComposedBlockType').HEADER_ONE,'header-two':c('ComposedBlockType').HEADER_TWO,atomic:c('ComposedBlockType').MEDIA,pullquote:c('ComposedBlockType').PULLQUOTE,'checkbox-list-item':c('ComposedBlockType').CHECKBOX_LIST_ITEM,'header-three':c('ComposedBlockType').HEADER_TWO,'header-four':c('ComposedBlockType').HEADER_TWO,'header-five':c('ComposedBlockType').HEADER_TWO,'header-six':c('ComposedBlockType').HEADER_TWO},j={BOLD:c('ComposedInlineStyle').BOLD,CODE:c('ComposedInlineStyle').CODE,ITALIC:c('ComposedInlineStyle').ITALIC,STRIKETHROUGH:c('ComposedInlineStyle').STRIKETHROUGH,UNDERLINE:c('ComposedInlineStyle').UNDERLINE};f.exports=h}),null);
__d('getImplicitURLMatches',['URLMatcher'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=i.getText(),l=0,m;while((m=c('URLMatcher').match(k))!==null){var n=k.indexOf(m),o=n+m.length;j(l+n,l+o);l+=o;k=k.substring(o)}}f.exports=h}),null);
__d('getImplicitURLRangesForContentState',['getImplicitURLMatches'],(function a(b,c,d,e,f,g){'use strict';function h(i){return i.getBlockMap().map(function(j){var k=[];c('getImplicitURLMatches')(j,function(l,m){k.push({start:l,end:m})});return k}).toArray()}f.exports=h}),null);
__d('getMentionsTextForContentState',['DraftEntity','emptyFunction'],(function a(b,c,d,e,f,g){'use strict';var h=c('emptyFunction').thatReturnsTrue,i=/[\\\]:]/g;function j(l){var m=arguments.length<=1||arguments[1]===undefined?'':arguments[1],n=l.getBlockMap().map(function(o){var p=o.getText(),q=[];o.findEntityRanges(h,function(r,s){q.push(k(p.slice(r,s),o.getEntityAt(r)))});return q.join('')});return n.join('\n'+m)}function k(l,m){if(m){var n=c('DraftEntity').get(m);if(n.getType()==='MENTION'){l=l.replace(i,function(p){return '\\'+p});var o=n.getData().id;if(/^\d+$/.test(o))return '@['+o+':'+l+']';}else if(n.getType()==='EMOTICON'){return n.getData().originalEmoticon}else if(n.getType()==='EMOJI')return n.getData().emoji.join('');}return l.replace('@[','@ [')}f.exports=j}),null);
__d('getRichComposedTextDataForSave',['ComposedEntityType','UnicodeUtils','URI'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=i.encodedContent,k=i.implicitLinks,l=j.blocks,m=j.entityMap;k=k||[];var n=Object.keys(m).map(function(q){return Number(q)}),o=n.length?Math.max.apply(Math,n):0,p=o+1;k.forEach(function(q,r){q.forEach(function(s){var t=s.start,u=s.end,v=l[r],w=v.text,x=v.entityRanges,y=p++,z=c('UnicodeUtils').strlen(w.slice(0,t)),aa=c('UnicodeUtils').strlen(w.slice(t,u)),ba=l[r].entityRanges.some(function(ha){return ha.offset<z+aa&&ha.offset+ha.length>z});if(ba)return;var ca={offset:z,length:aa,key:y},da=l[r].text.slice(t,u),ea=new (c('URI'))(da),fa=ea.getProtocol();if(!fa)ea.setProtocol('http');var ga={id:null,type:c('ComposedEntityType').IMPLICIT_LINK,data:{url:ea.toString()}};x.push(ca);m[String(y)]=ga})});return {blocks:l.map(function(q){return q.text}),block_depths:l.map(function(q){return q.depth}),block_types:l.map(function(q){return q.type}),block_data:l.map(function(q){return q.data?JSON.stringify(q.data):'{}'}),entities:l.map(function(q){return JSON.stringify(q.entityRanges)}),entity_map:JSON.stringify(m),inline_styles:l.map(function(q){return JSON.stringify(q.inlineStyleRanges)})}}f.exports=h}),null);
__d('ReactComposerStatusStore',['ComposedBlockType','ComposedEntityType','ReactComposerMultilingualStatusActionType','ReactComposerStatusActionType','ReactComposerStoreBase','ReactComposerTaggerStore','EditorState','encodeBlocks','getImplicitURLRangesForContentState','getMentionsTextForContentState','getRichComposedTextDataForSave'],(function a(b,c,d,e,f,g){var h,i;function j(l){for(var m=l.blocks,n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var p;if(n){if(o>=m.length)break;p=m[o++]}else{o=m.next();if(o.done)break;p=o.value}var q=p;if(q.type!==c('ComposedBlockType').UNSTYLED||q.inlineStyleRanges.length!==0)return true;}for(var r in l.entityMap){var s=l.entityMap[r];if(s.type!==c('ComposedEntityType').MENTION)return true;}return false}h=babelHelpers.inherits(k,c('ReactComposerStoreBase'));i=h&&h.prototype;function k(){'use strict';var l;i.constructor.call(this,function(){var m=c('EditorState').createEmpty();return {activeEditorState:m,activeLanguageDialect:null,editorState:m,length:0,mentionsSource:null,originalEditorState:null,typeaheadReporter:null,mentions:null}},function(m){switch(m.type){case c('ReactComposerStatusActionType').SET_MENTIONS_SOURCE:l&&l.$ReactComposerStatusStore1(m);break;case c('ReactComposerStatusActionType').SET_TYPEAHEAD_REPORTER:l&&l.$ReactComposerStatusStore2(m);break;case c('ReactComposerStatusActionType').SET_EDITOR_STATE:l&&l.$ReactComposerStatusStore3(m);break;case c('ReactComposerMultilingualStatusActionType').SET_LANGUAGE_EDITOR_STATE:l&&l.$ReactComposerStatusStore4(m);break;case c('ReactComposerStatusActionType').SET_ORIGINAL_EDITOR_STATE:l&&l.$ReactComposerStatusStore5(m);break;case c('ReactComposerStatusActionType').SET_MENTIONS:l&&l.$ReactComposerStatusStore6(m);break;case c('ReactComposerStatusActionType').SET_TEXT_LENGTH:l&&l.$ReactComposerStatusStore7(m);break;}});l=this}k.prototype.getMentionsSource=function(l){'use strict';return this.getComposerData(l).mentionsSource};k.prototype.getTypeaheadReporter=function(l){'use strict';return this.getComposerData(l).typeaheadReporter};k.prototype.getEditorState=function(l){'use strict';return this.getComposerData(l).editorState};k.prototype.getOriginalEditorState=function(l){'use strict';return this.getComposerData(l).originalEditorState};k.prototype.getActiveEditorState=function(l){'use strict';return this.getComposerData(l).activeEditorState};k.prototype.getActiveLanguageDialect=function(l){'use strict';return this.getComposerData(l).activeLanguageDialect};k.prototype.getMentions=function(l){'use strict';return this.getComposerData(l).mentions};k.prototype.getMessage=function(l){var m=arguments.length<=1||arguments[1]===undefined?false:arguments[1];'use strict';var n=this.getEditorState(l);if(!n)return '';var o=n.getCurrentContent(),p=m?'\n':'';return c('getMentionsTextForContentState')(o,p)};k.prototype.getMessageText=function(l){'use strict';var m=this.getEditorState(l);if(!m)return '';var n=m.getCurrentContent();return n?n.getPlainText():''};k.prototype.getRichTextBlocks=function(l){'use strict';var m=c('ReactComposerTaggerStore').hasMarkdown(l);if(m)return null;var n=this.getEditorState(l);if(!n)return null;var o=n.getCurrentContent(),p=c('encodeBlocks')(o);if(!j(p))return null;var q={encodedContent:p,implicitLinks:c('getImplicitURLRangesForContentState')(o)};return c('getRichComposedTextDataForSave')(q)};k.prototype.getOriginalMessageText=function(l){'use strict';var m=this.getOriginalEditorState(l);if(!m)return '';var n=m.getCurrentContent();return n?n.getPlainText():''};k.prototype.getTextLength=function(l){'use strict';return this.getComposerData(l).textLength};k.prototype.$ReactComposerStatusStore1=function(l){'use strict';var m=this.getComposerData(l.composerID);m.mentionsSource=l.mentionsSource;this.emitChange(l.composerID)};k.prototype.$ReactComposerStatusStore2=function(l){'use strict';var m=this.getComposerData(l.composerID);m.typeaheadReporter=l.typeaheadReporter;this.emitChange(l.composerID)};k.prototype.$ReactComposerStatusStore3=function(l){'use strict';var m=this.getComposerData(l.composerID);m.editorState=l.editorState;m.activeEditorState=l.editorState;m.activeLanguageDialect=null;this.emitChange(l.composerID)};k.prototype.$ReactComposerStatusStore4=function(l){'use strict';var m=this.getComposerData(l.composerID);m.activeEditorState=l.editorState;m.activeLanguageDialect=l.languageDialect;this.emitChange(l.composerID)};k.prototype.$ReactComposerStatusStore5=function(l){'use strict';var m=this.getComposerData(l.composerID);m.originalEditorState=l.originalEditorState;this.emitChange(l.composerID)};k.prototype.$ReactComposerStatusStore6=function(l){'use strict';var m=this.getComposerData(l.composerID);m.mentions=l.mentions;this.emitChange(l.composerID)};k.prototype.$ReactComposerStatusStore7=function(l){'use strict';var m=this.validateAction(l,['composerID','textLength']),n=m[0],o=m[1],p=this.getComposerData(n);p.textLength=o;this.emitChange(n)};f.exports=new k()}),null);
__d('ReactComposerActions',['ReactComposerActionTypes','ReactComposerDispatcher','ReactComposerStore'],(function a(b,c,d,e,f,g){c('ReactComposerStore');var h,i={initConfig:function j(k,l,m,n){c('ReactComposerDispatcher').dispatch({composerID:k,type:c('ReactComposerActionTypes').INIT_CONFIG,loggingConfig:l,activateOnInit:m===true,sproutsConfig:n})},schedule:function j(k,l){c('ReactComposerDispatcher').dispatch({composerID:k,type:c('ReactComposerActionTypes').SCHEDULE,scheduleDate:l})},postError:function j(k,l){c('ReactComposerDispatcher').dispatch({composerID:k,type:c('ReactComposerActionTypes').POST_ERROR,response:l})},postIntended:function j(k,l){setTimeout(function(){if(!h||h(k,l.actorID,l.config,l.targetID))c('ReactComposerDispatcher').dispatch({composerID:k,type:c('ReactComposerActionTypes').POST_INTENDED,actorID:l.actorID,config:l.config,targetID:l.targetID});},0)},registerPostIntendedHandler:function j(k){h=k},postStarted:function j(k,l){var m=l.actorID,n=l.composerType,o=l.config,p=l.onPostSuccess,q=l.targetID,r=babelHelpers.objectWithoutProperties(l,['actorID','composerType','config','onPostSuccess','targetID']);setTimeout(function(){return c('ReactComposerDispatcher').dispatch({composerID:k,composerType:n,type:c('ReactComposerActionTypes').POST_STARTED,actorID:m,config:o,targetID:q,onPostSuccess:p,otherData:r})},0)},postSucceeded:function j(k){c('ReactComposerDispatcher').dispatch({composerID:k,type:c('ReactComposerActionTypes').POST_SUCCEEDED})},postFinally:function j(k,l){c('ReactComposerDispatcher').dispatch({composerID:k,type:c('ReactComposerActionTypes').POST_FINALLY,response:l})},publishStarted:function j(k){c('ReactComposerDispatcher').dispatch({composerID:k,type:c('ReactComposerActionTypes').PUBLISH_STARTED})},postPreprocessing:function j(k){c('ReactComposerDispatcher').dispatch({composerID:k,type:c('ReactComposerActionTypes').POST_PREPROCESSING})},reset:function j(k){c('ReactComposerDispatcher').dispatch({composerID:k,type:c('ReactComposerActionTypes').COMPOSER_RESET})},expandSprouts:function j(k){c('ReactComposerDispatcher').dispatch({composerID:k,type:c('ReactComposerActionTypes').EXPAND_SPROUTS})},collapseSprouts:function j(k){c('ReactComposerDispatcher').dispatch({composerID:k,type:c('ReactComposerActionTypes').COLLAPSE_SPROUTS})}};f.exports=i}),null);
__d('AbstractAsyncSearchSource',['AbstractSearchSource','SearchableEntry','SearchSourceCallbackManager','SearchSourceQueryStatus','TokenizeUtil','emptyFunction','isValidUniqueID','nullthrows'],(function a(b,c,d,e,f,g){var h,i,j=c('SearchSourceQueryStatus').ACTIVE,k=c('SearchSourceQueryStatus').COMPLETE;h=babelHelpers.inherits(l,c('AbstractSearchSource'));i=h&&h.prototype;function l(m,n,o){'use strict';i.constructor.call(this);this.$AbstractAsyncSearchSource1=m.asyncErrorHandler||c('emptyFunction');this.$AbstractAsyncSearchSource2=m.auxiliaryFields;this.$AbstractAsyncSearchSource4=m.bootstrapRequests;this.$AbstractAsyncSearchSource6=m.getAllForEmptyQuery;this.$AbstractAsyncSearchSource8=m.packageFn||this.$AbstractAsyncSearchSource12;this.$AbstractAsyncSearchSource9=m.queryRequests;this.$AbstractAsyncSearchSource10=m.requestData||{};this.$AbstractAsyncSearchSource3=[];this.$AbstractAsyncSearchSource5=new (c('SearchSourceCallbackManager'))({parseFn:c('TokenizeUtil').parse,matchFn:m.matchFn||c('TokenizeUtil').isQueryMatch,indexFn:m.indexFn,exclusions:m.exclusions});this.$AbstractAsyncSearchSource11=n;this.$AbstractAsyncSearchSource7=o}l.prototype.bootstrapImpl=function(m){'use strict';var n=m;if(!this.$AbstractAsyncSearchSource4||!this.$AbstractAsyncSearchSource4.length){n();return}var o=this.$AbstractAsyncSearchSource4.length,p=0;this.$AbstractAsyncSearchSource4.forEach(function(q){this.$AbstractAsyncSearchSource13(this.$AbstractAsyncSearchSource10,q,function(r){this.$AbstractAsyncSearchSource5.addLocalEntries(r);this.$AbstractAsyncSearchSource3=this.$AbstractAsyncSearchSource3.concat(r);p++;if(n&&p===o){n();n=null}}.bind(this))}.bind(this))};l.prototype.searchImpl=function(m,n,o){'use strict';if(this.$AbstractAsyncSearchSource6&&m===''){this.getBootstrappedEntries(function(u){n(u,m)});return}var p=null,q={},r=this.$AbstractAsyncSearchSource5.search(m,function(u,v,w){if(o&&o.waitForAllResults&&w!==k)return;if(!p){p=u;p.forEach(function(x){q[x.getUniqueID()]=true})}else u.forEach(function(x){var y=x.getUniqueID();if(!q[y]){c('nullthrows')(p).push(x);q[y]=true}});n(p,v,w)});if(!r||!this.$AbstractAsyncSearchSource9||!this.$AbstractAsyncSearchSource9.length)return;var s=babelHelpers['extends']({value:m,existing_ids:p&&p.map(function(u){return u.getUniqueID()}).join(',')},this.$AbstractAsyncSearchSource10),t=this.$AbstractAsyncSearchSource9.length;this.$AbstractAsyncSearchSource9.forEach(function(u){this.$AbstractAsyncSearchSource13(s,u,function(v){t--;this.$AbstractAsyncSearchSource14(v,m,t?j:k)}.bind(this))}.bind(this))};l.prototype.getBootstrappedEntries=function(m){'use strict';return this.bootstrap(function(){return m(this.$AbstractAsyncSearchSource3||[])}.bind(this))};l.prototype.getAllEntriesMap=function(){'use strict';return this.$AbstractAsyncSearchSource5.getAllEntriesMap()};l.prototype.setRequestData=function(m){'use strict';this.$AbstractAsyncSearchSource10=m};l.prototype.$AbstractAsyncSearchSource13=function(m,n,o){'use strict';this.$AbstractAsyncSearchSource11(m,n,function(p){return o(this.$AbstractAsyncSearchSource7(p,this.$AbstractAsyncSearchSource8).filter(Boolean))}.bind(this),this.$AbstractAsyncSearchSource1)};l.prototype.$AbstractAsyncSearchSource15=function(m){'use strict';this.$AbstractAsyncSearchSource5.addLocalEntries(m)};l.prototype.$AbstractAsyncSearchSource14=function(m,n,o){'use strict';this.$AbstractAsyncSearchSource5.addQueryEntries(m,n,o)};l.prototype.$AbstractAsyncSearchSource12=function(m,n){'use strict';var o=m.title||m.text,p=m.uniqueID||m.uid;if(!o||!c('isValidUniqueID')(p))return null;return new (c('SearchableEntry'))({uniqueID:p,order:m.order||m.index||n,title:o,subtitle:m.subtitle||m.category||m.subtext,keywordString:m.keywordString||m.tokens,type:m.type,photo:m.photo,uri:m.uri||m.path,auxiliaryData:this.$AbstractAsyncSearchSource16(m)})};l.prototype.$AbstractAsyncSearchSource16=function(m){'use strict';var n=void 0;if(this.$AbstractAsyncSearchSource2){n={};for(var o in this.$AbstractAsyncSearchSource2){var p=this.$AbstractAsyncSearchSource2[o];n[o]=m[p]}}if(m.aux_data)n=babelHelpers['extends']({},n,m.aux_data);return n};f.exports=l}),null);
__d('WebAsyncSearchSourceUtils',[],(function a(b,c,d,e,f,g){var h={normalizeResponse:function i(j,k){var l=j.getPayload(),m=void 0;if(Array.isArray(l)){m=l}else if(l&&l.entries){m=l.entries}else m=[];if(typeof m==='object'&&!Array.isArray(m))m=Object.keys(m).map(function(n){return m[n]});return m.map(k,this)}};f.exports=h}),null);
__d('WebAsyncSearchSource',['AbstractAsyncSearchSource','AbstractSearchSource','AsyncRequest','WebAsyncSearchSourceUtils'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('AbstractSearchSource'));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this);this.$WebAsyncSearchSource1=new (c('AbstractAsyncSearchSource'))(k,this.$WebAsyncSearchSource2,c('WebAsyncSearchSourceUtils').normalizeResponse)}j.prototype.bootstrapImpl=function(k){'use strict';this.$WebAsyncSearchSource1.bootstrap(k)};j.prototype.searchImpl=function(k,l,m){'use strict';this.$WebAsyncSearchSource1.search(k,l,m)};j.prototype.getBootstrappedEntries=function(k){'use strict';return this.$WebAsyncSearchSource1.getBootstrappedEntries(k)};j.prototype.getAllEntriesMap=function(){'use strict';return this.$WebAsyncSearchSource1.getAllEntriesMap()};j.prototype.setRequestData=function(k){'use strict';this.$WebAsyncSearchSource1.setRequestData(k)};j.prototype.$WebAsyncSearchSource2=function(k,l,m,n){'use strict';new (c('AsyncRequest'))(l.uri).setData(babelHelpers['extends']({},k,l.data)).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true).setHandler(m).setErrorHandler(n).send()};f.exports=j}),null);
__d("SlideshowFrameImagesRequestType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SCHEDULE_ASYNC_JOB:0,FETCH_FRAME_IMAGES:1})}),null);
__d("XSlideshowShakrOAuthController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/slideshow\/shakr\/",{})}),null);
__d("XSlideshowShakrPollController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/slideshow\/shakr\/show\/",{})}),null);
__d("XSlideshowStorylineMoodAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/slideshow\/storyline_mood\/",{target_id:{type:"FBID"}})}),null);
__d("XSlideshowStorylineMoodDeleteController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/slideshow\/storyline_mood\/delete\/",{})}),null);
__d("XSlideshowStorylineMoodUploadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/slideshow\/storyline_mood\/upload\/",{})}),null);
__d("XSlideshowVideoFrameImagesAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/slideshow\/frame_images\/",{request_type:{type:"Enum",enumType:0},video_id:{type:"FBID"}})}),null);
__d('SlideshowDataManager',['AsyncRequest','Bootloader','SlideshowFrameImagesRequestType','XSlideshowShakrOAuthController','XSlideshowShakrPollController','XSlideshowStorylineMoodAsyncController','XSlideshowStorylineMoodDeleteController','XSlideshowStorylineMoodUploadController','XSlideshowVideoFrameImagesAsyncController','immutable'],(function a(b,c,d,e,f,g){'use strict';h.prototype.fetchStorylineMoodSource=function(i,j,k){var l=c('XSlideshowStorylineMoodAsyncController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(l).setData({storyline_mood_id:i,total_length:j}).setMethod('POST').setHandler(function(m){return k(m.payload)}).send()};h.prototype.fetchStorylineMoodFiles=function(i,j){var k=c('XSlideshowStorylineMoodAsyncController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(k).setMethod('GET').setData({target_id:j}).setReadOnly(true).setHandler(function(l){return i(this.getStorylineMoodFiles(l.payload))}.bind(this)).send()};h.prototype.getStorylineMoodFiles=function(i){var j=[];Object.keys(i).forEach(function(k){j.push({moodID:k,fileName:i[k].fileName,categories:i[k].categories,source:null})});return c('immutable').List(j)};h.prototype.scheduleFrameImagesAsyncJob=function(i){var j=c('XSlideshowVideoFrameImagesAsyncController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(j).setData({request_type:c('SlideshowFrameImagesRequestType').SCHEDULE_ASYNC_JOB,video_id:i}).setMethod('POST').send()};h.prototype.fetchVideoFrameImages=function(i,j){var k=c('XSlideshowVideoFrameImagesAsyncController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(k).setData({request_type:c('SlideshowFrameImagesRequestType').FETCH_FRAME_IMAGES,video_id:j}).setMethod('POST').setHandler(function(l){return i(l.payload)}).send()};h.prototype.uploadAudioFile=function(i,j,k,l){if(!i||!i.input||!i.input.files.length)return;var m=c('XSlideshowStorylineMoodUploadController').getURIBuilder().getURI(),n=new FormData();n.append('audio_file',i.input.files[0]);n.append('target_id',j);new (c('AsyncRequest'))().setURI(m).setRawData(n).setMethod('POST').setErrorHandler(function(o){return l()}).setHandler(function(o){return this.$SlideshowDataManager1(o.payload,k,l)}.bind(this)).send();i.clear()};h.prototype.$SlideshowDataManager1=function(i,j,k){if(i.success){j({moodID:i.moodID,fileName:i.fileName,categories:i.categories,source:null})}else k();};h.prototype.deleteAudioFile=function(i){var j=c('XSlideshowStorylineMoodDeleteController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(j).setData({mood_id:i}).setMethod('POST').send()};h.prototype.getShakrScopeToken=function(i){var j=c('XSlideshowShakrOAuthController').getURIBuilder();new (c('AsyncRequest'))().setURI(j.getURI()).setHandler(function(k){return i(k.payload)}).send()};h.prototype.pollShakrForVideoURL=function(i,j){var k=c('XSlideshowShakrPollController').getURIBuilder();new (c('AsyncRequest'))().setURI(k.getURI()).setData({show_id:i}).setHandler(function(l){return j(l.payload)}).send()};function h(){}f.exports=new h()}),null);
__d('SlideshowImageUtil',['invariant','immutable','SlideshowConstants'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('SlideshowConstants').formats,j='-',k=24,l=1.3,m=10,n=460,o=32,p=.8,q={getCroppingSpec:function r(s,t,u,v){if(v&&s){var w=Object.keys(s)[0],x=s[w];return {format:c('SlideshowConstants').formats.Original,topLeft:x[0],bottomRight:x[1]}}return this.getFullSizeImageBoxCroppingSpec({width:u.width?u.width:0,height:u.height?u.height:0},{width:t.width,height:t.height})},shouldCropImages:function r(s){var t=s[0].width,u=s[0].height;for(var v=s,w=Array.isArray(v),x=0,v=w?v:v[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var y;if(w){if(x>=v.length)break;y=v[x++]}else{x=v.next();if(x.done)break;y=x.value}var z=y;if(z.width!==t||z.height!==u)return true;}return false},getCrops:function r(s,t,u){var v,w=this.calculateDefaultCoordinates(s,u);return v={},v[t]=w,v},calculateCropsForFormat:function r(s,t,u){if(!s.size)return c('immutable').Map();var v=c('immutable').Map();switch(t){case i.Original:var w=s.first(),x=u.get(w.key),y=x.height,z=x.width;s.forEach(function(aa){v=v.set(aa.key,this.getCrops(u.get(aa.key),z+c('SlideshowConstants').SIZE_DELIMITER+y,z/y))}.bind(this));break;case i.Wide:s.forEach(function(aa){v=v.set(aa.key,this.getCrops(u.get(aa.key),t,c('SlideshowConstants').LANDSCAPE_ASPECT_RATIO))}.bind(this));break;case i.Square:s.forEach(function(aa){v=v.set(aa.key,this.getCrops(u.get(aa.key),t,c('SlideshowConstants').SQUARE_ASPECT_RATIO))}.bind(this));break;case i.Vertical:s.forEach(function(aa){v=v.set(aa.key,this.getCrops(u.get(aa.key),t,c('SlideshowConstants').VERTICAL_ASPECT_RATIO))}.bind(this));break;default:}return v},calculateDefaultCoordinates:function r(s,t){var u=void 0,v=void 0;if(s.width/t>s.height){u=s.height;v=s.height*t}else{v=s.width;u=s.width/t}var w=(s.width-v)/2,x=(s.height-u)/2,y=Math.floor(w)-w,z=Math.floor(x)-x;return [[w+y,x+z],[Math.round(w+v+y),Math.round(x+u+z)]]},getPreviewBoxDimensions:function r(s,t){var u=t,v=t;if(s.length>0){var w=s[0],x=Object.keys(w)[0];switch(x){case c('SlideshowConstants').formats.Wide:u=t/c('SlideshowConstants').LANDSCAPE_ASPECT_RATIO;break;case c('SlideshowConstants').formats.Vertical:v=t*c('SlideshowConstants').VERTICAL_ASPECT_RATIO;break;case c('SlideshowConstants').formats.Square:break;default:var y=x.split(c('SlideshowConstants').SIZE_DELIMITER),z=Number(y[0]),aa=Number(y[1]);if(z>aa){u=Math.floor(v*aa/z)}else v=Math.floor(u*z/aa);break;}}return {width:v,height:u}},getFullSizeImageBoxCroppingSpec:function r(s,t){var u=t.width/t.height,v=this.calculateDefaultCoordinates(s,u);v.length===2||h(0);return {format:c('SlideshowConstants').formats.Original,topLeft:v[0],bottomRight:v[1]}},getDefaultCroppingSpec:function r(s){var t=this.calculateDefaultCoordinates(s,1);t.length===2||h(0);return {format:c('SlideshowConstants').formats.Square,topLeft:t[0],bottomRight:t[1]}},getHorizontalAlignmentForAPI:function r(s){var t=s.split(j);return t[1]},getFontSize:function r(s){return Math.floor(k*s)},getFontWeight:function r(s){return s?'bold':'normal'},getLineHeight:function r(){return l},getOpacity:function r(){return p},getTextoverlayMaxEdge:function r(s,t){return s-o*t*2-m*t*2},getTextoverlayPadding:function r(s){return m*s},getTextoverlayMargin:function r(s){return o*s},getScaleMultiplierFromCrops:function r(s){var t=Object.keys(s)[0],u=t.split(c('SlideshowConstants').SIZE_DELIMITER),v=Number(u[0]),w=Number(u[1]);return q.getScaleMultiplier(v,w)},getScaleMultiplier:function r(s,t){return Math.max(s/n,t/n)},getOuterTextboxCoordinatesForAPI:function r(s,t,u){var v=Object.keys(s)[0],w=v.split(c('SlideshowConstants').SIZE_DELIMITER),x=Number(w[0]),y=Number(w[1]),z=q.calculateTextboxCoordinates(y,x,t,u);return [Math.floor(z.marginLeft),Math.floor(y-z.marginTop-z.textHeight),Math.ceil(z.marginLeft+z.textWidth),Math.ceil(y-z.marginTop)]},getInnerTextboxCoordinatesForAPI:function r(s,t,u){var v=Object.keys(s)[0],w=v.split(c('SlideshowConstants').SIZE_DELIMITER),x=Number(w[0]),y=Number(w[1]),z=q.calculateTextboxCoordinates(y,x,t,u);return [Math.floor(z.marginLeft),Math.floor(y-z.marginTop-z.textHeight),Math.ceil(z.marginLeft+z.textWidth),Math.ceil(y-z.marginTop)]},convertHexToRGBA:function r(s){if(!s)return null;s=s.replace('#','');var t=parseInt(s.substring(0,2),16),u=parseInt(s.substring(2,4),16),v=parseInt(s.substring(4,6),16);return 'rgba('+t+','+u+','+v+','+q.getOpacity()+')'},calculateTextboxCoordinates:function r(s,t,u,v){var w=u.text_alignment.split(j),x=w[1],y=w[0],z=q.getFontSize(v),aa=q.getTextoverlayMaxEdge(t,v),ba=q.getTextoverlayMaxEdge(s,v),ca=document.createElement('div');ca.textContent=u.textoverlay_content?u.textoverlay_content:'';ca.style.visibility='hidden';ca.style.display='inline-block';ca.style.wordWrap='break-word';ca.style.whiteSpace='pre-wrap';ca.style.fontFamily=u.font;ca.style.fontWeight=q.getFontWeight(u.bold);ca.style.fontSize=z+'px';ca.style.textAlign=x;ca.style.maxWidth=aa+'px';ca.style.maxHeight=ba+'px';ca.style.lineHeight=q.getLineHeight()*z+'px';ca.style.padding=q.getTextoverlayPadding(v)+'px';ca.style.letterSpacing='0.2px';document.body.appendChild(ca);var da=ca.clientWidth,ea=ca.clientHeight;document.body.removeChild(ca);var fa=o*v,ga=o*v,ha=t-o*v,ia=s-o*v;if(x=='center'){fa=Math.min((t-da)/2,ha)}else if(x=='right')fa=Math.min(t-o*v-da,ha);if(y=='center'){ga=Math.min((s-ea)/2,ia)}else if(y=='bottom')ga=Math.min(s-o*v-ea,ia);return {marginLeft:fa,marginTop:ga,textHeight:ea,textWidth:da}}};f.exports=q}),null);
__d('SlideshowUtil',['SlideshowConstants','SlideshowImageUtil','immutable'],(function a(b,c,d,e,f,g){'use strict';var h=1000,i=2,j={getDurationParam:function k(l,m,n){var o=Math.min(l,c('SlideshowConstants').max_photo_num),p=h*m,q=n*(o-1),r=Math.floor((p-q)/o);return {durationInMS:r,transitionInMS:n}},getTotalLengthInSec:function k(l,m){var n=Math.min(m,c('SlideshowConstants').max_photo_num);return Math.round(l*n/h)},getMaximumTotalLengthInMS:function k(){var l=c('SlideshowConstants').max_photo_num,m=c('SlideshowConstants').image_duration_in_sec_options.slice(-1)[0];return l*m*h},getTotalNumFramesFromVideo:function k(){return c('SlideshowConstants').frames_from_video.default_num_selected_frames+i},getSelectedFramesFromVideo:function k(l,m){var n=l.length>=m+2?2:0,o=l.length-n,p=n==2?1:0,q=o+p,r=c('immutable').List(),s=Math.max(1,(o-1)/(m-1));while(p<q){r=r.push(l[Math.floor(p)]);p+=s}return r},convertHexToRGB:function k(l,m){if(!l)return null;l=l.replace('#','');var n=parseInt(l.substring(0,2),16),o=parseInt(l.substring(2,4),16),p=parseInt(l.substring(4,6),16),q=m?1:c('SlideshowImageUtil').getOpacity();return [Math.round(255*q),n,o,p]},getTextoverlayParam:function k(l,m){if(!l.textoverlay_content)return [{text_content:' ',textbox_coordinates:[0,0,0,0]}];var n=c('SlideshowImageUtil').getScaleMultiplierFromCrops(m);return [{background_color:j.convertHexToRGB(l.background_color,false),text_content:' ',textbox_coordinates:c('SlideshowImageUtil').getOuterTextboxCoordinatesForAPI(m,l,n)},{text_content:l.textoverlay_content,textbox_coordinates:c('SlideshowImageUtil').getInnerTextboxCoordinatesForAPI(m,l,n),text_color:j.convertHexToRGB(l.font_color,true),text_font:l.font==='Helvetica Neue Slideshow'?'Helvetica Neue':l.font,text_weight:l.bold,text_halign:c('SlideshowImageUtil').getHorizontalAlignmentForAPI(l.text_alignment),text_size:c('SlideshowImageUtil').getFontSize(n)}]}};f.exports=j}),null);
__d('ResumableUploadServiceState.enum',[],(function a(b,c,d,e,f,g){'use strict';var h={CANCEL:'upload-cancel',FAIL:'upload-fail',FILE_TOO_LARGE:'upload-too-large',NOT_STARTED:'upload-not-started',PROGRESS:'upload-progress',START:'upload-start',SUCCESS:'upload-success',TRANSPORT_FAILURE:'upload-transport-fail'};f.exports=h}),null);
__d('ResumableUploadService',['Promise','AsyncRequest','EventEmitter','ResumableUploadServiceState.enum','URI','uuid'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('EventEmitter'));i=h&&h.prototype;function j(k,l,m,n,o){i.constructor.call(this);this.consumer=k;this.accessToken=l;this.sessionKey=m||c('uuid')();this.contentKey=n||'';this.contentValue=o||''}j.prototype.resume=function(k){var l=new (c('URI'))('https://rupload.facebook.com/'+this.consumer+'/'+this.sessionKey);if(this.contentKey&&this.contentValue)l=l.addQueryData(this.contentKey,this.contentValue);var m=function(){return new (c('Promise'))(function(q,r){new (c('AsyncRequest'))().disableInteractionServerTracing().setAllowCrossOrigin(true).setAllowCredentials(false).setMethod('GET').setURI(l).setReadOnly(true).setRequestHeader('Authorization','OAuth '+this.accessToken).setHandler(q).setErrorHandler(r).setOption('suppressEvaluation',true).setTransportErrorHandler(function(event){this.emit(c('ResumableUploadServiceState.enum').TRANSPORT_FAILURE,event)}.bind(this)).send()}.bind(this))}.bind(this),n=function(q){return new (c('Promise'))(function(r,s){var t=JSON.parse(q.payload.response),u=t.offset;this.emit(c('ResumableUploadServiceState.enum').START,{offset:u});this.uploadAsyncRequest=new (c('AsyncRequest'))().disableInteractionServerTracing().setAllowCrossOrigin(true).setAllowCredentials(false).setURI(l).setRawData(k.slice(u)).setHandler(r).setErrorHandler(s).setRequestHeader('Authorization','OAuth '+this.accessToken).setRequestHeader('X-Entity-Name',encodeURIComponent(k.name)).setRequestHeader('X-Entity-Type',k.type).setRequestHeader('X-Entity-Length',String(k.size)).setRequestHeader('Offset',String(u)).setOption('suppressEvaluation',true).setUploadProgressHandler(function(event){var v=new ProgressEvent('upload-service',{total:k.size,loaded:event.loaded+Number(u)});this.emit(c('ResumableUploadServiceState.enum').PROGRESS,v)}.bind(this)).setTransportErrorHandler(function(event){this.emit(c('ResumableUploadServiceState.enum').TRANSPORT_FAILURE,event)}.bind(this));this.uploadAsyncRequest.send()}.bind(this))}.bind(this),o=function(q){if(q!=null){var r=JSON.parse(q.payload.response);this.emit(c('ResumableUploadServiceState.enum').SUCCESS,r.h)}else this.emit(c('ResumableUploadServiceState.enum').FAIL,'uploading failed');}.bind(this),p=function(q){return this.emit(c('ResumableUploadServiceState.enum').FAIL,q)}.bind(this);return m().then(n,p).then(o,p)};j.prototype.cancel=function(){this.uploadAsyncRequest&&this.uploadAsyncRequest.abort();this.emit(c('ResumableUploadServiceState.enum').CANCEL)};f.exports=j}),null);
__d('VideoUploadLogger',['Banzai'],(function a(b,c,d,e,f,g){function h(j){this._source=j.source;this._waterfallID=j.waterfall_id;this._targetID=j.target_id;this._delay=j.delay;this._times=[];this._isChunkedUpload=j.is_chunked_upload;this._actorID=j.actor_id;this._composerEntryPointRef=j.composer_entry_point_ref;this._isRemoteUpload=j.is_remote_upload;this._containerType=j.container_type}var i={BANZAI_GK:'videos',BANZAI_ROUTE:'video_waterfall',SOURCE_SIMPLE:'simple',SOURCE_COMPOSER:'composer',EVENT_STARTED_GENERATE_THUMBNAILS:'upload.client.started_generate_thumbnails',EVENT_FINISHED_GENERATE_THUMBNAILS:'upload.client.finished_generate_thumbnails',EVENT_SELECTED_CUSTOM_THUMBNAIL:'upload.client.selected_custom_thumbnail',EVENT_VIDEO_DIMENSIONS_UNREADABLE:'upload.client.video_dimensions_unreadable',EVENT_REPLACE_VIDEO:'upload.client.replace_video',EVENT_STARTED_FLOW:'upload.client.started_flow',EVENT_FINISHED_FLOW:'upload.client.finished_flow',EVENT_FAILED_FLOW:'upload.client.failed_flow',EVENT_CANCELED_FLOW:'upload.client.canceled_flow',EVENT_RESIGNED_FLOW:'upload.client.resigned_flow',EVENT_REQUESTED_UPLOADING:'upload.client.requested_uploading',EVENT_INVALIDATED_UPLOADING:'upload.client.invalidated_uploading',EVENT_STARTED_UPLOADING:'upload.client.started_uploading',EVENT_PROGRESS_UPLOADING_START_REQUEST:'upload.client.progress_uploading_start_request',EVENT_FINISHED_UPLOADING:'upload.client.finished_uploading',EVENT_CANCELED_UPLOADING:'upload.client.canceled_uploading',EVENT_ABANDONED_UPLOADING:'upload.client.abandoned_uploading',EVENT_FAILED_UPLOADING:'upload.client.failed_uploading',EVENT_STARTED_SENDING_BYTES:'upload.client.started_sending_bytes',EVENT_FINISHED_SENDING_BYTES:'upload.client.finished_sending_bytes',EVENT_CANCELED_SENDING_BYTES:'upload.client.canceled_sending_bytes',EVENT_FAILED_SENDING_BYTES:'upload.client.failed_sending_bytes',EVENT_STARTED_START_REQUEST:'upload.client.started_sending_start_request',EVENT_FINISHED_START_REQUEST:'upload.client.finished_sending_start_request',EVENT_FAILED_START_REQUEST:'upload.client.failed_sending_start_request',EVENT_STARTED_POST_REQUEST:'upload.client.started_sending_post_request',EVENT_FINISHED_POST_REQUEST:'upload.client.finished_sending_post_request',EVENT_FAILED_POST_REQUEST:'upload.client.failed_sending_post_request',EVENT_STARTED_SENDING_CHUNK_BYTES:'upload.client.started_sending_chunk_bytes',EVENT_FINISHED_SENDING_CHUNK_BYTES:'upload.client.finished_sending_chunk_bytes',EVENT_CANCELED_SENDING_CHUNK_BYTES:'upload.client.canceled_sending_chunk_bytes',EVENT_FAILED_SENDING_CHUNK_BYTES:'upload.client.failed_sending_chunk_bytes',EVENT_TIMEOUT_SENDING_CHUNK_BYTES:'upload.client.timeout_sending_chunk_bytes',EVENT_RESUMABLE_CALLED:'upload.client.resumable_called',EVENT_RESUMABLE_STARTED:'upload.client.resumable_started',EVENT_RESUMABLE_SUCCESS:'upload.client.resumable_success',EVENT_RESUMABLE_FAILED:'upload.client.resumable_failed',EVENT_ENCODING_START_OBSERVED:'encode.client.encoding_start_observed',EVENT_ENCODING_SUCCESS_OBSERVED:'encode.client.encoding_success_observed',EVENT_ENCODING_FAIL_OBSERVED:'encode.client.encoding_fail_observed',EVENT_RECEIVED_RESPONSE:'upload.client.received_response',EVENT_STARTED_FLOW_EXP1:'upload.client.started_flow_exp1',EVENT_FINISHED_FLOW_EXP1:'upload.client.finished_flow_exp1',EVENT_CANCELED_FLOW_EXP1:'upload.client.canceled_flow_exp1'};Object.assign(h,i);Object.assign(h.prototype,{logEvent:function j(event,k){var l=babelHelpers['extends']({},k);if(l.elapsed_time==null)if(event.indexOf('started')!==-1){this._times[event]=Date.now()}else if(event.indexOf('finished')!==-1){l.elapsed_time=this._computeElapsedTime(event,'finished')}else if(event.indexOf('canceled')!==-1){l.elapsed_time=this._computeElapsedTime(event,'canceled')}else if(event.indexOf('failed')!==-1)l.elapsed_time=this._computeElapsedTime(event,'failed');l.event=event;l.source=this._source;l.waterfall_id=this._waterfallID;l.target_id=this._targetID;l.is_chunked_upload=this._isChunkedUpload;l.actor_id=this._actorID;l.composer_entry_point_ref=this._composerEntryPointRef;l.is_remote_upload=this._isRemoteUpload;l.container_type=this._containerType;c('Banzai').post(h.BANZAI_ROUTE,l,{delay:this._delay,retry:true})},_computeElapsedTime:function j(event,k){var l=event.replace(k,'started'),m=this._times[l];return m?Date.now()-m:null}});f.exports=h}),null);
__d('VideoUploadCrashMonitor',['Bandicoot','VideoUploadLogger'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('Bandicoot'));i=h&&h.prototype;function j(k,l,m,n,o,p,q,r){'use strict';i.constructor.call(this,'VideoUploadSession');this.$VideoUploadCrashMonitor1={waterfallID:k,actorID:l,source:m,targetID:n,loggingDelay:o,supportsChunking:p,composerEntryPointRef:q,flowStarted:r}}j.prototype.flowStarted=function(){'use strict';this.$VideoUploadCrashMonitor1.flowStarted=true};j.prototype.getCrashTimeData=function(){'use strict';return this.$VideoUploadCrashMonitor1};j.prototype.logCrash=function(k,l,m){'use strict';if(!l.waterfallID)return;var n=new (c('VideoUploadLogger'))({actor_id:l.actorID,source:l.source,waterfall_id:l.waterfallID,target_id:l.targetID,delay:l.loggingDelay,is_chunked_upload:l.supportsChunking,composer_entry_point_ref:l.composerEntryPointRef}),o={error:'Crash Detected',error_description:'Detected video upload did not complete due to a crash'};n.logEvent(c('VideoUploadLogger').EVENT_FAILED_UPLOADING,o);if(l.flowStarted)n.logEvent(c('VideoUploadLogger').EVENT_RESIGNED_FLOW,{});};f.exports=j}),null);
__d("ImageExtensions",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({GIF:"gif",JPG:"jpg",PNG:"png",ICO:"ico",BMP:"bmp",WEBP:"webp",BEST:"best",PNG2JPG:"png2jpg",MP4:"mp4"})}),null);
__d("VideoCreatorProductType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LEGACY:0,UNSPECIFIED:1,CORE_VIDEOS:2,LOOPS:3,ANIMATED_GIFS:4,SLIDESHOW:5,PROFILE_VIDEO:6,SPHERICAL:7,LIVE_PHOTO:8,BIRTHDAY_VIDEO:9,STORYLINE:10,FRIENDS_DAY_2016:11,FRIENDVERSARY:12,STORYLINE_WITH_EXTERNAL_MUSIC:13,GOODWILL_VIDEO_BIRTHDAY:14,GOODWILL_VIDEO_ANNIVERSARY:15,GOODWILL_VIDEO_FACEVERSARY:16,GOODWILL_VIDEO_YIR16:17,GOODWILL_VIDEO_FRIENDSDAY17:18,GOODWILL_VIDEO_FRIEND_BIRTHDAY_VIDEO:19,VIDEO_ADS_ICEBERG:20,GOODWILL_VIDEO_TWO_BILLION:21,GOODWILL_VIDEO_RECAP:22,GOODWILL_VIDEO_ANNIVERSARY_V2:23,SPHERICAL_VID_DETECTOR:24,ALOHA_SUPERFRAME:25})}),null);
__d('VideoUploadFile',['fileSlice','ImageExtensions','VideoCreatorProductType','VideoUploadFeatureDetector'],(function a(b,c,d,e,f,g){function h(i,j,k,l){'use strict';this.$VideoUploadFile1=i;this.$VideoUploadFile2=j;this.$VideoUploadFile3=k;this.$VideoUploadFile4=l}h.fromFile=function(i){'use strict';var j=h.getExtensionFromFileName(i.name);return new this(null,i,i.size,j)};h.fromFileInput=function(i){'use strict';var j=null,k=null,l=h.getExtensionFromFileInput(i);if(c('VideoUploadFeatureDetector').supportsFileAPI()&&i.files.length){j=i.files[0];k=j.size}return new this(i,j,k,l)};h.prototype.getFileInput=function(){'use strict';return this.$VideoUploadFile1};h.prototype.getFile=function(){'use strict';return this.$VideoUploadFile2};h.prototype.getSize=function(){'use strict';return this.$VideoUploadFile3};h.prototype.getExtension=function(){'use strict';return this.$VideoUploadFile4};h.prototype.getCreatorProduct=function(){'use strict';if(this.$VideoUploadFile4===c('ImageExtensions').GIF)return c('VideoCreatorProductType').ANIMATED_GIFS;return c('VideoCreatorProductType').CORE_VIDEOS};h.prototype.getChunk=function(i,j){'use strict';return this.$VideoUploadFile2?c('fileSlice').call(this.$VideoUploadFile2,i,j):null};h.getExtensionFromFileInput=function(i){'use strict';return this.getExtensionFromFileName(i.value)};h.getExtensionFromFileName=function(i){'use strict';return i.indexOf('.')!=-1?i.split('.').pop().toLowerCase():''};f.exports=h}),null);
__d('VideoUploadFileValidator',['errorCode','fbt','ErrorDialog','ImageExtensions','Link.react','React','killswitch'],(function a(b,c,d,e,f,g,h,i){var j=[1363019,1363020,1363021,1363022,1363023,1363024,1363025,1363026,1363027,1363030,1363031,1363032,1363033,1363038,1363039,1363040,1363048],k=['VIDEO__INVALID_GUIDE_DATA'];function l(m){'use strict';this.$VideoUploadFileValidator1=m}l.prototype.validate=function(m,n){'use strict';return this.$VideoUploadFileValidator2(m)&&this.$VideoUploadFileValidator3(m)&&this.$VideoUploadFileValidator4(m.getExtension()===c('ImageExtensions').GIF,n)};l.prototype.getValidationErrorMessage=function(m,n){'use strict';return this.$VideoUploadFileValidator5(m)||this.$VideoUploadFileValidator6(m)||this.$VideoUploadFileValidator7(m.getExtension()===c('ImageExtensions').GIF,n)};l.canReplaceVideoForError=function(m){'use strict';if(!m)return true;if(k.indexOf(m)>-1)return false;if(j.indexOf(m)>-1)return true;return false};l.prototype.$VideoUploadFileValidator2=function(m){'use strict';var n=this.$VideoUploadFileValidator5(m);if(n){c('ErrorDialog').show(n.summary,n.description);return false}else return true;};l.prototype.$VideoUploadFileValidator5=function(m){'use strict';if(this.$VideoUploadFileValidator1.extensions[m.getExtension()])return;var n="http://www.facebook.com/help/"+"?faq=218673814818907#What-formats-of-video-files-can-I-upload?",o=c('React').createElement(c('Link.react'),{href:n},i._("recommended formats"));return {summary:i._("Unsupported File Format"),description:i._("Sorry, the file you selected is in a format that we don't support. Please use one of our {link} for video files.",[i.param('link',o)])}};l.prototype.$VideoUploadFileValidator3=function(m){'use strict';var n=this.$VideoUploadFileValidator6(m);if(n){c('ErrorDialog').show(n.summary,n.description);return false}else return true;};l.prototype.$VideoUploadFileValidator6=function(m){'use strict';var n;if(m.getSize()===null)return;if(m.getSize()<this.$VideoUploadFileValidator1.minSize)n=this.$VideoUploadFileValidator8();if(m.getSize()>this.$VideoUploadFileValidator1.maxSize)n=this.$VideoUploadFileValidator9();return n};l.prototype.$VideoUploadFileValidator8=function(){'use strict';var m=Math.round(this.$VideoUploadFileValidator1.minSize/1024);return {summary:i._("Video File Too Small"),description:i._("The video file you tried to upload is too small. The minimum size for a video file is {min-size} KB. Please try again with a larger file.",[i.param('min-size',m)])}};l.prototype.$VideoUploadFileValidator9=function(){'use strict';var m=Math.floor(this.$VideoUploadFileValidator1.maxSize/1024/1024);return {summary:i._("Video File Too Large"),description:i._("The video file you tried to upload is too large. The maximum size for a video file is {max-size} MB. Please try again with a smaller file.",[i.param('max-size',m)])}};l.prototype.$VideoUploadFileValidator4=function(m,n){'use strict';var o=this.$VideoUploadFileValidator7(m,n);if(o){c('ErrorDialog').show(o.summary,o.description);return false}else return true;};l.prototype.$VideoUploadFileValidator7=function(m,n){'use strict';var o;if(!n)return;var p=n.format.duration;if(p>this.$VideoUploadFileValidator1.maxLength)o=this.$VideoUploadFileValidator10();if(p<this.$VideoUploadFileValidator1.minLength&&!m)o=this.$VideoUploadFileValidator11();var q=n.streams.primaryVideo.width,r=n.streams.primaryVideo.height,s=0,t=0;if(n.videoPlayerData!==null){s=n.videoPlayerData.height;t=n.videoPlayerData.width}if(!c('killswitch')('VIDEO_DIMENSIONS_FROM_PLAYER_IN_UPLOAD_DIALOG')&&t!==0&&s!==0){q=t;r=s}if(!n.streams.primaryVideo&&n.streams.primaryAudio)o=this.$VideoUploadFileValidator12();if(q<this.$VideoUploadFileValidator1.minWidth)o=this.$VideoUploadFileValidator13();if(r<this.$VideoUploadFileValidator1.minHeight)o=this.$VideoUploadFileValidator14();var u=q/r;if(this.$VideoUploadFileValidator1.require16to9AspectRatio)if(u>2||u<1.6)o=this.$VideoUploadFileValidator15();if(this.$VideoUploadFileValidator1.minAspectRatio)if(u<this.$VideoUploadFileValidator1.minAspectRatio)o=this.$VideoUploadFileValidator16();if(this.$VideoUploadFileValidator1.maxAspectRatio)if(u>this.$VideoUploadFileValidator1.maxAspectRatio)o=this.$VideoUploadFileValidator17();return o};l.prototype.$VideoUploadFileValidator10=function(){'use strict';if(this.$VideoUploadFileValidator1.source==='profile_video'){return {summary:i._("Profile Video Duration Too Long"),description:i._("The maximum length is {max-length} seconds. Please upload a shorter video.",[i.param('max-length',this.$VideoUploadFileValidator1.maxLength)])}}else return {summary:i._("Video Duration Too Long"),description:i._("The duration of the video you tried to upload is too long. The maximum duration for a video is {max-length} minutes. Please upload a shorter video.",[i.param('max-length',Math.round(this.$VideoUploadFileValidator1.maxLength/60))])};};l.prototype.$VideoUploadFileValidator11=function(){'use strict';return {summary:i._("Video File Too Short"),description:i._({"second":"The duration of the video you tried to upload is too short. The minimum length for a video is {min-length} second. Please upload a longer video.","seconds":"The duration of the video you tried to upload is too short. The minimum length for a video is {min-length} seconds. Please upload a longer video."},[i.param('min-length',this.$VideoUploadFileValidator1.minLength),i['enum'](this.$VideoUploadFileValidator1.minLength===1?'second':'seconds',{second:'second',seconds:'seconds'})])}};l.prototype.$VideoUploadFileValidator12=function(){'use strict';var m="http://www.facebook.com/help/"+"?faq=218673814818907#What-formats-of-video-files-can-I-upload?",n=c('React').createElement(c('Link.react'),{href:m},i._("supported video format"));return {summary:i._("No Video Detected"),description:i._("It looks like you're trying to upload a file that isn't a video. Please try uploading a {supported-video-format link}",[i.param('supported-video-format link',n)])}};l.prototype.$VideoUploadFileValidator13=function(){'use strict';return {summary:i._("Video Width Too Narrow"),description:i._("The width of the video you tried to upload is too short. The minimum width for a video is {min-width}. Please upload a wider video.",[i.param('min-width',this.$VideoUploadFileValidator1.minWidth)])}};l.prototype.$VideoUploadFileValidator15=function(){'use strict';return {summary:i._("Problem Uploading Video"),description:i._("Videos look best when they have a 16:9 aspect ratio. Please edit your video and upload again.")}};l.prototype.$VideoUploadFileValidator14=function(){'use strict';return {summary:i._("Video Height Too Short"),description:i._("The height of the video you tried to upload is too short. The minimum height for a video is {min-height}. Please upload a taller video.",[i.param('min-height',this.$VideoUploadFileValidator1.minHeight)])}};l.prototype.$VideoUploadFileValidator17=function(){'use strict';return {summary:i._("Aspect Ratio Too Big"),description:i._("The video you selected is too wide. Aspect ratios for videos need to be between {max_aspect_ratio} and {min_aspect_ratio}.",[i.param('max_aspect_ratio',this.$VideoUploadFileValidator1.maxAspectRatio+':1'),i.param('min_aspect_ratio',this.$VideoUploadFileValidator1.minAspectRatio+':1')])}};l.prototype.$VideoUploadFileValidator16=function(){'use strict';return {summary:i._("Aspect Ratio Too low"),description:i._("The video you selected is too tall. Aspect ratios for videos need to be between {max_aspect_ratio} and {min_aspect_ratio}.",[i.param('max_aspect_ratio',this.$VideoUploadFileValidator1.maxAspectRatio+':1'),i.param('min_aspect_ratio',this.$VideoUploadFileValidator1.minAspectRatio+':1')])}};f.exports=l}),null);
__d('VideoUploadProgressBar',['cx','CSS','VideoUploadFeatureDetector'],(function a(b,c,d,e,f,g,h){function i(j){'use strict';this.$VideoUploadProgressBar1=j.progress_bar;this.$VideoUploadProgressBar2=j.throbber;this.$VideoUploadProgressBar3=j.uploader;this.$VideoUploadProgressBar4=j.start_margin;this.$VideoUploadProgressBar5=j.start_delay;this.$VideoUploadProgressBar6=j.end_margin;this.$VideoUploadProgressBar7=j.end_delay;this.$VideoUploadProgressBar8=j.progress_bar_label;this.$VideoUploadProgressBar9()}i.prototype.reset=function(){'use strict';this.$VideoUploadProgressBar1.setPosition(0)};i.prototype.getRoot=function(){'use strict';return this.$VideoUploadProgressBar1.getRoot()};i.computeProgress=function(j,k,l,m,n){'use strict';var o=Math.min(j+k,l);return o/l*(100-m-n)+m};i.prototype.$VideoUploadProgressBar9=function(){'use strict';if(c('VideoUploadFeatureDetector').supportsFileAPI()){this.$VideoUploadProgressBar3.subscribe('upload-requested',this.$VideoUploadProgressBar10.bind(this));this.$VideoUploadProgressBar3.subscribe('upload-progressed',this.$VideoUploadProgressBar11.bind(this));this.$VideoUploadProgressBar3.subscribe('online',this.$VideoUploadProgressBar12.bind(this));this.$VideoUploadProgressBar3.subscribe('offline',this.$VideoUploadProgressBar13.bind(this))}else this.$VideoUploadProgressBar3.subscribe('upload-requested',this.$VideoUploadProgressBar14.bind(this));};i.prototype.$VideoUploadProgressBar10=function(event){'use strict';c('CSS').show(this.$VideoUploadProgressBar1.getRoot());c('CSS').removeClass(this.$VideoUploadProgressBar1.getRoot(),"_5r5a");this.$VideoUploadProgressBar1.setTarget(this.$VideoUploadProgressBar4,this.$VideoUploadProgressBar5);this.$VideoUploadProgressBar15(0)};i.prototype.$VideoUploadProgressBar15=function(j){'use strict';if(this.$VideoUploadProgressBar8)this.$VideoUploadProgressBar1.changeLabel(''+j.toFixed(1)+'%');};i.prototype.$VideoUploadProgressBar11=function(event,j){'use strict';c('CSS').removeClass(this.$VideoUploadProgressBar1.getRoot(),"_5r5a");var k=i.computeProgress(j.start_offset,j.sent_bytes,j.file_size,this.$VideoUploadProgressBar4,this.$VideoUploadProgressBar6);this.$VideoUploadProgressBar1.setPosition(k);this.$VideoUploadProgressBar15(k);if(k>=100-this.$VideoUploadProgressBar6){this.$VideoUploadProgressBar1.setTarget(100,this.$VideoUploadProgressBar7);this.$VideoUploadProgressBar15(100)}};i.prototype.$VideoUploadProgressBar12=function(event){'use strict';c('CSS').removeClass(this.$VideoUploadProgressBar1.getRoot(),"_5r5a")};i.prototype.$VideoUploadProgressBar13=function(event){'use strict';c('CSS').addClass(this.$VideoUploadProgressBar1.getRoot(),"_5r5a")};i.prototype.$VideoUploadProgressBar14=function(event){'use strict';c('CSS').show(this.$VideoUploadProgressBar2)};f.exports=i}),null);
__d('VideoUploadRequest',['AsyncRequest','DOM','DTSG','FileForm','Form','PHPQuerySerializer','VideoUploadFeatureDetector','emptyFunction','flattenPHPQueryData','submitForm'],(function a(b,c,d,e,f,g){var h='video';function i(j){'use strict';this.$VideoUploadRequest1=j;this.$VideoUploadRequest2=null;this.$VideoUploadRequest3=false;this.$VideoUploadRequest4=null;this.$VideoUploadRequest5=null;this.$VideoUploadRequest6=null;this.$VideoUploadRequest7=null;this.$VideoUploadRequest8=c('emptyFunction');this.$VideoUploadRequest9=c('emptyFunction');this.$VideoUploadRequest10=c('emptyFunction');this.$VideoUploadRequest11=c('emptyFunction');this.$VideoUploadRequest12=null}i.prototype.setAllowCrossOrigin=function(j){'use strict';this.$VideoUploadRequest3=j;return this};i.prototype.setData=function(j){'use strict';this.$VideoUploadRequest4=j;return this};i.prototype.setWaterfallID=function(j){'use strict';this.$VideoUploadRequest6=j;return this};i.prototype.setSuccessHandler=function(j){'use strict';this.$VideoUploadRequest8=j;return this};i.prototype.setErrorHandler=function(j){'use strict';this.$VideoUploadRequest9=j;return this};i.prototype.setTransportErrorHandler=function(j){'use strict';this.$VideoUploadRequest10=j;return this};i.prototype.setUploadProgressHandler=function(j){'use strict';this.$VideoUploadRequest11=j;return this};i.prototype.setTimeoutHandler=function(j,k){'use strict';this.$VideoUploadRequest7=j;this.$VideoUploadRequest12=k;return this};i.prototype.setThumbnail=function(j){'use strict';this.$VideoUploadRequest13=j;return this};i.prototype.setHandle=function(j){'use strict';this.$VideoUploadRequest5=j;return this};i.prototype.setCaptions=function(j){'use strict';this.$VideoUploadRequest14=j;return this};i.prototype.send=function(){'use strict';if(this.$VideoUploadRequest2)throw new Error('An upload request is already in progress.');if(c('VideoUploadFeatureDetector').supportsXHR()){this.$VideoUploadRequest2=this.$VideoUploadRequest15();if(this.$VideoUploadRequest13||this.$VideoUploadRequest14){var j=new FormData();if(this.$VideoUploadRequest13)j.append('thumb',this.$VideoUploadRequest13);if(this.$VideoUploadRequest14)this.$VideoUploadRequest14.forEach(function(l,m){var n=l.getIsDefault()?'captions_default':'captions_file'+m;j.append(n,l.getFile())});if(this.$VideoUploadRequest4){var k=c('flattenPHPQueryData')(this.$VideoUploadRequest4);Object.keys(k).forEach(function(l){j.append(l,k[l])})}this.$VideoUploadRequest2.setRawData(j)}this.$VideoUploadRequest2.send()}else{this.$VideoUploadRequest2=this.$VideoUploadRequest16();this.$VideoUploadRequest17(this.$VideoUploadRequest2)}};i.prototype.sendChunk=function(j){'use strict';if(this.$VideoUploadRequest2)throw new Error('An upload request is already in progress.');var k=new FormData();if(this.$VideoUploadRequest5){k.append('fbuploader_video_file_chunk',this.$VideoUploadRequest5)}else k.append('video_file_chunk',j);this.$VideoUploadRequest2=this.$VideoUploadRequest15();this.$VideoUploadRequest2.setRawData(k);this.$VideoUploadRequest2.send()};i.prototype.sendFile=function(j){'use strict';if(this.$VideoUploadRequest2)throw new Error('An upload request is already in progress.');this.$VideoUploadRequest2=this.$VideoUploadRequest16();var k=j.cloneNode(false);j.name=h;c('DOM').replace(j,k);c('DOM').appendContent(this.$VideoUploadRequest2.getRoot(),j);this.$VideoUploadRequest17(this.$VideoUploadRequest2);j.name=k.name;c('DOM').replace(k,j)};i.prototype.abort=function(){'use strict';if(!this.$VideoUploadRequest2)return;this.$VideoUploadRequest2.abort();this.$VideoUploadRequest2=null};i.prototype.$VideoUploadRequest15=function(){'use strict';var j=this.__getAsyncRequest().setAllowCrossOrigin(this.$VideoUploadRequest3).setURI(this.$VideoUploadRequest1).setData(this.$VideoUploadRequest4).setRequestHeader('X_FB_VIDEO_WATERFALL_ID',this.$VideoUploadRequest6).setHandler(this.$VideoUploadRequest8).setErrorHandler(this.$VideoUploadRequest9).setTransportErrorHandler(this.$VideoUploadRequest10).setUploadProgressHandler(this.$VideoUploadRequest11);if(this.$VideoUploadRequest12)j.setTimeoutHandler(this.$VideoUploadRequest7,this.$VideoUploadRequest12);return j};i.prototype.__getAsyncRequest=function(){'use strict';return new (c('AsyncRequest'))()};i.prototype.$VideoUploadRequest16=function(){'use strict';var j=c('DOM').create('form',{action:this.$VideoUploadRequest1,method:'POST'});c('Form').createHiddenInputs(babelHelpers['extends']({fb_dtsg:c('DTSG').getToken()},this.$VideoUploadRequest4),j);var k=new (c('FileForm'))(j,null,{allowCrossOrigin:this.$VideoUploadRequest3});k.subscribe('success',this.$VideoUploadRequest18.bind(this));k.subscribe('failure',this.$VideoUploadRequest19.bind(this));k.subscribe('progress',this.$VideoUploadRequest20.bind(this));return k};i.prototype.$VideoUploadRequest17=function(j){'use strict';c('DOM').appendContent(document.body,j.getRoot());c('submitForm')(j.getRoot())};i.prototype.$VideoUploadRequest18=function(event,j){'use strict';this.$VideoUploadRequest8(j.response)};i.prototype.$VideoUploadRequest19=function(event,j){'use strict';this.$VideoUploadRequest9(j.response)};i.prototype.$VideoUploadRequest20=function(event,j){'use strict';this.$VideoUploadRequest11(j.event)};f.exports=i}),null);
__d("VideoUploadRequestContext",[],(function a(b,c,d,e,f,g){function h(){"use strict";this.reset()}h.prototype.setFile=function(i){"use strict";this.$VideoUploadRequestContext1=i;return this};h.prototype.getFile=function(){"use strict";return this.$VideoUploadRequestContext1};h.prototype.setMetadata=function(i){"use strict";this.$VideoUploadRequestContext2=i;return this};h.prototype.getMetadata=function(){"use strict";return this.$VideoUploadRequestContext2};h.prototype.setVideoID=function(i){"use strict";this.$VideoUploadRequestContext3=i;return this};h.prototype.getVideoID=function(){"use strict";return this.$VideoUploadRequestContext3};h.prototype.setStartOffset=function(i){"use strict";this.$VideoUploadRequestContext4=i;return this};h.prototype.getStartOffset=function(){"use strict";return this.$VideoUploadRequestContext4};h.prototype.setEndOffset=function(i){"use strict";this.$VideoUploadRequestContext5=i;return this};h.prototype.getEndOffset=function(){"use strict";return this.$VideoUploadRequestContext5};h.prototype.setPartitionStartOffset=function(i){"use strict";this.$VideoUploadRequestContext6=i;return this};h.prototype.getPartitionStartOffset=function(){"use strict";return this.$VideoUploadRequestContext6};h.prototype.setPartitionEndOffset=function(i){"use strict";this.$VideoUploadRequestContext7=i;return this};h.prototype.getPartitionEndOffset=function(){"use strict";return this.$VideoUploadRequestContext7};h.prototype.setTargetID=function(i){"use strict";this.$VideoUploadRequestContext8=i;return this};h.prototype.getTargetID=function(){"use strict";return this.$VideoUploadRequestContext8};h.prototype.setSource=function(i){"use strict";this.$VideoUploadRequestContext9=i;return this};h.prototype.getSource=function(){"use strict";return this.$VideoUploadRequestContext9};h.prototype.setWaterfallID=function(i){"use strict";this.$VideoUploadRequestContext10=i;return this};h.prototype.getWaterfallID=function(){"use strict";return this.$VideoUploadRequestContext10};h.prototype.setComposerEntryPointRef=function(i){"use strict";this.$VideoUploadRequestContext11=i};h.prototype.getComposerEntryPointRef=function(){"use strict";return this.$VideoUploadRequestContext11};h.prototype.setSupportsChunking=function(i){"use strict";this.$VideoUploadRequestContext12=i;return this};h.prototype.getSupportsChunking=function(){"use strict";return this.$VideoUploadRequestContext12};h.prototype.setSupportsFileAPI=function(i){"use strict";this.$VideoUploadRequestContext13=i;return this};h.prototype.getSupportsFileAPI=function(){"use strict";return this.$VideoUploadRequestContext13};h.prototype.setCreatorProduct=function(i){"use strict";this.$VideoUploadRequestContext14=i;return this};h.prototype.getCreatorProduct=function(){"use strict";return this.$VideoUploadRequestContext14};h.prototype.setLastKnownUploadSpeed=function(i){"use strict";this.$VideoUploadRequestContext15=i};h.prototype.getLastKnownUploadSpeed=function(){"use strict";return this.$VideoUploadRequestContext15||0};h.prototype.setUseParallelChunks=function(i){"use strict";this.$VideoUploadRequestContext16=i};h.prototype.getUseParallelChunks=function(){"use strict";return this.$VideoUploadRequestContext16};h.prototype.setIsSphericalVideo=function(i){"use strict";this.$VideoUploadRequestContext17=i};h.prototype.getIsSphericalVideo=function(){"use strict";return this.$VideoUploadRequestContext17};h.prototype.setSphericalMetadata=function(i){"use strict";this.$VideoUploadRequestContext18=i};h.prototype.getSphericalMetadata=function(){"use strict";return this.$VideoUploadRequestContext18};h.prototype.setEnableOmnistab=function(i){"use strict";this.$VideoUploadRequestContext19=i};h.prototype.getEnableOmnistab=function(){"use strict";return this.$VideoUploadRequestContext19};h.prototype.reset=function(){"use strict";this.$VideoUploadRequestContext1=null;this.$VideoUploadRequestContext3=null;this.$VideoUploadRequestContext4=null;this.$VideoUploadRequestContext5=null;this.$VideoUploadRequestContext8=null;this.$VideoUploadRequestContext9=null;this.$VideoUploadRequestContext10=null;this.$VideoUploadRequestContext11=null;this.$VideoUploadRequestContext12=null;this.$VideoUploadRequestContext13=null;this.$VideoUploadRequestContext6=null;this.$VideoUploadRequestContext7=null;this.$VideoUploadRequestContext14=null;this.$VideoUploadRequestContext15=0;this.$VideoUploadRequestContext16=false;this.$VideoUploadRequestContext17=false;this.$VideoUploadRequestContext2={};this.$VideoUploadRequestContext18={};this.$VideoUploadRequestContext19=false};f.exports=h}),null);
__d('VideoUploadPostRequestManager',['ArbiterMixin','VideoUploadRequest','mixin'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k,l,m,n,o){'use strict';i.constructor.call(this);this.$VideoUploadPostRequestManager1=k;this.$VideoUploadPostRequestManager2=l;this.$VideoUploadPostRequestManager3=m;this.$VideoUploadPostRequestManager4=0;this.$VideoUploadPostRequestManager5=n;this.$VideoUploadPostRequestManager6=o;this.$VideoUploadPostRequestManager7=0}j.prototype.getRequest=function(){'use strict';return this.$VideoUploadPostRequestManager8};j.prototype.sendRequest=function(k){'use strict';if(this.$VideoUploadPostRequestManager8)return;this.$VideoUploadPostRequestManager9=babelHelpers['extends']({},k.getMetadata(),this.__createRequestData(k));this.$VideoUploadPostRequestManager10=this.$VideoUploadPostRequestManager9.thumb;delete this.$VideoUploadPostRequestManager9.thumb;this.$VideoUploadPostRequestManager11=this.$VideoUploadPostRequestManager9.captions;delete this.$VideoUploadPostRequestManager9.captions;this.$VideoUploadPostRequestManager12=k.getWaterfallID();this.$VideoUploadPostRequestManager13();this.inform('request-started')};j.prototype.$VideoUploadPostRequestManager13=function(){'use strict';clearTimeout(this.$VideoUploadPostRequestManager14);this.$VideoUploadPostRequestManager14=null;this.$VideoUploadPostRequestManager8=this.__getVideoUploadRequest(this.$VideoUploadPostRequestManager1).setAllowCrossOrigin(true).setData(this.$VideoUploadPostRequestManager9).setThumbnail(this.$VideoUploadPostRequestManager10).setCaptions(this.$VideoUploadPostRequestManager11).setWaterfallID(this.$VideoUploadPostRequestManager12).setSuccessHandler(this.$VideoUploadPostRequestManager15.bind(this)).setErrorHandler(this.$VideoUploadPostRequestManager16.bind(this)).setTransportErrorHandler(this.$VideoUploadPostRequestManager17.bind(this));this.$VideoUploadPostRequestManager8.send()};j.prototype.__createRequestData=function(k){'use strict';return {video_id:k.getVideoID(),target_id:k.getTargetID(),source:k.getSource(),waterfall_id:k.getWaterfallID(),creator_product:k.getCreatorProduct(),composer_entry_point_ref:k.getComposerEntryPointRef&&k.getComposerEntryPointRef(),supports_chunking:k.getSupportsChunking()}};j.prototype.__getVideoUploadRequest=function(k){'use strict';return new (c('VideoUploadRequest'))(k)};j.prototype.clearRequest=function(){'use strict';this.$VideoUploadPostRequestManager8=null;this.$VideoUploadPostRequestManager7=0;this.$VideoUploadPostRequestManager4=0};j.prototype.isInProgress=function(){'use strict';return !!this.$VideoUploadPostRequestManager8};j.prototype.$VideoUploadPostRequestManager18=function(k){'use strict';clearTimeout(this.$VideoUploadPostRequestManager14);this.$VideoUploadPostRequestManager14=setTimeout(this.$VideoUploadPostRequestManager13.bind(this),k)};j.prototype.$VideoUploadPostRequestManager19=function(k,l){'use strict';return Math.pow(k,l)*1000};j.prototype.$VideoUploadPostRequestManager15=function(k){'use strict';var l=k.getPayload();this.inform('request-finished',{video_id:l.video_id,video_asset_id:l.video_asset_id,container_type:l.container_type,transport_retries:this.$VideoUploadPostRequestManager4,server_retries:this.$VideoUploadPostRequestManager7});this.clearRequest()};j.prototype.$VideoUploadPostRequestManager20=function(k){'use strict';this.inform('request-failed',{error_code:k.getError(),error_description:k.getErrorDescription(),error_summary:k.getErrorSummary(),transport_retries:this.$VideoUploadPostRequestManager4,server_retries:this.$VideoUploadPostRequestManager7,error_is_transient:k.isTransient()});this.clearRequest()};j.prototype.$VideoUploadPostRequestManager16=function(k){'use strict';this.$VideoUploadPostRequestManager8=null;this.$VideoUploadPostRequestManager4=0;if(k.isTransient()&&this.$VideoUploadPostRequestManager7<this.$VideoUploadPostRequestManager5){this.$VideoUploadPostRequestManager7++;this.$VideoUploadPostRequestManager18(this.$VideoUploadPostRequestManager19(this.$VideoUploadPostRequestManager6,this.$VideoUploadPostRequestManager7))}else this.$VideoUploadPostRequestManager20(k);};j.prototype.$VideoUploadPostRequestManager17=function(k){'use strict';if(this.$VideoUploadPostRequestManager2===0||this.$VideoUploadPostRequestManager4>=this.$VideoUploadPostRequestManager2){this.$VideoUploadPostRequestManager20(k)}else{this.$VideoUploadPostRequestManager4++;this.$VideoUploadPostRequestManager8=null;this.$VideoUploadPostRequestManager18(this.$VideoUploadPostRequestManager19(this.$VideoUploadPostRequestManager3,this.$VideoUploadPostRequestManager4))}};f.exports=j}),null);
__d('VideoUploadConnectionMonitor',['ArbiterMixin','Network','VideoUploadFeatureDetector','debounce','mixin'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(){'use strict';i.constructor.call(this);this.$VideoUploadConnectionMonitor1=false;this.$VideoUploadConnectionMonitor2=[];this.$VideoUploadConnectionMonitor3=false;this.$VideoUploadConnectionMonitor4=true;this.$VideoUploadConnectionMonitor5=c('debounce')(function(){this.$VideoUploadConnectionMonitor6(false)}.bind(this),2000)}j.prototype.notifyStart=function(){'use strict';if(this.$VideoUploadConnectionMonitor3)return;if(this.$VideoUploadConnectionMonitor2.length===0){this.$VideoUploadConnectionMonitor2.push(c('Network').addListener('online',function(){this.$VideoUploadConnectionMonitor6(true)}.bind(this)));this.$VideoUploadConnectionMonitor2.push(c('Network').addListener('offline',function(){if(this.$VideoUploadConnectionMonitor1){this.$VideoUploadConnectionMonitor5()}else{this.$VideoUploadConnectionMonitor5.reset();setTimeout(this.$VideoUploadConnectionMonitor5,2000)}}.bind(this)))}this.$VideoUploadConnectionMonitor3=true};j.prototype.notifyProgress=function(event){'use strict';if(!this.$VideoUploadConnectionMonitor3)return;if(!event)return;if(c('VideoUploadFeatureDetector').supportsFullProgress()){this.$VideoUploadConnectionMonitor1=true;if(event.total&&event.loaded===event.total){this.$VideoUploadConnectionMonitor5.reset()}else this.$VideoUploadConnectionMonitor5();}};j.prototype.notifySuccess=function(){'use strict';if(!this.$VideoUploadConnectionMonitor3)return;this.reset();this.$VideoUploadConnectionMonitor6(true)};j.prototype.notifyTransportError=function(){'use strict';if(!this.$VideoUploadConnectionMonitor3)return;this.$VideoUploadConnectionMonitor3=false;this.$VideoUploadConnectionMonitor6(false)};j.prototype.notifyError=function(){'use strict';if(!this.$VideoUploadConnectionMonitor3)return;this.reset();this.$VideoUploadConnectionMonitor6(true)};j.prototype.isOnline=function(){'use strict';return this.$VideoUploadConnectionMonitor4};j.prototype.reset=function(){'use strict';while(this.$VideoUploadConnectionMonitor2.length)this.$VideoUploadConnectionMonitor2.pop().remove();this.$VideoUploadConnectionMonitor5.reset();this.$VideoUploadConnectionMonitor3=false};j.prototype.$VideoUploadConnectionMonitor6=function(k){'use strict';this.$VideoUploadConnectionMonitor5.reset();if(this.$VideoUploadConnectionMonitor4!==k){this.$VideoUploadConnectionMonitor4=k;if(this.$VideoUploadConnectionMonitor4){this.inform('online')}else this.inform('offline');}};f.exports=j}),null);
__d('VideoUploadReceiveRequestManager',['fbt','ArbiterMixin','VideoUploadConnectionMonitor','VideoUploadRequest','ResumableUploadService','ResumableUploadServiceState.enum','md5','mixin'],(function a(b,c,d,e,f,g,h){var i,j,k=1363037;i=babelHelpers.inherits(l,c('mixin')(c('ArbiterMixin')));j=i&&i.prototype;function l(m,n,o,p,q,r,s,t,u){var v=arguments.length<=9||arguments[9]===undefined?'':arguments[9],w=arguments.length<=10||arguments[10]===undefined?false:arguments[10];'use strict';j.constructor.call(this);this.$VideoUploadReceiveRequestManager1=m;this.$VideoUploadReceiveRequestManager2=n;this.$VideoUploadReceiveRequestManager3=o;this.$VideoUploadReceiveRequestManager4=p;this.$VideoUploadReceiveRequestManager5=q;this.$VideoUploadReceiveRequestManager6=r;this.$VideoUploadReceiveRequestManager7=s;this.$VideoUploadReceiveRequestManager8=t;this.$VideoUploadReceiveRequestManager9=u;this.$VideoUploadReceiveRequestManager10=0;this.$VideoUploadReceiveRequestManager11=0;this.$VideoUploadReceiveRequestManager12=0;this.$VideoUploadReceiveRequestManager13=null;this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager15=0;this.$VideoUploadReceiveRequestManager16='constructed';this.$VideoUploadReceiveRequestManager17=null;this.$VideoUploadReceiveRequestManager18=v;this.$VideoUploadReceiveRequestManager19=w;this.$VideoUploadReceiveRequestManager20=new (c('VideoUploadConnectionMonitor'))();this.$VideoUploadReceiveRequestManager20.subscribe('online',this.$VideoUploadReceiveRequestManager21.bind(this));this.$VideoUploadReceiveRequestManager20.subscribe('offline',this.$VideoUploadReceiveRequestManager22.bind(this))}l.prototype.sendRequest=function(m){'use strict';this.$VideoUploadReceiveRequestManager16='sending request';if(this.$VideoUploadReceiveRequestManager23){this.$VideoUploadReceiveRequestManager16='request already in progress';return}this.$VideoUploadReceiveRequestManager15=m.getEndOffset()-m.getStartOffset();this.$VideoUploadReceiveRequestManager24=m;this.$VideoUploadReceiveRequestManager25()};l.prototype.cancelRequest=function(){'use strict';if(!this.$VideoUploadReceiveRequestManager23)return;this.$VideoUploadReceiveRequestManager23.abort();if(this.$VideoUploadReceiveRequestManager17!==null)this.$VideoUploadReceiveRequestManager17.cancel();this.$VideoUploadReceiveRequestManager26()};l.prototype.appendStateLogData=function(m,n){'use strict';m[n+'request_manager_state']=this.$VideoUploadReceiveRequestManager16;m[n+'upload_speed']=this.$VideoUploadReceiveRequestManager14;m[n+'transport_retries']=this.$VideoUploadReceiveRequestManager10;m[n+'server_retries']=this.$VideoUploadReceiveRequestManager11;m[n+'timeout_retries']=this.$VideoUploadReceiveRequestManager12;m[n+'last_timeout_value']=this.$VideoUploadReceiveRequestManager27;m[n+'last_request_start_time']=this.$VideoUploadReceiveRequestManager13;m[n+'pending_request']=this.$VideoUploadReceiveRequestManager23!=null;m[n+'pending_timer']=this.$VideoUploadReceiveRequestManager28!=null;m[n+'cached_chunk']=this.$VideoUploadReceiveRequestManager29!=null;if(this.$VideoUploadReceiveRequestManager24!=null){m[n+'start_offset']=this.$VideoUploadReceiveRequestManager24.getStartOffset();m[n+'end_offset']=this.$VideoUploadReceiveRequestManager24.getEndOffset();m[n+'partition_start_offset']=this.$VideoUploadReceiveRequestManager24.getPartitionStartOffset();m[n+'partition_end_offset']=this.$VideoUploadReceiveRequestManager24.getPartitionEndOffset()}if(this.$VideoUploadReceiveRequestManager20!=null)m[n+'connection_monitor_online']=this.$VideoUploadReceiveRequestManager20.isOnline();};l.prototype.$VideoUploadReceiveRequestManager26=function(){'use strict';this.$VideoUploadReceiveRequestManager23=null;this.$VideoUploadReceiveRequestManager29=null;this.$VideoUploadReceiveRequestManager10=0;this.$VideoUploadReceiveRequestManager11=0;this.$VideoUploadReceiveRequestManager12=0;this.$VideoUploadReceiveRequestManager13=null;this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager15=0;this.$VideoUploadReceiveRequestManager24.reset();this.$VideoUploadReceiveRequestManager20.reset();clearTimeout(this.$VideoUploadReceiveRequestManager28);this.$VideoUploadReceiveRequestManager28=null};l.prototype.$VideoUploadReceiveRequestManager25=function(m){'use strict';clearTimeout(this.$VideoUploadReceiveRequestManager28);this.$VideoUploadReceiveRequestManager28=null;if(this.$VideoUploadReceiveRequestManager24.getSupportsChunking()&&this.$VideoUploadReceiveRequestManager24.getStartOffset()>=this.$VideoUploadReceiveRequestManager24.getPartitionEndOffset()){if(!m){this.inform('request-finished',{start_offset:this.$VideoUploadReceiveRequestManager24.getEndOffset()-1,end_offset:this.$VideoUploadReceiveRequestManager24.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager10,server_retries:this.$VideoUploadReceiveRequestManager11,upload_speed:this.$VideoUploadReceiveRequestManager14,request_manager_state:this.$VideoUploadReceiveRequestManager16});this.$VideoUploadReceiveRequestManager16='request finished - notified'}else this.$VideoUploadReceiveRequestManager16='request finished - not notified';return}this.$VideoUploadReceiveRequestManager23=this.__getVideoUploadRequest(this.$VideoUploadReceiveRequestManager1).setAllowCrossOrigin(true).setData(this.__createRequestData(this.$VideoUploadReceiveRequestManager24)).setWaterfallID(this.$VideoUploadReceiveRequestManager24.getWaterfallID()).setSuccessHandler(this.__handleSuccessResponse.bind(this)).setErrorHandler(this.__handleServerFailureResponse.bind(this)).setTransportErrorHandler(this.$VideoUploadReceiveRequestManager30.bind(this));if(!this.$VideoUploadReceiveRequestManager19)this.$VideoUploadReceiveRequestManager23.setUploadProgressHandler(this.$VideoUploadReceiveRequestManager31.bind(this));this.$VideoUploadReceiveRequestManager13=Date.now();if(this.$VideoUploadReceiveRequestManager24.getSupportsChunking()){if(this.$VideoUploadReceiveRequestManager4){var n=this.$VideoUploadReceiveRequestManager32(this.$VideoUploadReceiveRequestManager24.getEndOffset()-this.$VideoUploadReceiveRequestManager24.getStartOffset(),this.$VideoUploadReceiveRequestManager14);this.$VideoUploadReceiveRequestManager23.setTimeoutHandler(n,this.__handleResponseTimeout.bind(this));this.$VideoUploadReceiveRequestManager16='sending chunk with timeout = '+n;this.$VideoUploadReceiveRequestManager27=n}else this.$VideoUploadReceiveRequestManager16='sending chunk without timeout';var o=this.$VideoUploadReceiveRequestManager33();if(this.$VideoUploadReceiveRequestManager19){this.$VideoUploadReceiveRequestManager34(o)}else this.$VideoUploadReceiveRequestManager23.sendChunk(o);}else{this.$VideoUploadReceiveRequestManager16='sending file';this.$VideoUploadReceiveRequestManager23.sendFile(this.$VideoUploadReceiveRequestManager24.getFile().getFileInput())}this.$VideoUploadReceiveRequestManager20.notifyStart();this.inform('request-started',{start_offset:this.$VideoUploadReceiveRequestManager24.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager24.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager10,server_retries:this.$VideoUploadReceiveRequestManager11,upload_speed:this.$VideoUploadReceiveRequestManager14,request_manager_state:this.$VideoUploadReceiveRequestManager16})};l.prototype.$VideoUploadReceiveRequestManager34=function(m){'use strict';var n=this.$VideoUploadReceiveRequestManager24.getFile(),o=c('md5')(n.getFile().lastModified+n.getFile().name+n.getFile().type+this.$VideoUploadReceiveRequestManager24.getWaterfallID())+'-'+this.$VideoUploadReceiveRequestManager24.getStartOffset()+'-'+this.$VideoUploadReceiveRequestManager24.getEndOffset();this.$VideoUploadReceiveRequestManager17=new (c('ResumableUploadService'))('fb_video',this.$VideoUploadReceiveRequestManager18,o,null,null);this.$VideoUploadReceiveRequestManager35();this.$VideoUploadReceiveRequestManager17.resume(m);this.inform('resumable-called')};l.prototype.$VideoUploadReceiveRequestManager35=function(){'use strict';this.$VideoUploadReceiveRequestManager17.addListener(c('ResumableUploadServiceState.enum').START,function(m){this.inform('resumable-started',{resume_from_offset:m.offset})}.bind(this));this.$VideoUploadReceiveRequestManager17.addListener(c('ResumableUploadServiceState.enum').FAIL,function(m){this.inform('resumable-failed',{error_code:m.getError(),error_description:m.getErrorDescription(),error_summary:m.getErrorSummary(),error_is_transient:m.isTransient()});this.__handleServerFailureResponse(m)}.bind(this));this.$VideoUploadReceiveRequestManager17.addListener(c('ResumableUploadServiceState.enum').SUCCESS,function(m){this.$VideoUploadReceiveRequestManager23.setHandle(m);this.$VideoUploadReceiveRequestManager23.sendChunk(null);this.inform('resumable-success',{everstore_handle:m})}.bind(this));this.$VideoUploadReceiveRequestManager17.addListener(c('ResumableUploadServiceState.enum').TRANSPORT_FAILURE,function(m){this.inform('resumable-failed',{error_code:m.getError(),error_description:m.getErrorDescription(),error_summary:m.getErrorSummary(),error_is_transient:m.isTransient()});this.$VideoUploadReceiveRequestManager30(m)}.bind(this));this.$VideoUploadReceiveRequestManager17.addListener(c('ResumableUploadServiceState.enum').PROGRESS,function(event){this.$VideoUploadReceiveRequestManager31(event)}.bind(this))};l.prototype.__getVideoUploadRequest=function(m){'use strict';return new (c('VideoUploadRequest'))(m)};l.prototype.$VideoUploadReceiveRequestManager36=function(m){'use strict';this.$VideoUploadReceiveRequestManager16='setting request to send after'+m;clearTimeout(this.$VideoUploadReceiveRequestManager28);this.$VideoUploadReceiveRequestManager28=setTimeout(this.$VideoUploadReceiveRequestManager25.bind(this),m)};l.prototype.$VideoUploadReceiveRequestManager33=function(){'use strict';if(this.$VideoUploadReceiveRequestManager29)return this.$VideoUploadReceiveRequestManager29;if(this.$VideoUploadReceiveRequestManager19){this.$VideoUploadReceiveRequestManager29=this.$VideoUploadReceiveRequestManager24.getFile().getFile().slice(this.$VideoUploadReceiveRequestManager24.getStartOffset(),this.$VideoUploadReceiveRequestManager24.getEndOffset(),'application/octet-stream')}else this.$VideoUploadReceiveRequestManager29=this.$VideoUploadReceiveRequestManager24.getFile().getChunk(this.$VideoUploadReceiveRequestManager24.getStartOffset(),this.$VideoUploadReceiveRequestManager24.getEndOffset());return this.$VideoUploadReceiveRequestManager29};l.prototype.__createRequestData=function(m){'use strict';return {video_id:m.getVideoID(),start_offset:m.getStartOffset(),end_offset:m.getEndOffset(),source:m.getSource(),target_id:m.getTargetID(),waterfall_id:m.getWaterfallID(),composer_entry_point_ref:m.getComposerEntryPointRef&&m.getComposerEntryPointRef(),supports_chunking:m.getSupportsChunking(),upload_speed:this.$VideoUploadReceiveRequestManager14,partition_start_offset:m.getPartitionStartOffset(),partition_end_offset:m.getPartitionEndOffset()}};l.prototype.__handleSuccessResponse=function(m){'use strict';this.$VideoUploadReceiveRequestManager16='success response received';var n=Date.now()-this.$VideoUploadReceiveRequestManager13;n=n===0?1:n;var o=m.getPayload();if(o.start_offset===this.$VideoUploadReceiveRequestManager24.getEndOffset()){var p=this.$VideoUploadReceiveRequestManager24.getEndOffset()-this.$VideoUploadReceiveRequestManager24.getStartOffset();this.$VideoUploadReceiveRequestManager14=Math.floor(p/n)}else this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager20.notifySuccess();this.inform('request-finished',{start_offset:this.$VideoUploadReceiveRequestManager24.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager24.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager10,server_retries:this.$VideoUploadReceiveRequestManager11,upload_speed:this.$VideoUploadReceiveRequestManager14,request_manager_state:this.$VideoUploadReceiveRequestManager16});this.$VideoUploadReceiveRequestManager24.setStartOffset(o.start_offset);this.$VideoUploadReceiveRequestManager24.setEndOffset(o.end_offset);this.$VideoUploadReceiveRequestManager24.setLastKnownUploadSpeed(this.$VideoUploadReceiveRequestManager14);this.$VideoUploadReceiveRequestManager23=null;this.$VideoUploadReceiveRequestManager29=null;this.$VideoUploadReceiveRequestManager10=0;this.$VideoUploadReceiveRequestManager11=0;this.$VideoUploadReceiveRequestManager12=0;if(this.$VideoUploadReceiveRequestManager24.getSupportsChunking())this.$VideoUploadReceiveRequestManager25(true);};l.prototype.__handleServerFailureResponse=function(m){'use strict';this.$VideoUploadReceiveRequestManager16='failure response received';this.$VideoUploadReceiveRequestManager23=null;this.$VideoUploadReceiveRequestManager10=0;this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager12=0;this.$VideoUploadReceiveRequestManager20.notifyError();if(this.__hasInvalidStartOffsetAndHasRetries(m.getError())){this.$VideoUploadReceiveRequestManager11++;var n=m.getPayload();this.$VideoUploadReceiveRequestManager16='invalid offset response received start='+n.start_offset+' end='+n.end_offset;if(this.$VideoUploadReceiveRequestManager24.getStartOffset()!=n.start_offset||this.$VideoUploadReceiveRequestManager24.getEndOffset()!=n.end_offset){this.$VideoUploadReceiveRequestManager24.setStartOffset(n.start_offset);this.$VideoUploadReceiveRequestManager24.setEndOffset(n.end_offset);this.$VideoUploadReceiveRequestManager29=null}this.$VideoUploadReceiveRequestManager25()}else if((m.isTransient()||this.$VideoUploadReceiveRequestManager9)&&this.$VideoUploadReceiveRequestManager11<this.$VideoUploadReceiveRequestManager3){this.$VideoUploadReceiveRequestManager16='transient server error';this.$VideoUploadReceiveRequestManager11++;this.$VideoUploadReceiveRequestManager36(this.$VideoUploadReceiveRequestManager37(this.$VideoUploadReceiveRequestManager8,this.$VideoUploadReceiveRequestManager11))}else this.$VideoUploadReceiveRequestManager38(m);};l.prototype.__handleResponseTimeout=function(m){'use strict';this.inform('request-timeout',{start_offset:this.$VideoUploadReceiveRequestManager24.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager24.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager10,server_retries:this.$VideoUploadReceiveRequestManager11,timeout_retries:this.$VideoUploadReceiveRequestManager12,upload_speed:this.$VideoUploadReceiveRequestManager14,request_manager_state:this.$VideoUploadReceiveRequestManager16});this.$VideoUploadReceiveRequestManager23.abort();this.$VideoUploadReceiveRequestManager23=null;this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager20.notifyTransportError();if(++this.$VideoUploadReceiveRequestManager12<=this.$VideoUploadReceiveRequestManager5){var n=this.$VideoUploadReceiveRequestManager24.getEndOffset()-this.$VideoUploadReceiveRequestManager24.getStartOffset();n=Math.floor(n/2);n=Math.max(n,this.$VideoUploadReceiveRequestManager15);var o=this.$VideoUploadReceiveRequestManager24.getEndOffset();o=Math.min(o,this.$VideoUploadReceiveRequestManager24.getStartOffset()+n);this.$VideoUploadReceiveRequestManager24.setEndOffset(o);this.$VideoUploadReceiveRequestManager29=null;this.$VideoUploadReceiveRequestManager16='resending after timeout with chunksize='+n;this.$VideoUploadReceiveRequestManager25()}else this.$VideoUploadReceiveRequestManager39({error_code:1006,error_description:h._("Your browser appears to be offline. Please check your internet connection and try again."),error_summary:h._("No Network Connection"),error_is_transient:true});};l.prototype.__hasInvalidStartOffsetAndHasRetries=function(m){'use strict';return m===k&&this.$VideoUploadReceiveRequestManager11<this.$VideoUploadReceiveRequestManager3};l.prototype.$VideoUploadReceiveRequestManager30=function(m){'use strict';this.$VideoUploadReceiveRequestManager20.notifyTransportError();this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager12=0;if(this.$VideoUploadReceiveRequestManager10<this.$VideoUploadReceiveRequestManager2){this.$VideoUploadReceiveRequestManager16='resending after transport failure';this.$VideoUploadReceiveRequestManager10++;this.$VideoUploadReceiveRequestManager23=null;this.$VideoUploadReceiveRequestManager36(this.$VideoUploadReceiveRequestManager37(this.$VideoUploadReceiveRequestManager7,this.$VideoUploadReceiveRequestManager10))}else this.$VideoUploadReceiveRequestManager38(m);};l.prototype.$VideoUploadReceiveRequestManager38=function(m){'use strict';this.$VideoUploadReceiveRequestManager39({error_code:m.getError(),error_description:m.getErrorDescription(),error_summary:m.getErrorSummary(),error_is_transient:m.isTransient()})};l.prototype.$VideoUploadReceiveRequestManager39=function(m){'use strict';this.$VideoUploadReceiveRequestManager16='handling failure error';this.inform('request-failed',m);this.$VideoUploadReceiveRequestManager26()};l.prototype.$VideoUploadReceiveRequestManager31=function(event){'use strict';this.$VideoUploadReceiveRequestManager20.notifyProgress(event);this.inform('request-progressed',{file_size:this.$VideoUploadReceiveRequestManager24.getFile().getSize(),start_offset:this.$VideoUploadReceiveRequestManager24.getStartOffset(),sent_bytes:event.loaded,transport_retries:this.$VideoUploadReceiveRequestManager10})};l.prototype.$VideoUploadReceiveRequestManager21=function(event){'use strict';this.inform('online');this.$VideoUploadReceiveRequestManager10=0;this.$VideoUploadReceiveRequestManager12=0;if(this.$VideoUploadReceiveRequestManager28)this.$VideoUploadReceiveRequestManager25();};l.prototype.$VideoUploadReceiveRequestManager22=function(event){'use strict';this.inform('offline')};l.prototype.$VideoUploadReceiveRequestManager37=function(m,n){'use strict';if(this.$VideoUploadReceiveRequestManager19)return Math.min(Math.pow(m,n),8)*1000;return Math.pow(m,n)*1000};l.prototype.$VideoUploadReceiveRequestManager32=function(m,n){'use strict';var o;if(n>0){o=n}else o=10;var p=Math.floor(m/o*this.$VideoUploadReceiveRequestManager6/100);return Math.max(p,30000)};f.exports=l}),null);
__d('VideoUploadStartRequestManager',['ArbiterMixin','VideoUploadRequest','FileHasher','performanceNow','mixin','Assert'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k,l,m,n,o,p,q){'use strict';i.constructor.call(this);this.$VideoUploadStartRequestManager1=k;this.$VideoUploadStartRequestManager2=l;this.$VideoUploadStartRequestManager3=m;this.$VideoUploadStartRequestManager4=0;this.$VideoUploadStartRequestManager5=n;this.$VideoUploadStartRequestManager6=o;this.$VideoUploadStartRequestManager7=p;this.$VideoUploadStartRequestManager8=q;this.$VideoUploadStartRequestManager9=0}j.prototype.getRequest=function(){'use strict';return this.$VideoUploadStartRequestManager10};j.prototype.sendRequest=function(k){'use strict';if(this.$VideoUploadStartRequestManager11||this.$VideoUploadStartRequestManager10)return;this.$VideoUploadStartRequestManager12=k;if(this.$VideoUploadStartRequestManager5&&this.$VideoUploadStartRequestManager12.getFile().getFile()&&this.$VideoUploadStartRequestManager12.getFile().getFile().size<this.$VideoUploadStartRequestManager6&&c('FileHasher').isSupported()){this.$VideoUploadStartRequestManager13=c('performanceNow')();this.$VideoUploadStartRequestManager11=new (c('FileHasher'))();this.$VideoUploadStartRequestManager11.hash(this.$VideoUploadStartRequestManager12.getFile().getFile(),function(l){this.$VideoUploadStartRequestManager13=c('performanceNow')()-this.$VideoUploadStartRequestManager13;this.$VideoUploadStartRequestManager14=l.hash;this.$VideoUploadStartRequestManager11.destroy();this.$VideoUploadStartRequestManager11=null;if(!l.hash)this.$VideoUploadStartRequestManager15=l.exception;this.$VideoUploadStartRequestManager16()}.bind(this))}else this.$VideoUploadStartRequestManager16();};j.prototype.$VideoUploadStartRequestManager16=function(){'use strict';this.$VideoUploadStartRequestManager17();this.inform('request-started',{hash_time:this.$VideoUploadStartRequestManager13,hash_exception:this.$VideoUploadStartRequestManager15})};j.prototype.$VideoUploadStartRequestManager17=function(){'use strict';clearTimeout(this.$VideoUploadStartRequestManager18);this.$VideoUploadStartRequestManager18=null;this.$VideoUploadStartRequestManager10=this.__getVideoUploadRequest(this.$VideoUploadStartRequestManager1).setAllowCrossOrigin(true).setData(this.__getDataToSend(this.$VideoUploadStartRequestManager12,this.$VideoUploadStartRequestManager14)).setWaterfallID(this.$VideoUploadStartRequestManager12.getWaterfallID()).setSuccessHandler(this.$VideoUploadStartRequestManager19.bind(this)).setErrorHandler(this.$VideoUploadStartRequestManager20.bind(this)).setTransportErrorHandler(this.$VideoUploadStartRequestManager21.bind(this));this.$VideoUploadStartRequestManager10.send()};j.prototype.__getVideoUploadRequest=function(k){'use strict';return new (c('VideoUploadRequest'))(k)};j.prototype.__getDataToSend=function(k,l){'use strict';return {file_size:k.getFile().getSize(),file_extension:k.getFile().getExtension(),target_id:k.getTargetID(),source:k.getSource(),waterfall_id:k.getWaterfallID(),composer_entry_point_ref:k.getComposerEntryPointRef&&k.getComposerEntryPointRef(),supports_chunking:k.getSupportsChunking(),supports_file_api:k.getSupportsFileAPI(),partition_start_offset:k.getPartitionStartOffset(),partition_end_offset:k.getPartitionEndOffset(),creator_product:k.getCreatorProduct(),original_file_hash:l,spherical:k.getIsSphericalVideo(),spherical_metadata:k.getSphericalMetadata()}};j.prototype.cancelRequest=function(){'use strict';this.$VideoUploadStartRequestManager22()};j.prototype.$VideoUploadStartRequestManager23=function(k){'use strict';clearTimeout(this.$VideoUploadStartRequestManager18);this.$VideoUploadStartRequestManager18=setTimeout(this.$VideoUploadStartRequestManager17.bind(this),k)};j.prototype.$VideoUploadStartRequestManager22=function(){'use strict';if(this.$VideoUploadStartRequestManager11){this.$VideoUploadStartRequestManager11.destroy();this.$VideoUploadStartRequestManager11=null}if(this.$VideoUploadStartRequestManager10){this.$VideoUploadStartRequestManager10.abort();this.$VideoUploadStartRequestManager10=null}this.$VideoUploadStartRequestManager9=0;this.$VideoUploadStartRequestManager4=0;this.$VideoUploadStartRequestManager12=null;clearTimeout(this.$VideoUploadStartRequestManager18);this.$VideoUploadStartRequestManager18=null};j.prototype.$VideoUploadStartRequestManager24=function(k,l){'use strict';return Math.pow(k,l)*1000};j.prototype.$VideoUploadStartRequestManager19=function(k){'use strict';var l=k.getPayload();this.inform('request-finished',this.__getSuccessInformData(l));this.$VideoUploadStartRequestManager10=null;c('Assert').isTrue(this.$VideoUploadStartRequestManager11==null,'Unexpected: if file hasher is not null, clean up is required.')};j.prototype.__getSuccessInformData=function(k){'use strict';return {video_id:k.video_id,start_offset:k.start_offset,end_offset:k.end_offset,transport_retries:this.$VideoUploadStartRequestManager4,server_retries:this.$VideoUploadStartRequestManager9,skip_upload:k.skip_upload,hash_time:this.$VideoUploadStartRequestManager13}};j.prototype.$VideoUploadStartRequestManager25=function(k){'use strict';this.inform('request-failed',this.$VideoUploadStartRequestManager26(k));this.$VideoUploadStartRequestManager10=null;c('Assert').isTrue(this.$VideoUploadStartRequestManager11==null,'Unexpected: if file hasher is not null, clean up is required.')};j.prototype.$VideoUploadStartRequestManager20=function(k){'use strict';this.$VideoUploadStartRequestManager10=null;this.$VideoUploadStartRequestManager4=0;if(k.isTransient()&&this.$VideoUploadStartRequestManager9<this.$VideoUploadStartRequestManager7){this.$VideoUploadStartRequestManager9++;this.$VideoUploadStartRequestManager23(this.$VideoUploadStartRequestManager24(this.$VideoUploadStartRequestManager8,this.$VideoUploadStartRequestManager9))}else this.$VideoUploadStartRequestManager25(k);};j.prototype.$VideoUploadStartRequestManager21=function(k){'use strict';if(this.$VideoUploadStartRequestManager2===0||this.$VideoUploadStartRequestManager4>=this.$VideoUploadStartRequestManager2){this.$VideoUploadStartRequestManager25(k)}else{this.$VideoUploadStartRequestManager4++;this.$VideoUploadStartRequestManager10=null;this.$VideoUploadStartRequestManager23(this.$VideoUploadStartRequestManager24(this.$VideoUploadStartRequestManager3,this.$VideoUploadStartRequestManager4))}};j.prototype.$VideoUploadStartRequestManager26=function(k){'use strict';return {error_code:k.getError(),error_description:k.getErrorDescription(),error_summary:k.getErrorSummary(),transport_retries:this.$VideoUploadStartRequestManager4,server_retries:this.$VideoUploadStartRequestManager9,error_is_transient:k.isTransient()}};f.exports=j}),null);
__d('getVideo64BitAtomLength',['Int64'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l){var m=i.getUint32(j+l+k),n=i.getUint32(j+k+l+l);return new (c('Int64'))(n,m).toNumber()}f.exports=h}),null);
__d('VideoUploadMetadataParser',['regeneratorRuntime','Promise','VideoUploadFeatureDetector','VideoUploadSphericalLogger','fileSlice','killswitch','getVideo64BitAtomLength'],(function a(b,c,d,e,f,g){var h=4,i=4,j=5242880,k=24,l=88,m=20,n=16,o=4,p=84,q=20,r=62,s=4,t=[255,204,130,99,248,85,74,147,136,20,88,122,2,82,31,221],u=12,v=12,w=16,x=36,y=1,z=1,aa=4,ba=1,ca=1,da=4,ea=4,fa=1000;function ga(ha,ia){'use strict';this.$VideoUploadMetadataParser1=ha;this.$VideoUploadMetadataParser2=ia}ga.prototype.getHandler=function(){'use strict';return this.$VideoUploadMetadataParser2};ga.prototype.parse=function(){'use strict';if(!c('VideoUploadFeatureDetector').supportsFileReading()){this.$VideoUploadMetadataParser2(null);return null}switch(this.$VideoUploadMetadataParser1.getExtension()){case 'mp4':case 'mov':case 'm4v':case '3gp':case '3g2':c('VideoUploadSphericalLogger').setFileExtension(this.$VideoUploadMetadataParser1.getExtension());break;default:this.$VideoUploadMetadataParser2(null);return null;}return this.$VideoUploadMetadataParser3(0,Math.min(j,this.$VideoUploadMetadataParser1.getSize()),null)};ga.prototype.$VideoUploadMetadataParser3=function ha(ia,ja,ka){var la,ma,na;return c('regeneratorRuntime').async(function oa(pa){while(1)switch(pa.prev=pa.next){case 0:'use strict';la=new FileReader();ma=new (c('Promise'))(function(qa,ra){la.onload=function ta(event){var ua;return c('regeneratorRuntime').async(function va(wa){while(1)switch(wa.prev=wa.next){case 0:wa.prev=0;ua=this.$VideoUploadMetadataParser4(new DataView(la.result),0,ja-ia,ia,ka);if(!ua.completed){wa.next=8;break}ua=this.$VideoUploadMetadataParser5(ua);ua.completed=true;qa(ua);wa.next=13;break;case 8:wa.next=10;return c('regeneratorRuntime').awrap(this.$VideoUploadMetadataParser3(ia+ua.nextOffset,Math.min(this.$VideoUploadMetadataParser1.getSize(),ia+ua.nextOffset+j),ua));case 10:ua=wa.sent;ua.completed=false;qa(ua);case 13:wa.next=18;break;case 15:wa.prev=15;wa.t0=wa['catch'](0);ra(wa.t0);case 18:case 'end':return wa.stop();}},null,this,[[0,15]])}.bind(this);var sa=this.$VideoUploadMetadataParser1.getFile();la.readAsArrayBuffer(c('fileSlice').call(sa,ia,ja))}.bind(this));na=this.$VideoUploadMetadataParser6();return pa.abrupt('return',new (c('Promise'))(function(qa,ra){try{c('Promise').all([ma,na]).then(function(sa){var ta=sa[0];if(ta.completed){var ua=sa[1];ta.videoPlayerData=ua;this.$VideoUploadMetadataParser2(ta)}qa(ta)}.bind(this),function(sa){this.$VideoUploadMetadataParser2(null);ra(sa)}.bind(this)).done()}catch(sa){this.$VideoUploadMetadataParser2(null);ra(sa)}}.bind(this)));case 5:case 'end':return pa.stop();}},null,this)};ga.prototype.$VideoUploadMetadataParser6=function(){'use strict';if(c('killswitch')('VIDEO_DIMENSIONS_FROM_PLAYER_IN_UPLOAD_DIALOG')||!b.URL||!b.URL.createObjectURL)return null;var ha=this.$VideoUploadMetadataParser1.getFile(),ia=document.createElement('video'),ja=new (c('Promise'))(function(la,ma){var na=setTimeout(function(){clearTimeout(na);ma('Video onloadedmetadata timed out')},fa)}),ka=new (c('Promise'))(function(la,ma){ia.onloadedmetadata=function(){try{var na={width:ia.videoWidth,height:ia.videoHeight};la(na)}catch(oa){ma(oa)}};try{ia.src=b.URL.createObjectURL(ha)}catch(na){ma(na)}});return c('Promise').race([ka,ja])};ga.prototype.$VideoUploadMetadataParser7=function(ha,ia,ja){'use strict';var ka=[];for(var la=0;la<ja;la++)ka.push(String.fromCharCode(ha.getUint8(ia+la)));return ka.join('')};ga.prototype.$VideoUploadMetadataParser8=function(ha,ia,ja){'use strict';var ka={version:null,ambisonic_type:null,ambisonic_order:null,ambisonic_channel_ordering:null,ambisonic_normalization:null,num_channels:null,channel_maps:[]},la=0;ka.version=ha.getUint8(ia+la);la=y;ka.ambisonic_type=ha.getUint8(ia+la);la+=z;ka.ambisonic_order=ha.getUint32(ia+la);la+=aa;ka.ambisonic_channel_ordering=ha.getUint8(ia+la);la+=ba;ka.ambisonic_normalization=ha.getUint8(ia+la);la+=ca;ka.num_channels=ha.getUint32(ia+la);la+=da;for(var ma=0;ma<ka.num_channels;ma++){ka.channel_maps.push(ha.getUint32(ia+la));la+=ea;if(la>ja)return null;}return JSON.stringify(ka)};ga.prototype.$VideoUploadMetadataParser9=function(ha,ia,ja,ka){'use strict';try{var la=i+h;if(la+t.length<ja&&this.$VideoUploadMetadataParser10(ha,ia+la)){la+=t.length;if(la<ja){var ma=this.$VideoUploadMetadataParser7(ha,ia+la,ja-la),na;if(window.DOMParser){var oa=new DOMParser();na=oa.parseFromString(ma,'text/xml')}else{na=new window.ActiveXObject('Microsoft.XMLDOM');na.async='false';na.loadXML(ma)}var pa=na.getElementsByTagNameNS('*','Spherical')[0].childNodes[0].nodeValue;if(pa.toLowerCase()==='true'){ka.sphericalMetadata.spherical=true;ka.sphericalMetadata.sphericalMetadataXml=ma}}}}catch(qa){}};ga.prototype.$VideoUploadMetadataParser10=function(ha,ia){'use strict';for(var ja=0;ja<t.length;ja++)if(ha.getUint8(ia+ja)!==t[ja])return false;return true};ga.prototype.$VideoUploadMetadataParser4=function(ha,ia,ja,ka,la){'use strict';if(!la)la={widths:[],heights:[],streamTypes:[],streamDurations:[],spherical:false,sphericalMetadata:{sphericalMetadataXml:null,fbSpatialAudioMetadataXml:null,ytSa3dMetadataJson:null},isParsingInMediaInformationAtom:false,endOfMediaInformationAtomOffset:null};var ma=null;while(ia<ja){var na=ha.getUint32(ia),oa=this.$VideoUploadMetadataParser7(ha,ia+h,i);if(na===1)na=c('getVideo64BitAtomLength')(ha,ia,i,h);if(ia+na>ja){la.completed=false;la.nextOffset=ia;if(na>ja)la.nextOffset+=na;return la}if(la.isParsingInMediaInformationAtom&&ia>=la.endOfMediaInformationAtomOffset){la.isParsingInMediaInformationAtom=false;la.endOfMediaInformationAtomOffset=null}if(ia+ka===0&&oa!=='ftyp')throw new Error('No ftyp atom');if(na===0)throw new Error('len is 0');var pa=function db(){var eb=ha.getUint32(ia+m),fb=ha.getUint32(ia+k);return fb/eb};switch(oa){case 'moov':case 'trak':case 'mdia':case 'stbl':ia+=h+i;break;case 'mvhd':la.duration=pa();ia+=na;break;case 'tkhd':var qa=ha.getUint16(ia+p),ra=ha.getUint16(ia+l);la.widths.push(qa);la.heights.push(ra);ma=ha.getUint32(ia+q);ia+=na;break;case 'hdlr':if(!la.isParsingInMediaInformationAtom){var sa=this.$VideoUploadMetadataParser7(ha,ia+n,o);switch(sa){case 'vide':sa='video';break;case 'soun':sa='audio';break;case 'subt':sa='subtitle';break;default:sa='data';}la.streamTypes.push(sa)}ia+=na;break;case 'mdhd':la.streamDurations.push(pa());ia+=na;break;case 'uuid':this.$VideoUploadMetadataParser9(ha,ia,na,la);ia+=na;break;case 'meta':var ta=v+u+s,ua=this.$VideoUploadMetadataParser7(ha,ia+ta,4);if(ua!=='face'){ia+=na;break}var va=h+i+r,wa=this.$VideoUploadMetadataParser7(ha,ia+va,na-va);if(wa!==null){if(la.sphericalMetadata.fbSpatialAudioMetadataXml===null)la.sphericalMetadata.fbSpatialAudioMetadataXml='<fb360_spatial_audio>';if(ma){la.sphericalMetadata.fbSpatialAudioMetadataXml+='\n                <track id="'+ma.toString()+'">\n                  '+wa+'\n                </track>\n              '}else la.sphericalMetadata.fbSpatialAudioMetadataXml+='\n                <spatial_audio_formatting>\n                  '+wa+'\n                </spatial_audio_formatting>\n              ';}ia+=na;break;case 'minf':var xa=this.$VideoUploadMetadataParser7(ha,ia+2*h+i,i);if(xa==='smhd'){ia+=h+i;la.isParsingInMediaInformationAtom=true;la.endOfMediaInformationAtomOffset=ia+na}else ia+=na;break;case 'stsd':var ya=this.$VideoUploadMetadataParser7(ha,ia+i+w,i);if(ya==='mp4a'){ia+=w}else ia+=na;break;case 'mp4a':var za=ha.getUint32(ia+x),ab=ha.getUint32(ia+x+za),bb=this.$VideoUploadMetadataParser7(ha,ia+x+za+h,i);if(bb==='SA3D'){var cb=this.$VideoUploadMetadataParser8(ha,ia+x+za+h+i,ab);if(cb!==null)if(la.sphericalMetadata.ytSa3dMetadataJson===null)la.sphericalMetadata.ytSa3dMetadataJson=cb;}ia+=na;break;default:ia+=na;}}la.completed=true;if(la.sphericalMetadata.fbSpatialAudioMetadataXml)la.sphericalMetadata.fbSpatialAudioMetadataXml+='</fb360_spatial_audio>';return la};ga.prototype.$VideoUploadMetadataParser5=function(ha){'use strict';var ia={streams:{numAudioTracks:0},format:{},metadata:{}},ja=ha.widths.length,ka=ha.heights.length,la=ha.streamTypes.length,ma=ha.streamDurations.length;if(ja!==ka||ja!==la||ja!==ma)return null;for(var na=0;na<ja;na++){var oa={width:ha.widths[na],height:ha.heights[na],duration:ha.streamDurations[na],type:ha.streamTypes[na]};if(oa.type==='video'){var pa=oa.width*oa.height,qa=ia.streams.primaryVideo;if(!qa||qa.width*qa.height>pa)ia.streams.primaryVideo=oa;}else if(oa.type==='audio'){var ra=ia.streams.primaryAudio;if(!ra||ra.duration<oa.duration)ia.streams.primaryAudio=oa;ia.streams.numAudioTracks++}}ia.format.duration=ha.duration;ia.format.isSpherical=ha.sphericalMetadata.spherical;if(ha.sphericalMetadata.spherical){ia.metadata.sphericalMetadataXml=ha.sphericalMetadata.sphericalMetadataXml;ia.metadata.fbSpatialAudioMetadataXml=ha.sphericalMetadata.fbSpatialAudioMetadataXml;ia.metadata.ytSa3dMetadataJson=ha.sphericalMetadata.ytSa3dMetadataJson}c('VideoUploadSphericalLogger').setHasSphericalMetadata(ha.sphericalMetadata.spherical);return ia};f.exports=ga}),null);
__d('VideoUploadSession',['ArbiterMixin','AsyncRequest','VideoUploadCrashMonitor','VideoUploadFeatureDetector','VideoUploadFileValidator','VideoUploadLogger','VideoUploadMetadataParser','VideoUploadPostRequestManager','VideoUploadReceiveRequestManager','VideoUploadRequestContext','VideoUploadStartRequestManager','WaterfallIDGenerator','mixin'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this);this.$VideoUploadSession1=k.source;this.$VideoUploadSession2=k.target_id;this.$VideoUploadSession3=k.logging_delay;this.$VideoUploadSession4=k.silent_file_validation;this.$VideoUploadSession5=k.background_upload;this.$VideoUploadSession6=k.actor_id;this.$VideoUploadSession7=k.composer_entry_point_ref;this.$VideoUploadSession8=k.monitor_crashes;this.$VideoUploadSession9=k.isMultiMediaPost;this.$VideoUploadSession10=k.container_type;this.$VideoUploadSession11=k.number_of_partitions;this.$VideoUploadSession12=k.multi_partitioning_enabled;this.$VideoUploadSession13=k.change_default_chunk_size;this.$VideoUploadSession14=new (c('VideoUploadFileValidator'))({minSize:k.min_size,maxSize:k.max_size,minLength:k.min_length,maxLength:k.max_length,minWidth:k.min_width,minHeight:k.min_height,extensions:k.extensions,source:k.source,require16to9AspectRatio:k.require_16to9_aspect_ratio,minAspectRatio:k.min_aspect_ratio,maxAspectRatio:k.max_aspect_ratio});this.$VideoUploadSession15=c('VideoUploadFeatureDetector').supportsChunking();this.$VideoUploadSession16=c('VideoUploadFeatureDetector').supportsFileAPI();if(this.$VideoUploadSession15){this.$VideoUploadSession17=k.parallel_chunk_uploads;if(this.$VideoUploadSession17){this.$VideoUploadSession18=k.parallel_chunk_upload_filesize;this.$VideoUploadSession19=k.default_chunk_size}}else this.$VideoUploadSession17=false;this.$VideoUploadSession20=this.$VideoUploadSession21(k);this.$VideoUploadSession22=this.$VideoUploadSession23(k);if(this.$VideoUploadSession17)if(this.$VideoUploadSession12){var l=0;this.$VideoUploadSession24=[];for(l=0;l<this.$VideoUploadSession11-1;l++)this.$VideoUploadSession24[l]=this.$VideoUploadSession23(k);}else this.$VideoUploadSession24=this.$VideoUploadSession23(k);this.$VideoUploadSession25=this.$VideoUploadSession26(k);this.$VideoUploadSession27=0;this.$VideoUploadSession28=0;this.$VideoUploadSession29=0;this.$VideoUploadSession30=0;this.$VideoUploadSession31=0;this.$VideoUploadSession32=0;this.$VideoUploadSession33=0;this.$VideoUploadSession34=0;this.$VideoUploadSession35=0}j.prototype.$VideoUploadSession36=function(){'use strict';this.$VideoUploadSession37=[];this.$VideoUploadSession38=[];this.$VideoUploadSession39=[];this.$VideoUploadSession40=[];this.$VideoUploadSession41=[];var k=0;for(k=0;k<this.$VideoUploadSession42-1;k++)this.$VideoUploadSession37.push(false);};j.prototype.$VideoUploadSession43=function(){'use strict';this.$VideoUploadSession44=c('WaterfallIDGenerator').generate();this.$VideoUploadSession45=new (c('VideoUploadLogger'))({actor_id:this.$VideoUploadSession6,source:this.$VideoUploadSession1,waterfall_id:this.$VideoUploadSession44,target_id:this.$VideoUploadSession2,delay:this.$VideoUploadSession3,is_chunked_upload:this.$VideoUploadSession15,composer_entry_point_ref:this.$VideoUploadSession7,container_type:this.$VideoUploadSession10});this.inform('set-waterfall-id',{waterfallID:this.$VideoUploadSession44})};j.prototype.createTestLogger=function(){'use strict';this.$VideoUploadSession43()};j.prototype.getLogger=function(){'use strict';if(!this.$VideoUploadSession45)return null;return this.$VideoUploadSession45};j.prototype.start=function(k){'use strict';this.$VideoUploadSession46=null;this.$VideoUploadSession47=false;this.$VideoUploadSession48=false;this.$VideoUploadSession49=k;this.$VideoUploadSession50=0;this.$VideoUploadSession51=false;this.$VideoUploadSession52={sphericalMetadataXml:null,fbSpatialAudioMetadataXml:null,ytSa3dMetadataJson:null};this.$VideoUploadSession53=false;this.$VideoUploadSession43();if(this.$VideoUploadSession12)this.$VideoUploadSession42=Math.min(this.$VideoUploadSession11,Math.ceil(this.$VideoUploadSession49.getSize()/this.$VideoUploadSession18));this.__logEvent(c('VideoUploadLogger').EVENT_REQUESTED_UPLOADING);this.inform('upload-requested');var l=new (c('VideoUploadMetadataParser'))(this.$VideoUploadSession49,this.$VideoUploadSession54.bind(this));l.parse()};j.prototype.post=function(k){'use strict';this.__logEvent(c('VideoUploadLogger').EVENT_STARTED_POST_REQUEST);this.inform('post-started',k);var l=this.__createPostRequestContext(k);this.$VideoUploadSession25.sendRequest(l);this.$VideoUploadSession55=k};j.prototype.__createPostRequestContext=function(k){'use strict';var l=new (c('VideoUploadRequestContext'))();this.__setupPostRequestContext(l,k);return l};j.prototype.__setupPostRequestContext=function(k,l){'use strict';k.setMetadata(l).setVideoID(this.$VideoUploadSession46).setTargetID(this.$VideoUploadSession2).setSource(this.$VideoUploadSession1).setWaterfallID(this.$VideoUploadSession44).setSupportsChunking(this.$VideoUploadSession15).setCreatorProduct(this.$VideoUploadSession49.getCreatorProduct()).setFile(this.$VideoUploadSession49);if(l){if(l.spherical){this.$VideoUploadSession51=true;k.setIsSphericalVideo(this.$VideoUploadSession51)}if(l.enable_omnistab){this.$VideoUploadSession53=true;k.setEnableOmnistab(this.$VideoUploadSession53)}}if(k.setComposerEntryPointRef)k.setComposerEntryPointRef(this.$VideoUploadSession7);};j.prototype.cancel=function(){'use strict';if(!this.$VideoUploadSession47)return;var k=this.__fetchReceiveRequestManagerStateLogData();this.$VideoUploadSession56(k);this.$VideoUploadSession57();if(this.$VideoUploadSession5){if(!this.$VideoUploadSession48)this.__logEvent(c('VideoUploadLogger').EVENT_CANCELED_UPLOADING);if(this.$VideoUploadSession58){this.__logEvent(c('VideoUploadLogger').EVENT_CANCELED_FLOW,k);this.$VideoUploadSession58=false}}else{this.__logEvent(c('VideoUploadLogger').EVENT_CANCELED_UPLOADING);this.__logEvent(c('VideoUploadLogger').EVENT_CANCELED_FLOW,k)}};j.prototype.abandon=function(){'use strict';if(!this.$VideoUploadSession47)return;var k=this.__fetchReceiveRequestManagerStateLogData();this.$VideoUploadSession56(k);this.$VideoUploadSession57();if(this.$VideoUploadSession5){if(!this.$VideoUploadSession48)this.__logEvent(c('VideoUploadLogger').EVENT_ABANDONED_UPLOADING);if(this.$VideoUploadSession58){this.__logEvent(c('VideoUploadLogger').EVENT_CANCELED_FLOW,k);this.$VideoUploadSession58=false}}else{this.__logEvent(c('VideoUploadLogger').EVENT_ABANDONED_UPLOADING);this.__logEvent(c('VideoUploadLogger').EVENT_CANCELED_FLOW,k)}};j.prototype.isPostInProgress=function(){'use strict';return this.$VideoUploadSession25.isInProgress()};j.prototype.isInProgress=function(){'use strict';return this.$VideoUploadSession47};j.prototype.getVideoID=function(){'use strict';return this.$VideoUploadSession46};j.prototype.getUploadTime=function(){'use strict';return this.$VideoUploadSession59};j.prototype.getExPartitionNumber=function(k){'use strict';var l=0;for(l=0;l<this.$VideoUploadSession42-1;l++)if(k>=this.$VideoUploadSession38[l]&&k<this.$VideoUploadSession39[l])break;if(l===this.$VideoUploadSession42)return -1;return l};j.prototype.startFlow=function(){'use strict';if(!this.$VideoUploadSession5||this.$VideoUploadSession58)return;this.__logEvent(c('VideoUploadLogger').EVENT_STARTED_FLOW,{is_spherical:this.$VideoUploadSession51?'true':null});this.$VideoUploadSession58=true;if(this.$VideoUploadSession60)this.$VideoUploadSession60.flowStarted();};j.prototype.$VideoUploadSession54=function(k){'use strict';var l,m;if(this.$VideoUploadSession4){var n=this.$VideoUploadSession14.getValidationErrorMessage(this.$VideoUploadSession49,k);if(n){m={error_summary:n.summary,error_description:n.description};l=false}else l=true;}else l=this.$VideoUploadSession14.validate(this.$VideoUploadSession49,k);if(!l){this.__logEvent(c('VideoUploadLogger').EVENT_INVALIDATED_UPLOADING);this.inform('upload-failed',m);return}if(k&&k.format){this.$VideoUploadSession51=k.format.isSpherical;if(k.metadata){this.$VideoUploadSession52.sphericalMetadataXml=k.metadata.sphericalMetadataXml;this.$VideoUploadSession52.fbSpatialAudioMetadataXml=k.metadata.fbSpatialAudioMetadataXml;this.$VideoUploadSession52.ytSa3dMetadataJson=k.metadata.ytSa3dMetadataJson}}if(!this.$VideoUploadSession5)this.__logEvent(c('VideoUploadLogger').EVENT_STARTED_FLOW,{is_spherical:this.$VideoUploadSession51?'true':null});this.$VideoUploadSession61=this.$VideoUploadSession17&&this.$VideoUploadSession49.getSize()>=this.$VideoUploadSession18;this.$VideoUploadSession62=false;this.$VideoUploadSession63=0;this.$VideoUploadSession64=this.$VideoUploadSession63;this.$VideoUploadSession65=0;if(this.$VideoUploadSession12){this.$VideoUploadSession36()}else this.$VideoUploadSession37=false;if(this.$VideoUploadSession61){if(this.$VideoUploadSession12){var o=0;this.$VideoUploadSession66=Math.ceil(this.$VideoUploadSession49.getSize()/this.$VideoUploadSession42);var p=this.$VideoUploadSession66,q=this.$VideoUploadSession66;for(o=0;o<this.$VideoUploadSession42-1;o++){this.$VideoUploadSession38[o]=p;p=Math.min(this.$VideoUploadSession38[o]+q,this.$VideoUploadSession49.getSize());this.$VideoUploadSession39[o]=p;this.$VideoUploadSession40[o]=this.$VideoUploadSession38[o];this.$VideoUploadSession41[o]=0}}else{this.$VideoUploadSession66=Math.floor(this.$VideoUploadSession49.getSize()/2);this.$VideoUploadSession38=this.$VideoUploadSession66;this.$VideoUploadSession40=this.$VideoUploadSession38;this.$VideoUploadSession41=0;this.$VideoUploadSession39=this.$VideoUploadSession49.getSize()}}else this.$VideoUploadSession66=this.$VideoUploadSession49.getSize();var r=new (c('VideoUploadRequestContext'))().setFile(this.$VideoUploadSession49).setTargetID(this.$VideoUploadSession2).setSource(this.$VideoUploadSession1).setWaterfallID(this.$VideoUploadSession44).setSupportsChunking(this.$VideoUploadSession15).setSupportsFileAPI(this.$VideoUploadSession16).setCreatorProduct(this.$VideoUploadSession49.getCreatorProduct()).setPartitionStartOffset(this.$VideoUploadSession63).setPartitionEndOffset(this.$VideoUploadSession66);if(this.$VideoUploadSession17)r.setUseParallelChunks(this.$VideoUploadSession17);if(this.$VideoUploadSession51){r.setIsSphericalVideo(this.$VideoUploadSession51);r.setSphericalMetadata(this.$VideoUploadSession52)}if(r.setComposerEntryPointRef)r.setComposerEntryPointRef(this.$VideoUploadSession7);this.$VideoUploadSession67();this.$VideoUploadSession20.sendRequest(r);this.inform('metadata-parsed',k)};j.prototype.$VideoUploadSession21=function(k){'use strict';var l=this.$VideoUploadSession15?k.chunk_start_uri:k.start_uri,m=this.__getVideoUploadStartRequestManager(l,k.start_max_transport_retries,k.start_transport_retry_interval_base,k.skip_upload_enabled,k.skip_upload_file_size_limit,k.start_max_server_retries,k.start_server_retry_interval_base);m.subscribe('request-started',this.$VideoUploadSession68.bind(this));m.subscribe('request-finished',this.$VideoUploadSession69.bind(this));m.subscribe('request-failed',this.$VideoUploadSession70.bind(this));return m};j.prototype.$VideoUploadSession23=function(k){'use strict';var l=this.$VideoUploadSession15?k.chunk_receive_uri:k.receive_uri,m=this.__getVideoUploadReceiveRequestManager(l,k);m.subscribe('request-started',this.$VideoUploadSession71.bind(this));m.subscribe('request-progressed',this.$VideoUploadSession72.bind(this));m.subscribe('request-finished',this.$VideoUploadSession73.bind(this));m.subscribe('request-failed',this.$VideoUploadSession74.bind(this));m.subscribe('request-timeout',this.$VideoUploadSession75.bind(this));m.subscribe('online',this.$VideoUploadSession76.bind(this));m.subscribe('offline',this.$VideoUploadSession77.bind(this));m.subscribe('resumable-called',this.$VideoUploadSession78.bind(this));m.subscribe('resumable-started',this.$VideoUploadSession79.bind(this));m.subscribe('resumable-success',this.$VideoUploadSession80.bind(this));m.subscribe('resumable-failed',this.$VideoUploadSession81.bind(this));return m};j.prototype.$VideoUploadSession26=function(k){'use strict';var l=this.$VideoUploadSession15?k.chunk_post_uri:k.post_uri,m=this.__getVideoUploadPostRequestManager(l,k);m.subscribe('request-finished',this.__handlePostRequestFinished.bind(this));m.subscribe('request-failed',this.$VideoUploadSession82.bind(this));return m};j.prototype.$VideoUploadSession68=function(event,k){'use strict';this.__logEvent(c('VideoUploadLogger').EVENT_STARTED_UPLOADING,{hash_time:k.hash_time,hash_exception:k.hash_exception});this.__logEvent(c('VideoUploadLogger').EVENT_STARTED_START_REQUEST);this.$VideoUploadSession83=Date.now();this.inform('upload-started')};j.prototype.$VideoUploadSession69=function(event,k){'use strict';this.__logEvent(c('VideoUploadLogger').EVENT_PROGRESS_UPLOADING_START_REQUEST,{transport_retries:k.transport_retries,hash_time:k.hash_time,skip_upload:k.skip_upload?1:null});this.__logEvent(c('VideoUploadLogger').EVENT_FINISHED_START_REQUEST);this.$VideoUploadSession46=k.video_id;this.$VideoUploadSession84=k.skip_upload;if(!k.skip_upload){var l;l=this.__createReceiveRequestContext(k,false);this.$VideoUploadSession22.sendRequest(l);if(this.$VideoUploadSession61)if(this.$VideoUploadSession12){var m=0;for(m=0;m<this.$VideoUploadSession42-1;m++){l=this.__createReceiveRequestContext(k,true,m);this.$VideoUploadSession24[m].sendRequest(l)}}else{l=this.__createReceiveRequestContext(k,true);this.$VideoUploadSession24.sendRequest(l)}}else{this.inform('upload-progressed',{start_offset:0,end_offset:this.$VideoUploadSession49.getSize(),file_size:this.$VideoUploadSession49.getSize(),sent_bytes:this.$VideoUploadSession49.getSize(),video_id:k.video_id,skip_upload:k.skip_upload});if(this.$VideoUploadSession5)this.__logFinishedUploading();this.inform('upload-finished',{start_offset:0,end_offset:this.$VideoUploadSession49.getSize(),video_id:k.video_id,is_spherical_video:this.$VideoUploadSession51})}};j.prototype.__fetchReceiveRequestManagerStateLogData=function(){'use strict';var k={};if(this.$VideoUploadSession22!=null){this.$VideoUploadSession22.appendStateLogData(k,'requestManager_');k.request_manager_state=k.requestManager_last_log_state}if(this.$VideoUploadSession12){var l=0;for(l=0;l<this.$VideoUploadSession42-1;l++)if(this.$VideoUploadSession24[l]!=null)this.$VideoUploadSession24[l].appendStateLogData(k,'requestManagerEx_'+l.toString());}else if(this.$VideoUploadSession24!=null)this.$VideoUploadSession24.appendStateLogData(k,'requestManagerEx_');return k};j.prototype.__createReceiveRequestContext=function(k,l,m){'use strict';if(!l)l=false;var n=new (c('VideoUploadRequestContext'))();this.$VideoUploadSession12?this.__setupReceiveRequestContext(n,k,l,m):this.__setupReceiveRequestContext(n,k,l);return n};j.prototype.__setupReceiveRequestContext=function(k,l,m,n){'use strict';var o,p,q,r;if(!m){o=this.$VideoUploadSession63;p=this.$VideoUploadSession66;if(this.$VideoUploadSession13){q=this.$VideoUploadSession63;r=this.$VideoUploadSession66}else{q=l.start_offset;r=l.end_offset}}else if(this.$VideoUploadSession12){if(this.$VideoUploadSession13)this.$VideoUploadSession19=this.$VideoUploadSession39[n]-this.$VideoUploadSession38[n];o=this.$VideoUploadSession38[n];p=this.$VideoUploadSession39[n];q=this.$VideoUploadSession38[n];r=this.$VideoUploadSession38[n]+this.$VideoUploadSession19>=this.$VideoUploadSession39[n]?this.$VideoUploadSession39[n]:this.$VideoUploadSession38[n]+this.$VideoUploadSession19}else{if(this.$VideoUploadSession13)this.$VideoUploadSession19=this.$VideoUploadSession39-this.$VideoUploadSession38;o=this.$VideoUploadSession38;p=this.$VideoUploadSession39;q=this.$VideoUploadSession38;r=this.$VideoUploadSession38+this.$VideoUploadSession19>=this.$VideoUploadSession39?this.$VideoUploadSession39:this.$VideoUploadSession38+this.$VideoUploadSession19}k.setFile(this.$VideoUploadSession49).setVideoID(l.video_id).setStartOffset(q).setEndOffset(r).setPartitionStartOffset(o).setPartitionEndOffset(p).setTargetID(this.$VideoUploadSession2).setSource(this.$VideoUploadSession1).setWaterfallID(this.$VideoUploadSession44).setSupportsChunking(this.$VideoUploadSession15);if(this.$VideoUploadSession17)k.setUseParallelChunks(this.$VideoUploadSession17);if(k.setComposerEntryPointRef)k.setComposerEntryPointRef(this.$VideoUploadSession7);};j.prototype.$VideoUploadSession70=function(event,k){'use strict';var l=this.__getLogErrorData(k);this.__logEvent(c('VideoUploadLogger').EVENT_FAILED_START_REQUEST,l);this.__logEvent(c('VideoUploadLogger').EVENT_FAILED_UPLOADING,l);var m=k.error_is_transient?c('VideoUploadLogger').EVENT_RESIGNED_FLOW:c('VideoUploadLogger').EVENT_FAILED_FLOW;if(this.$VideoUploadSession5){if(this.$VideoUploadSession58){this.__logEvent(m);this.$VideoUploadSession58=false}}else this.__logEvent(m);this.$VideoUploadSession85();this.inform('upload-failed',k)};j.prototype.$VideoUploadSession71=function(event,k){'use strict';if(!k.start_offset&&!k.transport_retries&&!k.server_retries)this.__logEvent(c('VideoUploadLogger').EVENT_STARTED_SENDING_BYTES,{total_bytes:this.$VideoUploadSession49.getSize()});if(this.$VideoUploadSession35===0)this.$VideoUploadSession35=Date.now();if(this.$VideoUploadSession15)this.__logEvent(c('VideoUploadLogger').EVENT_STARTED_SENDING_CHUNK_BYTES,{start_offset:k.start_offset,total_bytes:k.end_offset-k.start_offset,transport_retries:k.transport_retries,server_retries:k.server_retries,upload_speed:k.upload_speed,request_manager_state:k.request_manager_state});};j.prototype.$VideoUploadSession72=function(event,k){'use strict';if(k.start_offset<this.$VideoUploadSession66){this.$VideoUploadSession64=k.start_offset;this.$VideoUploadSession65=k.sent_bytes;this.$VideoUploadSession32=k.transport_retries}else if(this.$VideoUploadSession12){var l=0;l=this.getExPartitionNumber(k.start_offset);if(l>-1){this.$VideoUploadSession40[l]=k.start_offset;this.$VideoUploadSession41[l]=k.sent_bytes}}else{this.$VideoUploadSession40=k.start_offset;this.$VideoUploadSession41=k.sent_bytes;this.$VideoUploadSession33=k.transport_retries}k.start_offset=this.$VideoUploadSession64;k.sent_bytes=this.$VideoUploadSession65;if(this.$VideoUploadSession61)if(this.$VideoUploadSession12){for(l=0;l<this.$VideoUploadSession42-1;l++){k.start_offset+=this.$VideoUploadSession40[l]-this.$VideoUploadSession38[l];k.sent_bytes+=this.$VideoUploadSession41[l]}}else{k.start_offset+=this.$VideoUploadSession40-this.$VideoUploadSession38;k.sent_bytes+=this.$VideoUploadSession41}var m=Math.min(k.start_offset+k.sent_bytes,k.file_size);if(m>this.$VideoUploadSession50){this.$VideoUploadSession50=m;this.inform('upload-progressed',k)}this.$VideoUploadSession27=k.start_offset+k.sent_bytes;var n=Date.now();this.$VideoUploadSession28=n-this.$VideoUploadSession29;this.$VideoUploadSession29=n;this.$VideoUploadSession30=n-this.$VideoUploadSession35;this.$VideoUploadSession31=this.$VideoUploadSession27/this.$VideoUploadSession30;this.$VideoUploadSession34=this.$VideoUploadSession27*100/k.file_size};j.prototype.$VideoUploadSession56=function(k){'use strict';k.data_sent=this.$VideoUploadSession27;k.progress_event_time_delta=this.$VideoUploadSession28;k.last_progress_event_time=this.$VideoUploadSession29;k.time_spent_in_receive=this.$VideoUploadSession30;k.upload_speed=this.$VideoUploadSession31;k.transport_retries_primary=this.$VideoUploadSession32;k.transport_retries_ex=this.$VideoUploadSession33;k.progress_percentage=this.$VideoUploadSession34};j.prototype.$VideoUploadSession73=function(event,k){'use strict';if(this.$VideoUploadSession15)this.__logEvent(c('VideoUploadLogger').EVENT_FINISHED_SENDING_CHUNK_BYTES,{start_offset:k.start_offset,sent_bytes:k.end_offset-k.start_offset,transport_retries:k.transport_retries,server_retries:k.server_retries,upload_speed:k.upload_speed,request_manager_state:k.request_manager_state});var l=false;if(k.start_offset<this.$VideoUploadSession66){this.$VideoUploadSession62=k.end_offset>=this.$VideoUploadSession66}else if(this.$VideoUploadSession12){var m=0;m=this.getExPartitionNumber(k.start_offset);if(m===-1){var n={error_summary:'Invalid offset',error_description:'Offset doesn\'t fall in any exPartition range.'};this.__logEvent(c('VideoUploadLogger').EVENT_FAILED_UPLOADING);this.inform('upload-failed',n);return}this.$VideoUploadSession37[m]=k.end_offset>=this.$VideoUploadSession39[m]}else this.$VideoUploadSession37=k.end_offset>=this.$VideoUploadSession39;if(this.$VideoUploadSession12){for(m=0;m<this.$VideoUploadSession42-1;m++)if(this.$VideoUploadSession37[m]===false){l=false;break}else l=true;}else l=this.$VideoUploadSession37;if(!this.$VideoUploadSession16||this.$VideoUploadSession62&&(!this.$VideoUploadSession61||l)){this.$VideoUploadSession30=Date.now()-this.$VideoUploadSession35;this.$VideoUploadSession56(k);this.__logEvent(c('VideoUploadLogger').EVENT_FINISHED_SENDING_BYTES,{sent_bytes:this.$VideoUploadSession49.getSize()});this.$VideoUploadSession59=Date.now()-this.$VideoUploadSession83;if(this.$VideoUploadSession5)this.__logFinishedUploading();k.video_id=this.$VideoUploadSession46;k.is_spherical_video=this.$VideoUploadSession51;this.inform('upload-finished',k);if(this.$VideoUploadSession9){if(!this.$VideoUploadSession5)this.__logFinishedUploading();this.__logEvent(c('VideoUploadLogger').EVENT_FINISHED_FLOW,k);this.$VideoUploadSession58=false;this.$VideoUploadSession85();this.inform('multimedia-upload-finished',k)}}};j.prototype.$VideoUploadSession74=function(event,k){'use strict';var l=this.__getLogErrorData(k);this.$VideoUploadSession56(l);if(this.$VideoUploadSession15)this.__logEvent(c('VideoUploadLogger').EVENT_FAILED_SENDING_CHUNK_BYTES,l);this.__logEvent(c('VideoUploadLogger').EVENT_FAILED_UPLOADING,l);var m=k.error_is_transient?c('VideoUploadLogger').EVENT_RESIGNED_FLOW:c('VideoUploadLogger').EVENT_FAILED_FLOW;if(this.$VideoUploadSession5){if(this.$VideoUploadSession58){this.__logEvent(m);this.$VideoUploadSession58=false}}else this.__logEvent(m);this.$VideoUploadSession85();this.inform('upload-failed',k)};j.prototype.$VideoUploadSession75=function(event,k){'use strict';var l={start_offset:k.start_offset,sent_bytes:k.end_offset-k.start_offset,transport_retries:k.transport_retries,server_retries:k.server_retries,timeout_retries:k.timeout_retries,upload_speed:k.upload_speed,request_manager_state:k.request_manager_state};this.$VideoUploadSession56(l);this.__logEvent(c('VideoUploadLogger').EVENT_TIMEOUT_SENDING_CHUNK_BYTES,l)};j.prototype.$VideoUploadSession76=function(event,k){'use strict';this.inform('online',k)};j.prototype.$VideoUploadSession77=function(event,k){'use strict';this.inform('offline',k)};j.prototype.$VideoUploadSession78=function(event,k){'use strict';this.__logEvent(c('VideoUploadLogger').EVENT_RESUMABLE_CALLED,k)};j.prototype.$VideoUploadSession79=function(event,k){'use strict';this.__logEvent(c('VideoUploadLogger').EVENT_RESUMABLE_STARTED,k)};j.prototype.$VideoUploadSession80=function(event,k){'use strict';this.__logEvent(c('VideoUploadLogger').EVENT_RESUMABLE_SUCCESS,k)};j.prototype.$VideoUploadSession81=function(event,k){'use strict';this.$VideoUploadSession56(k);this.__logEvent(c('VideoUploadLogger').EVENT_RESUMABLE_FAILED,k)};j.prototype.__handlePostRequestFinished=function(event,k){'use strict';this.__logEvent(c('VideoUploadLogger').EVENT_FINISHED_POST_REQUEST);if(!k.video_id)k.video_id=this.$VideoUploadSession46;if(!this.$VideoUploadSession5)this.__logFinishedUploading();this.__logEvent(c('VideoUploadLogger').EVENT_FINISHED_FLOW);this.$VideoUploadSession58=false;this.$VideoUploadSession85();var l=babelHelpers['extends']({},k,this.$VideoUploadSession55);this.inform('post-finished',l)};j.prototype.__logFinishedUploading=function(){'use strict';this.__logEvent(c('VideoUploadLogger').EVENT_FINISHED_UPLOADING,{elapsed_time:this.$VideoUploadSession59,skip_upload:this.$VideoUploadSession84?1:null});this.$VideoUploadSession48=true};j.prototype.$VideoUploadSession82=function(event,k){'use strict';var l=this.__getLogErrorData(k);this.__logEvent(c('VideoUploadLogger').EVENT_FAILED_POST_REQUEST,l);if(this.$VideoUploadSession47){this.__logEvent(c('VideoUploadLogger').EVENT_FAILED_UPLOADING,l);var m=k.error_is_transient?c('VideoUploadLogger').EVENT_RESIGNED_FLOW:c('VideoUploadLogger').EVENT_FAILED_FLOW;this.__logEvent(m)}this.$VideoUploadSession85();this.inform('post-failed',k)};j.prototype.$VideoUploadSession57=function(){'use strict';this.$VideoUploadSession20.cancelRequest();this.$VideoUploadSession22.cancelRequest();if(this.$VideoUploadSession61)if(this.$VideoUploadSession12){var k=0;for(k=0;k<this.$VideoUploadSession42-1;k++)this.$VideoUploadSession24[k].cancelRequest();}else this.$VideoUploadSession24.cancelRequest();this.$VideoUploadSession85();if(this.$VideoUploadSession46){new (c('AsyncRequest'))('/ajax/video/actions/delete').setData({fbid:this.$VideoUploadSession46,redirect:false}).send();this.$VideoUploadSession46=null}};j.prototype.$VideoUploadSession67=function(){'use strict';this.$VideoUploadSession47=true;if(this.$VideoUploadSession8){this.$VideoUploadSession60=new (c('VideoUploadCrashMonitor'))(this.$VideoUploadSession44,this.$VideoUploadSession6,this.$VideoUploadSession1,this.$VideoUploadSession2,this.$VideoUploadSession3,this.$VideoUploadSession15,this.$VideoUploadSession7,!this.$VideoUploadSession5||this.$VideoUploadSession58);this.$VideoUploadSession60.startSession()}};j.prototype.$VideoUploadSession85=function(){'use strict';this.$VideoUploadSession47=false;if(this.$VideoUploadSession60){this.$VideoUploadSession60.endSession();this.$VideoUploadSession60=null}};j.prototype.__getLogErrorData=function(k){'use strict';return {error:k.error_summary,error_code:k.error_code,error_description:k.error_description,transport_retries:k.transport_retries,server_retries:k.server_retries,request_manager_state:k.request_manager_state}};j.prototype.__logEvent=function(event,k){'use strict';var l=this.getLogger();k=k||{};if(this.$VideoUploadSession49){k.file_size=this.$VideoUploadSession49.getSize();k.file_extension=this.$VideoUploadSession49.getExtension();k.sent_bytes=this.$VideoUploadSession50}l.logEvent(event,k)};j.prototype.__getVideoUploadStartRequestManager=function(k,l,m,n,o,p,q){'use strict';return new (c('VideoUploadStartRequestManager'))(k,l,m,n,o,p,q)};j.prototype.__getVideoUploadReceiveRequestManager=function(k,l){'use strict';return new (c('VideoUploadReceiveRequestManager'))(k,l.max_transport_retries,l.max_server_retries,l.response_timeout_enabled,l.max_response_timeout_retries,l.response_timeout_speed_variation_factor_ppt,l.transport_retry_interval_base,l.server_retry_interval_base,l.receive_errors_force_retry,l.access_token,l.resumability_enabled)};j.prototype.__getVideoUploadPostRequestManager=function(k,l){'use strict';return new (c('VideoUploadPostRequestManager'))(k,l.post_max_transport_retries,l.post_transport_retry_interval_base,l.post_max_server_retries,l.post_server_retry_interval_base)};f.exports=j}),null);
__d('VideoUploader',['ArbiterMixin','VideoUploadCrashMonitor','VideoUploadSession','mixin'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this);this.$VideoUploader1=k;this.$VideoUploader2=null;if(k.monitor_crashes){this.$VideoUploader3=new (c('VideoUploadCrashMonitor'))();this.$VideoUploader3.logKnownCrashes()}}j.prototype.getLogger=function(){'use strict';if(!this.$VideoUploader2)return;if(this.$VideoUploader2.getLogger)return this.$VideoUploader2.getLogger();};j.prototype.upload=function(k){'use strict';if(this.$VideoUploader2)return;this.$VideoUploader2=this.__getVideoUploadSession(this.$VideoUploader1);this.$VideoUploader2.subscribe(this.__getEventsWhichShouldListenFromSession(),function(event,l){return this.$VideoUploader4(event,l)}.bind(this));this.$VideoUploader2.start(k)};j.prototype.__getVideoUploadSession=function(k){'use strict';return new (c('VideoUploadSession'))(k)};j.prototype.__getEventsWhichShouldListenFromSession=function(){'use strict';return ['upload-requested','upload-started','upload-progressed','upload-finished','upload-failed','post-started','post-finished','post-failed','online','offline','metadata-parsed','set-waterfall-id']};j.prototype.postUserRequest=function(){'use strict';if(!this.$VideoUploader2)return;if(this.$VideoUploader2.startFlow)this.$VideoUploader2.startFlow();};j.prototype.post=function(k){'use strict';if(!this.$VideoUploader2)return;this.$VideoUploader2.post(k)};j.prototype.getVideoID=function(){'use strict';return this.$VideoUploader2.getVideoID()};j.prototype.cancel=function(){'use strict';if(!this.$VideoUploader2)return;this.$VideoUploader2.cancel();this.$VideoUploader2=null};j.prototype.abandon=function(){'use strict';if(!this.$VideoUploader2)return;this.$VideoUploader2.abandon();this.$VideoUploader2=null};j.prototype.reset=function(){'use strict';this.$VideoUploader2=null};j.prototype.getUploadSession=function(){'use strict';return this.$VideoUploader2};j.prototype.getLoggerData=function(){'use strict';return {waterfall_id:this.$VideoUploader2?this.$VideoUploader2.$VideoUploader5:null,actor_id:this.$VideoUploader1.actor_id,target_id:this.$VideoUploader1.target_id,target_type:this.$VideoUploader1.target_type,composer_entry_point_ref:this.$VideoUploader1.composer_entry_point_ref}};j.prototype.isPostInProgress=function(){'use strict';return !!this.$VideoUploader2&&this.$VideoUploader2.isPostInProgress()};j.prototype.isSessionInProgress=function(){'use strict';return !!this.$VideoUploader2&&this.$VideoUploader2.isInProgress()};j.prototype.getUploadParameters=function(){'use strict';return this.$VideoUploader1};j.prototype.__getSession=function(){'use strict';return this.$VideoUploader2};j.prototype.__getEventsForWhichSessionShouldBeSetToNull=function(){'use strict';return ['upload-failed','post-finished','multimedia-upload-finished']};j.prototype.$VideoUploader4=function(event,k){'use strict';if(this.__getEventsForWhichSessionShouldBeSetToNull().includes(event))this.$VideoUploader2=null;this.__delegateEvent(event,k)};j.prototype.__delegateEvent=function(event,k){'use strict';this.inform(event,k)};f.exports=j}),null);
__d("CallToActionLinkFormats",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({VIDEO_LEAD:"VIDEO_LEAD",VIDEO_LPP:"VIDEO_LPP",VIDEO_NEKO:"VIDEO_NEKO",VIDEO_NON_LINK:"VIDEO_NON_LINK",VIDEO_SHOP:"VIDEO_SHOP"})}),null);
__d("PUWMethods",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({DRAGDROP:"dragdrop",FILE_SELECTOR:"file_selector",VAULT:"vault",RECENT_PHOTOS:"recent_photos",PHOTOS_OF_YOU:"photos_of_you",METHOD_EDITOR:"editor",SUGGESTIONS:"suggestions",CAMERA:"camera",COPYPASTE:"copypaste",DISABLE_SPHERICAL:"disable_spherical"})}),null);
__d("PublishingToolsSource",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ADS_CANVAS_LANDING_PAGE:"ads_canvas_landing_page",COPYRIGHT_MATCH_PERMALINK:"copyright_match_permalink",DRAFTS_POSTS_TIMELINE_PAGELET:"draft_timeline_pagelet",EXPIRING_POSTS_TIMELINE_PAGELET:"expiring_timeline_pagelet",IA_URL_GROWTH_QP:"ia_url_growth_qp",NOTIFICATION:"notif",OPTIMISTIC_VIDEO_POST:"optimistic_video_post",PAGES_MANAGER_BAR:"pages_manager_bar",PAYMENT_SETTINGS_HEADER:"payment_settings_header",SCHEDULED_POSTS_TIMELINE_PAGELET:"scheduled_timeline_pagelet",UNKNOWN:"unknown",VIDEO_ASSET_INSIGHTS_PERMALINK:"video_asset_insights_permalink",VIDEO_EDIT_PERMALINK:"video_edit_permalink",VIDEO_INSIGHTS:"video_insights",VIDEO_LIBRARY_MEGAPHONE:"video_library_megaphone",VIDEO_UPLOAD_CONFIRMATION_DIALOG:"video_upload_confirmation_dialog",VIDEO_UPLOAD_NOTIF:"video_upload_notif",VIDEOS_HUB:"videos_hub",VIDEOS_YOU_CAN_USE_TIMELINE_PAGELET:"crossposted_timeline_pagelet",LEAD_GEN_DOWNLOAD_DIALOG_FORMS_LIB:"lead_gen_download_dialog_forms_lib",LEAD_GEN_DOWNLOAD_DIALOG_NAM:"lead_gen_download_dialog_nam",LEAD_GEN_DOWNLOAD_DIALOG_NAM_LINK:"lead_gen_download_dialog_nam_link",LEAD_GEN_DOWNLOAD_DIALOG_PE:"lead_gen_download_dialog_pe",LEAD_GEN_DOWNLOAD_DIALOG_PE_LINK:"lead_gen_download_dialog_pe_link",LEAD_GEN_DOWNLOAD_DIALOG_OTHER:"lead_gen_download_dialog_other",LEAD_GEN_FORM_LIBRARY_NOTICE:"lead_gen_form_library_notice",LEAD_GEN_INLINE_FORM_SELECTOR:"lead_gen_inline_form_selector",LEAD_GEN_ORGANIC:"lead_gen_organic",WWW_CHATBAR:"www_chatbar",PAGE_EVENTS_TAB:"page_events_tab"})}),null);
__d("ShareModeConst",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SELF_PAGE:"selfpage",PAGE:"page",SELF_POST:"self",FRIEND:"friend",GROUP:"group",FUNDRAISER:"fundraiser",ALBUM:"album",MESSAGE:"message",ONE_CLICK:"oneclick",EVENT:"event",UNKNOWN:"unknown",OWN_POST:"own"})}),null);
__d("SlideshowMusicCategory",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ALL_TRACKS:"All Tracks",USER_UPLOADED:"User Uploaded",RECENTLY_USED:"Recently Used",ENERGETIC:"Energetic",INSPIRATIONAL:"Inspirational",FUN:"Fun",TRUSTWORTHY:"Trustworthy",MODERN:"Modern"})}),null);
__d("VideoEditSource",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({PROCESSING_DIALOG:"processing_dialog",OPTIMISTIC_VIDEO_POST:"optimistic_video_post",VIDEO_ASSET_INSIGHTS:"video_asset_insights",PERMALINK:"permalink",TIMELINE:"timeline",SNOWLIFT:"snowlift",LIBRARY:"library",SEASON_DETAILS:"season_details",PLAYLIST_DETAILS:"playlist_details",REFERENCE_LIBRARY:"reference_library",CAROUSEL_PREVIEW:"carousel_preview",PAGE_VIDEO_LPP_PUBLISH:"page_video_lpp_publish",SCHEDULE_LIVE_STORY:"schedule_live_story",UNKNOWN:"unknown"})}),null);
__d("VideoLibrarySource",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({VIDEO_UPLOAD_CONFIRMATION_DIALOG:"video_upload_confirmation_dialog",OPTIMISTIC_VIDEO_POST:"optimistic_video_post",VIDEO_INSIGHTS:"video_insights",VIDEOS_HUB:"videos_hub"})}),null);
__d('mergeDeepInto',['invariant','mergeHelpers'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('mergeHelpers').ArrayStrategies,j=c('mergeHelpers').checkArrayStrategy,k=c('mergeHelpers').checkMergeArrayArgs,l=c('mergeHelpers').checkMergeLevel,m=c('mergeHelpers').checkMergeObjectArgs,n=c('mergeHelpers').isTerminal,o=c('mergeHelpers').normalizeMergeArg,p=function t(u,v,w,x){m(u,v);l(x);var y=v?Object.keys(v):[];for(var z=0;z<y.length;z++){var aa=y[z];r(u,v,aa,w,x)}},q=function t(u,v,w,x){k(u,v);l(x);if(w===i.Concat){u.push.apply(u,v)}else{var y=Math.max(u.length,v.length);for(var z=0;z<y;z++)r(u,v,z,w,x);}},r=function t(u,v,w,x,y){var z=v[w],aa=Object.prototype.hasOwnProperty.call(v,w),ba=aa&&n(z),ca=aa&&Array.isArray(z),da=aa&&!ca&&!ca,ea=u[w],fa=Object.prototype.hasOwnProperty.call(u,w),ga=fa&&n(ea),ha=fa&&Array.isArray(ea),ia=fa&&!ha&&!ha;if(ga){if(ba){u[w]=z}else if(ca){u[w]=[];q(u[w],z,x,y+1)}else if(da){u[w]={};p(u[w],z,x,y+1)}else if(!aa)u[w]=ea;}else if(ha){if(ba){u[w]=z}else if(ca){i[x]||h(0);if(x===i.Clobber)ea.length=0;q(ea,z,x,y+1)}else if(da){u[w]={};p(u[w],z,x,y+1)}else !aa;}else if(ia){if(ba){u[w]=z}else if(ca){u[w]=[];q(u[w],z,x,y+1)}else if(da){p(ea,z,x,y+1)}else !aa;}else if(!fa)if(ba){u[w]=z}else if(ca){u[w]=[];q(u[w],z,x,y+1)}else if(da){u[w]={};p(u[w],z,x,y+1)}else !aa;},s=function t(u,v,w){var x=o(v);j(w);p(u,x,w,0)};f.exports=s}),null);
__d('SlideshowAudioUtil',['ix','Image.react','React','SlideshowMusicCategory','fbglyph'],(function a(b,c,d,e,f,g,h){'use strict';var i={getMusicCategoryGlyph:function j(k){switch(k){case c('SlideshowMusicCategory').ALL_TRACKS:return c('React').createElement(c('Image.react'),{src:h("129467")});case c('SlideshowMusicCategory').USER_UPLOADED:return c('React').createElement(c('Image.react'),{src:h("128769")});case c('SlideshowMusicCategory').RECENTLY_USED:return c('React').createElement(c('Image.react'),{src:h("129053")});case c('SlideshowMusicCategory').ENERGETIC:return c('React').createElement(c('Image.react'),{src:h("128852")});case c('SlideshowMusicCategory').INSPIRATIONAL:return c('React').createElement(c('Image.react'),{src:h("128909")});case c('SlideshowMusicCategory').FUN:return c('React').createElement(c('Image.react'),{src:h("129302")});case c('SlideshowMusicCategory').TRUSTWORTHY:return c('React').createElement(c('Image.react'),{src:h("128881")});case c('SlideshowMusicCategory').MODERN:return c('React').createElement(c('Image.react'),{src:h("129337")});default:return null;}},storylineMoodCompare:function j(k,l){if(!k&&!l){return true}else if(!k||!l)return false;return k.fileName===l.fileName&&k.moodID===l.moodID&&JSON.stringify(k.categories)===JSON.stringify(l.categories)}};f.exports=i}),null);
__d('SlideshowFlowTypes',[],(function a(b,c,d,e,f,g){'use strict';var h={SETTINGS_TAB:'SETTINGS_TAB',MUSIC_TAB:'MUSIC_TAB',FRAMES_TAB:'FRAMES_TAB'};f.exports={SlideshowTabKey:h}}),null);