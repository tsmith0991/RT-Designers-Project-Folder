if (self.CavalryLogger) { CavalryLogger.start_js(["aQP69"]); }

__d('ComposerXAttachment',['ComposerXStore'],(function a(b,c,d,e,f,g){function h(){'use strict'}h.prototype.getRoot=function(){'use strict'};h.prototype.initWithComponents=function(i){'use strict'};h.prototype.cleanup=function(){'use strict'};h.prototype.reset=function(){'use strict'};h.prototype.getComponent=function(i){'use strict';return c('ComposerXStore').get(this._composerID,i)};h.prototype.getComponentInstance=function(i){'use strict';var j=c('ComposerXStore').get(this._composerID,i);return j&&j.instance};h.prototype.canSwitchAway=function(){'use strict';return true};h.prototype.setComposerID=function(i){'use strict';this._composerID=i};h.prototype.getComposerID=function(){'use strict';return this._composerID};h.prototype.allowOGTagPreview=function(){'use strict';return false};Object.assign(h.prototype,{attachmentClassName:''});f.exports=h}),null);
__d('ComposerXAttachmentButtonBarState',['csx','cx','CSS','DOMQuery'],(function a(b,c,d,e,f,g,h,i){var j={trackCityChanges:function k(l){var m=l.getComponent('citysharericon');if(m)return m.instance.subscribe('change',function(){j.updateMessageBoxBarState(l)});},updateMessageBoxBarState:function k(l){var m=l.getComponent('citysharericon');if(m){var n=c('DOMQuery').find(l.getRoot(),"._1dsp");c('CSS').conditionClass(n,"_icv",!!m.instance.getValue())}}};f.exports=j}),null);
__d('ComposerXAttachmentPrefillMixin',['Event','InputSelection'],(function a(b,c,d,e,f,g){var h={_initPrefill:function i(j,k){this._textArea=j;this._didInitialFocus=false;this._prefill=k;if(this._prefill)this._focusListener=c('Event').listen(this._textArea,'focus',this._prefillOnFocus.bind(this));},_resetPrefill:function i(){this._didInitialFocus=false},_prefillOnFocus:function i(){if(!this._didInitialFocus&&this._prefill&&this._textArea.value===''){this._textArea.value=this._prefill;c('InputSelection').set(this._textArea,0,0)}this._didInitialFocus=true}};f.exports=h}),null);
__d('ComposerXAttachmentUtils',['csx','BrowserSupport','Button','ComposerXController','DataStore','DOMQuery','Event','Focus','Keys','Run','StickyPlaceholderInput','UserAgent_DEPRECATED','debounce'],(function a(b,c,d,e,f,g,h){var i='composer_fixed_placeholder';function j(l,m){if(!c('DataStore').get(l.element,i,false))l.instance.setPlaceholder(m);}var k={initMentions:function l(m,n,o,p){j(m,n.toString());if(!p||!p.dontFocusMentions)k.focusMentions(m);this.registerMentionsForComposerCancel(m,o)},focusMentions:function l(m){var n=c('DOMQuery').find(m.element,'textarea.input');c('Focus').set(n)},registerMentionsForComposerCancel:function l(m,n){c('ComposerXController').registerConditionForComposerCancel(n,m.instance.hasChanges.bind(m.instance))},setValueForMentions:function l(m,n){var o=c('DOMQuery').find(m.element,'textarea.input');o.value=n},setStickyPlaceholderForMentions:function l(m,n){j(m,n)},setPlaceholderIsFixed:function l(m,n){c('DataStore').set(m.element,i,!!n)},setStickyPlaceholderForTypeahead:function l(m,n){var o=c('DOMQuery').find(m,'.textInput');c('StickyPlaceholderInput').setPlaceholderText(o,n.toString())},listenForPostSubmission:function l(m){c('Event').listen(m,'keydown',function(event){var n=event.getModifiers(),o=c('UserAgent_DEPRECATED').osx()?n.meta:n.control,p=c('DOMQuery').find(m.form,"._11b"+'[type="submit"]');if(event.keyCode===c('Keys').RETURN&&o&&c('Button').isEnabled(p)){m.blur();if(c('Event').fire(p,'click'))c('Event').fire(m.form,'submit');event.preventDefault()}})}};f.exports=k}),null);
__d('AggregatedGroupStoryComposerTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear()}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:AggregatedGroupStoryComposerLoggerConfig',this.$AggregatedGroupStoryComposerTypedLogger1,c('Banzai').BASIC)};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:AggregatedGroupStoryComposerLoggerConfig',this.$AggregatedGroupStoryComposerTypedLogger1,c('Banzai').VITAL)};h.prototype.clear=function(){this.$AggregatedGroupStoryComposerTypedLogger1={};return this};h.prototype.updateData=function(j){this.$AggregatedGroupStoryComposerTypedLogger1=babelHelpers['extends']({},this.$AggregatedGroupStoryComposerTypedLogger1,j);return this};h.prototype.setEvent=function(j){this.$AggregatedGroupStoryComposerTypedLogger1.event=j;return this};h.prototype.setVC=function(j){this.$AggregatedGroupStoryComposerTypedLogger1.vc=j;return this};var i={event:true,vc:true};f.exports=h}),null);
__d("ComposerXAjaxEndpoint",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ADS_MEDIA_UPLOAD:"\/ajax\/ads\/create\/composerx\/attachment\/media\/upload\/",ADS_ATTACHMENT_STATUS:"\/ajax\/ads\/create\/composerx\/attachment\/status\/",MEDIA_UPLOAD:"\/ajax\/composerx\/attachment\/media\/upload\/",VIDEO_UPLOAD:"\/ajax\/composerx\/attachment\/video\/upload\/"})}),null);
__d("isAnimatedGif",["Promise"],(function a(b,c,d,e,f,g){var h=1e+06;function i(m){return m[0]===71&&m[1]===73&&m[2]===70}function j(m,n){return m[n]===0&&m[n+1]===33&&m[n+2]===249&&m[n+3]===4&&m[n+8]===0&&(m[n+9]===44||m[n+9]===33)}function k(m){if(!i(m))return false;var n=0;for(var o=0;o+9<m.length;++o){if(j(m,o))n++;if(n>1)return true;}return false}function l(m){return new (c("Promise"))(function(n){var o=new FileReader();o.onloadend=function(r){if(r.target.readyState==FileReader.DONE){var s=new Uint8Array(r.target.result);if(k(s)){n(true)}else n(false);}};o.onerror=function(r){n(false)};var p=Math.min(h,m.size),q=m.slice(0,p);o.readAsArrayBuffer(q)})}f.exports=l}),null);
__d('ComposerXMediaUploadHandler',['fbt','Arbiter','AsyncRequest','ComposerXAjaxEndpoint','ComposerXController','CSS','Dialog','ImageExtensions','QE','ReloadPage','SubscriptionsHandler','URI','VideoUploadConfig','VideoUploadFile','isAnimatedGif'],(function a(b,c,d,e,f,g,h){var i=c('ComposerXAjaxEndpoint').MEDIA_UPLOAD,j='/ajax/composerx/attachment/video/upload/',k=0;function l(m,n){'use strict';this.$ComposerXMediaUploadHandler1=m;this.$ComposerXMediaUploadHandler2=n}l.prototype.fetchAttachments=function(){'use strict';[this.getPhotoUploadAttachmentEndpoint(),j].forEach(function(m){c('ComposerXController').fetchAttachmentData(this.$ComposerXMediaUploadHandler1,m)}.bind(this))};l.prototype.handleFileSelected=function(m){'use strict';var n=this;l.isVideoOrAnimatedGifAsync(m,function(o){if(o){n.handleVideoSelected(m)}else n.handlePhotoSelected(m);})};l.canUploadAnimatedGIF=function(){'use strict';return c('ImageExtensions').GIF in c('VideoUploadConfig').videoExtensions};l.isVideoOrAnimatedGifAsync=function(m,n){'use strict';var o=c('VideoUploadFile').getExtensionFromFileInput(m.getInput());if(l.canUploadAnimatedGIF()&&o===c('ImageExtensions').GIF){c('isAnimatedGif')(m.getInput().files[0]).then(n)}else if(c('VideoUploadConfig').videoExtensions[o]){n(true)}else n(false);};l.prototype.handleVideoSelected=function(m){'use strict';if(this.$ComposerXMediaUploadHandler2&&this.$ComposerXMediaUploadHandler2.imagesOnly){var n=new (c('Dialog'))().setModal(true).setButtons([c('Dialog').OK]);if(this.$ComposerXMediaUploadHandler2.isEditComposer){n.setTitle(h._("Can't add video")).setBody(h._("Sorry, you can't add a video to a post you're editing."))}else n.setTitle(h._("Invalid Image File")).setBody(h._("Please upload a valid image file."));n.show();return}c('ComposerXController').getAttachment(this.$ComposerXMediaUploadHandler1,j);c('Arbiter').inform('ComposerXFilesStore/filesAdded/'+this.$ComposerXMediaUploadHandler1+'/videoupload',{fileInput:m},c('Arbiter').BEHAVIOR_PERSISTENT)};l.prototype.handlePhotoSelected=function(m){'use strict';c('ComposerXController').getAttachment(this.$ComposerXMediaUploadHandler1,this.getPhotoUploadAttachmentEndpoint());l.$ComposerXMediaUploadHandler3(this.$ComposerXMediaUploadHandler1,m)};l.isVideoFile=function(m){'use strict';var n=c('VideoUploadFile').getExtensionFromFileInput(m.getInput());return !!c('VideoUploadConfig').videoExtensions[n]};l.prototype.$ComposerXMediaUploadHandler4=function(){'use strict';return this.$ComposerXMediaUploadHandler2?this.$ComposerXMediaUploadHandler2.photoUploadOverrideEndpoint:null};l.prototype.getPhotoUploadAttachmentEndpoint=function(){'use strict';var m=this.$ComposerXMediaUploadHandler4();return m?m:i};l.$ComposerXMediaUploadHandler3=function(m,n){'use strict';c('Arbiter').inform('ComposerXFilesStore/filesAdded/'+m+'/mediaupload',{fileInput:n,receivedBySubscriber:false},c('Arbiter').BEHAVIOR_PERSISTENT)};l.setupFileUploadToComposerDialog=function(m,n,o,p){'use strict';var q='composerxmediauploadhandler'+k++,r=function u(v){c('CSS').conditionClass(m.getControl(),o,v);m.getInput().disabled=v},s=new (c('URI'))(n),t=s.getQueryData();t.client_ref=q;s.setQueryData(t);n=s.toString();m.subscribe('change',function(){new (c('AsyncRequest'))().setURI(n).setErrorHandler(function(){m.clear();r(false)}).send();r(true)});c('Arbiter').subscribe('composer/dialog/'+q+'/new',function(u,v){this.$ComposerXMediaUploadHandler3(v.composerID,m);var w=new (c('SubscriptionsHandler'))();w.addSubscriptions(c('Arbiter').subscribe('composer/publish',function(event,x){if(p&&v.composerID===x.composer_id)c('ReloadPage').now();}),v.dialog.subscribe('hide',function(){w.release();m.clear();r(false)}))}.bind(this))};f.exports=l}),null);
__d('FirstPhotoUploadLogger',['csx','DOM','Event','PagesComposerPostActionsLoggerEvent','PagesComposerActionsLogger'],(function a(b,c,d,e,f,g,h){'use strict';var i={log:function j(event,k,l){if(!k||!l)return;var m=c('DOM').scry(l,"._yr");if(m.length!==0&&event!==c('PagesComposerPostActionsLoggerEvent').DRAG_PHOTO_TO_COMPOSER)return;c('PagesComposerActionsLogger').log({event:event,target_id:k})},bindClickUpload:function j(k,l,m){c('Event').listen(l,'click',function(){this.log(c('PagesComposerPostActionsLoggerEvent').CLICK_UPLOAD_PHOTO_IN_PHOTO_TAB,m,k)}.bind(this))}};f.exports=i}),null);
__d('ComposerXDragDrop',['fbt','Promise','Arbiter','ClipboardPhotoUploader','ComposerXAjaxEndpoint','ComposerXController','ComposerXDragDropUtils','ComposerXMediaUploadHandler','DragDropTarget','ErrorDialog','Event','FirstPhotoUploadLogger','PagesComposerPostActionsLoggerEvent','PUWMethods','URI','isAnimatedGif'],(function a(b,c,d,e,f,g,h){var i=c('ComposerXAjaxEndpoint').MEDIA_UPLOAD,j=c('ComposerXAjaxEndpoint').VIDEO_UPLOAD,k='/ajax/composerx/attachment/link/scraper/',l=function n(o){o()};function m(n,o,p,q){'use strict';this._root=n;this._composerID=o;this._targetID=p;q=q||l;this._activatePasteHandler();this._dragdrop=new (c('DragDropTarget'))(n).setOnFilesDropCallback(function(r){q(this._dropFiles.bind(this,r))}.bind(this)).setFileFilter(c('ComposerXDragDropUtils').filterImages).enable();c('ComposerXDragDropUtils').handleDragEnterAndLeave(n);c('Arbiter').subscribe('composer/deactivateDragdrop',function(){this.deactivate()}.bind(this));c('Arbiter').subscribe('composer/reactivateDragdrop',function(){this.reactivate()}.bind(this))}m.prototype.enableURLDropping=function(){'use strict';this._dragdrop.setOnURLDropCallback(this._onURLDrop.bind(this))};m.prototype.deactivate=function(){'use strict';this._dragdrop.disable();this._deactivatePasteHandler()};m.prototype.reactivate=function(){'use strict';this._activatePasteHandler();this._dragdrop.enable()};m.prototype._activatePasteHandler=function(){'use strict';if(this._pasteHandler)return;this._pasteHandler=c('Event').listen(this._root,'paste',function(event){var n=c('ClipboardPhotoUploader').getImages(event);if(!n.length)return;this._uploadFiles(n,c('PUWMethods').COPYPASTE)}.bind(this))};m.prototype._deactivatePasteHandler=function(){'use strict';if(!this._pasteHandler)return;this._pasteHandler.remove();delete this._pasteHandler};m.prototype._uploadFiles=function(n,o,p){'use strict';if(p){c('ComposerXController').getAttachment(this._root,j);c('Arbiter').inform('ComposerXFilesStore/filesDropped/'+this._composerID+'/videoupload',{files:n},c('Arbiter').BEHAVIOR_PERSISTENT)}else{c('ComposerXController').getAttachment(this._root,i);c('Arbiter').inform('ComposerXFilesStore/filesDropped/'+this._composerID+'/mediaupload',{files:n,method:o},c('Arbiter').BEHAVIOR_PERSISTENT)}};m.prototype._dropFiles=function(n){'use strict';var o=n.map(function(q){return new (c('Promise'))(function(r){if(q.type==='image/gif'&&c('ComposerXMediaUploadHandler').canUploadAnimatedGIF()){r(c('isAnimatedGif')(q))}else if(q.type.match('video/*')){r(true)}else r(false);})});for(var p=0;p<o.length;p++)if(o[p]._value===false){c('FirstPhotoUploadLogger').log(c('PagesComposerPostActionsLoggerEvent').DRAG_PHOTO_TO_COMPOSER,this._targetID,this._root);break}c('Promise').all(o).then(function(q){if(this.validateMediaTypes(q))this._uploadFiles(n,c('PUWMethods').DRAGDROP,q[0]);}.bind(this))};m.prototype._onURLDrop=function(n){'use strict';var o=new (c('URI'))(k);o.addQueryData({scrape_url:encodeURIComponent(n)});c('ComposerXController').getAttachment(this._root,o.toString())};m.prototype.validateMediaTypes=function(n){'use strict';if(n.length>1){var o=false,p=false;for(var q=0;q<n.length;q++)if(n[q]){o=true}else p=true;if(o&&p){c('ErrorDialog').show(h._("Can't upload both videos and images"),h._("Please select either one video or one or more images."));return false}}return true};f.exports=m}),null);
__d('PagesComposerEntryLogger',['Event','PagesEventObserver'],(function a(b,c,d,e,f,g){function h(i){'use strict';this.$PagesComposerEntryLogger1=i}h.prototype.registerForContentEntryEvents=function(i){'use strict';var j=function k(){var l={page_id:this.$PagesComposerEntryLogger1,event_name:'composer_content_entry',pages_composer:1,target_id:this.$PagesComposerEntryLogger1};c('PagesEventObserver').logData_DEPRECATED(l,c('PagesEventObserver').VITAL_WAIT);this.unregister()};this.$PagesComposerEntryLogger2=c('Event').listen(i,{paste:j.bind(this),keydown:j.bind(this)})};h.prototype.unregister=function(){'use strict';if(!this.$PagesComposerEntryLogger2)return;for(var event in this.$PagesComposerEntryLogger2)this.$PagesComposerEntryLogger2[event].remove();this.$PagesComposerEntryLogger2=null};f.exports=h}),null);
__d("PrivacyRemindersLoggingTypes",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ONLY_ME_IMPRESSION:"only_me_impression",ONLY_ME_CONVERSION:"only_me_conversion",EVERYONE_IMPRESSION:"everyone_impression",EVERYONE_CONVERSION:"everyone_conversion",EVERYONE_TESTS_IMPRESSION:"everyone_tests_impression",EVERYONE_TESTS_CONVERSION:"everyone_tests_conversion",PUBLIC_POSTING_FILTER_NUX_IMPRESSION:"public_posting_filter_nux_impression",PUBLIC_POSTING_FILTER_NUX_CONVERSION:"public_posting_filter_nux_conversion",DELTA_EVERYONE_IMPRESSION:"delta_everyone_impression",DELTA_EVERYONE_CONVERSION:"delta_everyone_conversion",DELTA_EVERYONE_OK_BUTTON_CLICKED:"delta_everyone_ok_button_clicked",DELTA_EVERYONE_CHANGE_BUTTON_CLICKED:"delta_everyone_change_button_clicked"})}),null);
__d("SuggestionConfig",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({GROUP_POST_COMPOSER:"grouppostcomposer",OG_SUGGESTION_BY_INPUT:"ogsuggestionbyinput",COMPOSER_ENTRY_BOOTSTRAP:"composerentrybootstrap",MTOUCH_COMPOSER_ENTRY_BOOTSTRAP:"mtouchcomposerentrybootstrap",MTOUCH_COMPOSER_LOAD_VERBS:"mtouchcomposerloadverbs"})}),null);
__d("SuggestionUIPresentation",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({FLYOUT:1,TAGGER_BADGE:2,ADD_TAG:3,SEMI_INLINE:4,TOP_OF_VERBS:5})}),null);
__d("XPrivacyRemindersDismissController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/privacy\/reminders\/dismiss\/",{type:{type:"String",required:true},log_plite:{type:"Bool",defaultValue:false}})}),null);
__d("XPrivacyRemindersImpressionLoggingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/privacy\/reminders\/log_imp\/",{type:{type:"String",required:true}})}),null);
__d('ComposerXBootloadStatusAttachment',['csx','cx','fbt','requireWeak','AggregatedGroupStoryComposerTypedLogger','Arbiter','AsyncRequest','Bootloader','ComposerEntryPointRef','ComposerXAttachment','ComposerXAttachmentButtonBarState','ComposerXAttachmentPrefillMixin','ComposerXAttachmentUtils','ComposerXController','ComposerXDragDrop','ComposerXDragDropUtils','ComposerXMarauderLogger','ComposerXStore','CSS','DOM','DOMQuery','Event','Focus','NoNewerStoryInsertionWhileComposingGK','PageTransitions','PagesComposerEntryLogger','Parent','FocusListener','PrivacyConst','PrivacyRemindersLoggingTypes','ProductionPromptConfig','SelectorDeprecated','SubscriptionsHandler','SuggestionConfig','SuggestionUIPresentation','URI','XUIError','$','classWithMixins','createCancelableFunction','getActiveElement','mixin','requestAnimationFrame','XPrivacyRemindersDismissController','XPrivacyRemindersImpressionLoggingController','XReactComposerLoggingODSController'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m;c('requireWeak')('LitestandStoryInsertionStatus',function(q){m=q});var n={only_me:{PRIVACY_CONSTANT:[c('PrivacyConst').BaseValue.SELF],LOG_IMPRESSION:c('PrivacyRemindersLoggingTypes').ONLY_ME_IMPRESSION,LOG_CONVERSION:c('PrivacyRemindersLoggingTypes').ONLY_ME_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true},everyone:{PRIVACY_CONSTANT:[c('PrivacyConst').BaseValue.EVERYONE],LOG_IMPRESSION:c('PrivacyRemindersLoggingTypes').EVERYONE_IMPRESSION,LOG_CONVERSION:c('PrivacyRemindersLoggingTypes').EVERYONE_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true},everyone_tests:{PRIVACY_CONSTANT:[c('PrivacyConst').BaseValue.EVERYONE],LOG_IMPRESSION:c('PrivacyRemindersLoggingTypes').EVERYONE_TESTS_IMPRESSION,LOG_CONVERSION:c('PrivacyRemindersLoggingTypes').EVERYONE_TESTS_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true},public_posting_filter_nux:{PRIVACY_CONSTANT:[c('PrivacyConst').BaseValue.EVERYONE],LOG_IMPRESSION:c('PrivacyRemindersLoggingTypes').PUBLIC_POSTING_FILTER_NUX_IMPRESSION,LOG_CONVERSION:c('PrivacyRemindersLoggingTypes').PUBLIC_POSTING_FILTER_NUX_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true}},o={};k=babelHelpers.inherits(p,c('classWithMixins')(c('ComposerXAttachment'),c('mixin')(c('ComposerXAttachmentPrefillMixin'))));l=k&&k.prototype;function p(q,r){'use strict';l.constructor.call(this);this._onSelectorChange=function(s,t){if(!this.getComponent('mainprivacywidget'))return;if(this._newPrivacyWidgetInstance||t.selector===this._privacyWidgetElement.firstChild)setTimeout(function(){Object.keys(this._privacyReminders).forEach(this._showPrivacyReminder,this)}.bind(this));if(this._tagExpansionReminder)this._tagExpansionReminder.updateReminderText(t.post_param);}.bind(this);this._root=q;this._config=r;this._privacyReminders={};if(m&&c('NoNewerStoryInsertionWhileComposingGK').no_insertion_while_composing)m.registerBlocker(function(){return this._isFocused()}.bind(this));}p.prototype.getRoot=function(){'use strict';return this._root};p.prototype.getPrivacyInstance=function(){'use strict';return this._newPrivacyWidgetInstance};p.prototype._getTextArea=function(){'use strict';return c('DOMQuery').find(this.getComponent('maininput').element,'textarea.input')};p.prototype.initWithComponents=function(q){'use strict';o[this._composerID]=this;this._attachmentIsActive=true;var r=this._getTextArea(),s=c('DOMQuery').scry(c('Parent').bySelector(this.getRoot(),"._119"),'li.'+this.attachmentClassName)[0];this._focusListener=c('Event').listen(r,'focus',this._onFocus.bind(this,'area_focus'));if(this._config.prefill_text)this._initPrefill(r,this._config.prefill_text);if(q&&this._config.targetIsPage){this._pagesComposerEntryLogger=new (c('PagesComposerEntryLogger'))(this._config.targetID);this._pagesComposerEntryLogger.registerForContentEntryEvents(r)}if(this._fullVersion){this._fullInitWithComponents()}else if(!this._bootloading)if(this._isFocused()){this._onFocus('is_focused')}else if(s)this._clickListener=c('Event').listen(s,'click',function(){c('Focus').set(r)}.bind(this));this._dragEnterHandler=c('Arbiter').subscribe('dragenter',function(t,u){if(u.element==this._root){c('Arbiter').inform('composerprivacy/aborteducation');var v=u.event.dataTransfer.items,w;if(v)w=c('ComposerXDragDropUtils').filterImages(v);if(w&&w.length>0){c('Focus').set(r)}else{var x=c('Parent').byClass(this._root,'focus_target');c('FocusListener').expandInput(x);this._onFocus('drag_focus')}}}.bind(this));this.getComponent('maininput').instance.setPlaceholder(this._config.mentionsPlaceholder);if(!q)c('Focus').set(r);this._dragdrop=new (c('ComposerXDragDrop'))(this._root,this._composerID,this._config.targetID);this._dragdrop.enableURLDropping();this._initPrivacyWidgetInstance();if(this._config.postActionsButton!=null)this._config.postActionsButton.initHiddenInputs(this.getComponent('pabhiddeninputs').instance);c('PageTransitions').registerHandler(this.cleanup.bind(this))};p.prototype._initPrivacyWidgetInstance=function(){'use strict';var q=this.getComponent('mainprivacywidget');if(!q)return;this._privacyWidgetElement=q.element;this._newPrivacyWidgetInstance=q.instance&&q.instance.getInstance().getInstance();if(this._newPrivacyWidgetInstance){var r=this.getComponent('maininput').instance&&this.getComponent('maininput').instance.getMentions(),s=this.getComponent('tagExpansionButton');s&&s.instance&&s.instance.listenToPrivacy(this._newPrivacyWidgetInstance,r)}};p.prototype._fullInitWithComponents=function(q){'use strict';this._bootloadCallback=c('createCancelableFunction')(this._bootloadModules.bind(this));if(q&&q.show_tag_expansion_reminder){c('Bootloader').loadModules(["ComposerXPrivacyWidgetTags","URLScraper","SuggestionScraper","ComposerTagReminder"],this._bootloadCallback,'ComposerXBootloadStatusAttachment')}else c('Bootloader').loadModules(["ComposerXPrivacyWidgetTags","URLScraper","SuggestionScraper"],this._bootloadCallback,'ComposerXBootloadStatusAttachment');Object.keys(this._privacyReminders).forEach(this._showPrivacyReminder,this);if(this._setEveryonePrivacyImpression)this._showPrivacyReminder('everyone');if(this._newPrivacyWidgetInstance){this._newPrivacyWidgetInstance.subscribe('changed',this._onSelectorChange)}else c('SelectorDeprecated').subscribe('select',this._onSelectorChange);c('Arbiter').inform('ComposerXBootloadStatusAttachment/mutate')};p.prototype._bootloadModules=function(q,r,s,t){'use strict';this._modulesAreBootloaded=true;this._tagger.init(this);this._privacyWidgetTags=new q(this);if(t){this._tagExpansionReminder=new t(this);this._tagExpansionReminder.listen()}c('ComposerXAttachmentButtonBarState').trackCityChanges(this);var u=c('DOMQuery').find(this.getComponent('maininput').element,'textarea.input');if(!this._scraper){this._scraper=new r(u);this._scraper.subscribe('match',function(y,z){var aa=this._getScraperEndpoint();aa.addQueryData({scrape_url:encodeURIComponent(z.url),remove_url:this._config.remove_url,attachment_class:this._config.classname});var ba=this._config.isCarouselComposer;c('ComposerXController').getAttachment(this._root,aa.toString(),null,ba)}.bind(this))}this._scraper.enable();this._scraper.check();var v=c('DOM').scry(this._root,"._4-jj"),w=this.getComposerID();if(this._config.stream_context==='home'&&v&&v.length&&this._tagger&&w){if(!this._suggestionScraper){this._suggestionScraper=new s(this._tagger,v[0],[c('SuggestionUIPresentation').SEMI_INLINE,c('SuggestionUIPresentation').TAGGER_BADGE,c('SuggestionUIPresentation').TOP_OF_VERBS],w);this._suggestionScraper.setBootloadTriggerConfig(c('SuggestionConfig').COMPOSER_ENTRY_BOOTSTRAP)}if(c('ProductionPromptConfig').gk){var x=c('DOM').scry(this._root,'#bootloadSemiinlineRoot')[0];if(x)c('CSS').hide(x);}}};p.prototype._showPrivacyReminder=function(q){'use strict';var r=this,s=this._privacyReminders[q],t=n[q],u=null;if(this._newPrivacyWidgetInstance){u=this._newPrivacyWidgetInstance.getSelectedBaseValue()}else u=parseInt(c('SelectorDeprecated').getValue(this._privacyWidgetElement),10);if(!s||!s.dialog||s.shown){if(u===c('PrivacyConst').BaseValue.EVERYONE&&this._setEveryonePrivacyImpression){this._sendSetEveryonePrivacyImpression();this._setEveryonePrivacyImpression=false}return}if(t.PRIVACY_CONSTANT.indexOf(u)===-1)return;s.dialog.setContext(this._privacyWidgetElement).show();s.shown=true;this._privacyReminderShown=true;if(t.LOG_IMPRESSION){var v=c('XPrivacyRemindersImpressionLoggingController').getURIBuilder().setString('type',t.LOG_IMPRESSION).getURI();new (c('AsyncRequest'))(v).send()}if(t.LOG_IMPRESSION_TO_DISMISS_ENDPOINT)if(q==='only_me'){var w=c('XPrivacyRemindersDismissController').getURIBuilder().setString('type',q).getURI();new (c('AsyncRequest'))(w).send()}else new (c('AsyncRequest'))('/ajax/privacy/reminders/dismiss').setData({type:q,dismiss_type:'impression'}).send();var x=function(event){var y=c('CSS').hasClass(event.target,'layerConfirm')||c('DOMQuery').scry(event.target,'^.layerConfirm').length===1,z=c('CSS').hasClass(event.target,'layerButton')||c('DOMQuery').scry(event.target,'^.layerButton').length===1;if(y&&q!=='public_posting_filter_nux'){if(q==='only_me'){var aa=c('XPrivacyRemindersImpressionLoggingController').getURIBuilder().setString('type',c('PrivacyRemindersLoggingTypes').DELTA_EVERYONE_OK_BUTTON_CLICKED).getURI();new (c('AsyncRequest'))(aa).send()}return}if(q==='only_me'){var ba=c('XPrivacyRemindersDismissController').getURIBuilder().setString('type',q).getURI();new (c('AsyncRequest'))(ba).send()}else new (c('AsyncRequest'))('/ajax/privacy/reminders/dismiss').setData({type:q,hide:z}).send();s.events.forEach(function(ca){ca.remove()});s.events=[];s.dialog.hide();this._privacyReminderShown=false;if(z)c('requestAnimationFrame')(function(){if(this._newPrivacyWidgetInstance){this._newPrivacyWidgetInstance.openSelector()}else c('SelectorDeprecated').toggle(c('DOMQuery').scry(r.getComponent('mainprivacywidget').element,'.uiSelector')[0]);}.bind(this));}.bind(this);if(this._newPrivacyWidgetInstance){s.conversionListener=this._newPrivacyWidgetInstance.subscribe('changed',function(y,z){var aa=this._newPrivacyWidgetInstance.getSelectedBaseValue();this._logPrivacyReminderConversion(s,t,aa)}.bind(this))}else s.conversionListener=c('SelectorDeprecated').subscribe('select',function(y,z){if(z.selector==this._privacyWidgetElement.firstChild){var aa=parseInt(c('SelectorDeprecated').getValue(z.option),10);this._logPrivacyReminderConversion(s,t,aa)}}.bind(this));s.events=[c('Event').listen(s.dialog.getContent(),'click',x),c('Event').listen(s.dialog.getContext(),'click',x)]};p.prototype._logPrivacyReminderConversion=function(q,r,s){'use strict';if(r.PRIVACY_CONSTANT.indexOf(s)===-1){if(r.LOG_CONVERSION){var t=c('XPrivacyRemindersImpressionLoggingController').getURIBuilder().setString('type',r.LOG_CONVERSION).getURI();new (c('AsyncRequest'))(t).send()}if(this._newPrivacyWidgetInstance){this._newPrivacyWidgetInstance.unsubscribe(q.conversionListener)}else c('SelectorDeprecated').unsubscribe(q.conversionListener);q.conversionListener=null}};p.prototype.cleanup=function(){'use strict';this._attachmentIsActive=false;if(this._focusListener){this._focusListener.remove();this._focusListener=null}if(this._clickListener){this._clickListener.remove();this._clickListener=null}Object.keys(n).forEach(function(q){var r=this._privacyReminders[q];if(r&&r.dialog&&r.shown){r.dialog.hide();r.events.forEach(function(s){s.remove()});r.events=[];if(r.conversionListener)if(this._newPrivacyWidgetInstance){this._newPrivacyWidgetInstance.unsubscribe(r.conversionListener)}else c('SelectorDeprecated').unsubscribe(r.conversionListener);r.conversionListener=null}}.bind(this));if(this._dragdrop){this._dragdrop.deactivate();this._dragdrop=null}if(this._modulesAreBootloaded){this._tagger.cleanup();if(this._privacyWidgetTags){this._privacyWidgetTags.destroy();this._privacyWidgetTags=null}this._scraper.disable()}if(this._bootloadCallback){this._bootloadCallback.cancel();this._bootloadCallback=null}if(this._dragEnterHandler){this._dragEnterHandler.unsubscribe();this._dragEnterHandler=null}if(this._pagesComposerEntryLogger)this._pagesComposerEntryLogger.unregister();};p.prototype.reset=function(){'use strict';var q=c('Parent').bySelector(this._root,".child_was_focused");if(q)c('CSS').removeClass(q,"child_was_focused");if(this._tagger)this._tagger.reset();if(this._scraper)this._scraper.reset();if(this._newPrivacyWidgetInstance)this._newPrivacyWidgetInstance.informTagsChanged([]);this.getComponent('maininput').instance.setPlaceholder(this._config.mentionsPlaceholder);if(this._config.prefill_text)this._resetPrefill();if(c('ProductionPromptConfig').gk)this._config.mentionsPlaceholder=j._("What's on your mind?");};p.prototype.canSwitchAway=function(){'use strict';return !c('Parent').byClass(this._root,'async_saving')};p.prototype.bootloadAttachments=function(){'use strict';if(this._bootloading)return;this._bootloading=true;c('ComposerXController').getEndpoint(this._root,'/ajax/composerx/attachment/status/bootload/',true)};p.prototype.setBootloadedContent=function(q){'use strict';this._bootloading=false;this._setEveryonePrivacyImpression=!!q.set_everyone_privacy_impression;Object.keys(n).forEach(function(v){var w=q[v+'_privacy_reminder'];if(w)this._privacyReminders[v]={dialog:w};}.bind(this));if(q.markup.privacy_widget){var r=c('DOMQuery').find(this._root,"._etn");c('DOM').setContent(r,q.markup.privacy_widget);var s=c('DOMQuery').find(this._root,"._1dwm");if(s){s.disabled=false;c('CSS').removeClass(s,"_42fr")}}var t=q.placeholders.map(function(v){return v.component_name});c('ComposerXStore').waitForComponents(this._composerID,t,function(){var v=c('DOMQuery').find(this._root,"._3-6"),w=c('DOMQuery').find(this._root,"._3-7");c('DOM').setContent(v,q.markup.tagger_content);c('DOM').setContent(w,q.markup.tagger_icons);if(q.markup.privacy_widget)this._initPrivacyWidgetInstance();c('ComposerXController').addPlaceholders(this._root,this,q.placeholders);this._tagger=q.tagger;c('ComposerXAttachmentButtonBarState').updateMessageBoxBarState(this);this._fullVersion=true;if(this._attachmentIsActive)this._fullInitWithComponents(q);c('ComposerXAttachmentUtils').registerMentionsForComposerCancel(this.getComponent('maininput'),this.getComposerID())}.bind(this));var u=c('XReactComposerLoggingODSController').getURIBuilder().setString('event','bootload_done').setEnum('composer_type',c('ComposerEntryPointRef').LEGACY_FEED).getURI();new (c('AsyncRequest'))(u).send()};p.prototype._getScraperEndpoint=function(){'use strict';return new (c('URI'))('/ajax/composerx/attachment/link/scraper/')};p.prototype._isFocused=function(){'use strict';return c('DOMQuery').contains(this._root,c('getActiveElement')())};p.prototype._isEditing=function(){'use strict';return this._isFocused()||this.getComponent('maininput').instance.hasChanges()};p.prototype._onFocus=function(q){'use strict';if(this._config.is_group_aggregated_story&&q==='area_focus')new (c('AggregatedGroupStoryComposerTypedLogger'))().setEvent('click').log();c('ComposerXMarauderLogger').logEntry(this._composerID);var r=c('DOM').scry(this._root,"._180_")[0];if(c('ProductionPromptConfig').gk&&this._config.stream_context==='home'&&r){c('CSS').hide(c('$')('bootloadComposerPromptPlaceholder'));c('CSS').hide(c('$')('bootloadComposerPromptIcon'));var s=c('$')('mentionsInput');c('DOM').find(s,'textarea.mentionsTextarea').placeholder=j._("What's on your mind?")}this._prefillOnFocus();if(this._fullVersion||this._bootloading)return;c('Arbiter').inform('composer/focus',this._composerID);c('Arbiter').inform('composer/render_pab_nux');this.bootloadAttachments()};p.prototype.allowOGTagPreview=function(){'use strict';return true};p.prototype._sendSetEveryonePrivacyImpression=function(){'use strict';new (c('AsyncRequest'))('/ajax/privacy/reminders/set_everyone_privacy_impression').send()};p.prototype.onEmptyStatusCallback=function(){'use strict';var q=this._getTextArea();c('Focus').set(q);c('XUIError').set({target:q,message:j._("This status update appears to be blank. Please write something or attach a link or photo to update your status."),position:'below',alignh:'left'});new (c('SubscriptionsHandler'))().addSubscriptions(c('Event').listen(this.getRoot(),'success',function(){c('XUIError').clear(this._getTextArea())}.bind(this)),c('Arbiter').subscribe('composer/publish',function(event,r){if(r.composer_id!=this.getComposerID())return;c('XUIError').clear(this._getTextArea())}.bind(this)))};p.setBootloadedContent=function(q,r){'use strict';var s=o[q];if(s)s.setBootloadedContent.call(s,r);};p.onEmptyStatusListener=function(q){'use strict';var r=o[q];if(r)r.onEmptyStatusCallback.call(r);};Object.assign(p.prototype,{_attachmentIsActive:false,_bootloading:false,_modulesAreBootloaded:false,_fullVersion:false,_focusListener:null,_privacyWidgetTags:null,_scraper:null,_dragdrop:null,_bootloadCallback:null,attachmentClassName:"_4j"});f.exports=p}),null);
__d('ComposerXMentionsInputReset',['DOMQuery','Input'],(function a(b,c,d,e,f,g){function h(i){var j=c('DOMQuery').scry(i.element,'textarea.input')[0];i.instance.reset();c('Input').reset(j)}f.exports=h}),null);
__d('ComposerXOGTaggerIconReset',['cx','CSS'],(function a(b,c,d,e,f,g,h){function i(j){c('CSS').removeClass(j.element,"_4-jh");c('CSS').removeClass(j.element,"_509o")}f.exports=i}),null);
__d('ComposerXPrivacyWidgetReset',['Arbiter'],(function a(b,c,d,e,f,g){function h(i){c('Arbiter').inform('Composer/changedtags',{withTags:[],mention:{}})}f.exports=h}),null);
__d('ComposerXTaggerIconReset',['cx','CSS'],(function a(b,c,d,e,f,g,h){function i(j){c('CSS').removeClass(j.element,"_1dsa");c('CSS').removeClass(j.element,"_1dsb");c('CSS').removeClass(j.element,"_509o")}f.exports=i}),null);
__d('ComposerXPostSubmitButtonActions',['cx','Arbiter','CSS'],(function a(b,c,d,e,f,g,h){function i(j){'use strict';c('Arbiter').subscribe('composer/disablePostButton',function(event,k){if(k.disabled){c('CSS').addClass(j,"_2dha")}else c('CSS').removeClass(j,"_2dha");})}f.exports=i}),null);