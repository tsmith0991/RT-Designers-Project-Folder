if (self.CavalryLogger) { CavalryLogger.start_js(["V8t1W"]); }

__d("XAsyncSearchInlineExpandStoryController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/search\/async\/expand_story\/",{story_token:{type:"String"},has_snippet:{type:"Bool",defaultValue:false},unicorn_story_id:{type:"String"},browse_location:{type:"String",defaultValue:"browse_location:browse"}})}),null);
__d("XAsyncSearchStoryModalViewController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/search\/async\/story_modal\/",{browse_location:{type:"String",defaultValue:"browse_location:browse"},story_token:{type:"String",required:true},unicorn_story_id:{type:"String",required:true},__asyncDialog:{type:"Int"}})}),null);
__d('DenseStoryInlineExpansion',['cx','AsyncRequest','BanzaiODS','Bootloader','CSS','DOM','Event','XAsyncSearchInlineExpandStoryController','XAsyncSearchStoryModalViewController','tidyEvent'],(function a(b,c,d,e,f,g,h){'use strict';var i={addListenerForClick:function j(k,l){if(l.storyToken==null)return;var m=l.snippetElem,n=m!=null,o=l.unicornStoryID||'',p=l.browseLocation,q=false;c('tidyEvent')(c('Event').listen(k,'click',function(event){if(q&&!l.showModal)return;q=true;event.preventDefault();event.stopPropagation();if(l.showModal){c('Bootloader').loadModules(["AsyncDialog"],function(s){var t=c('XAsyncSearchStoryModalViewController').getURIBuilder().setString('story_token',l.storyToken).setString('unicorn_story_id',o).setString('browse_location',p).getURI();s.send(new (c('AsyncRequest'))(t))},'DenseStoryInlineExpansion')}else{c('DOM').replace(l.storyElem,l.placeholderElem);var r=c('XAsyncSearchInlineExpandStoryController').getURIBuilder().setString('story_token',l.storyToken).setBool('has_snippet',n).setString('unicorn_story_id',o).setString('browse_location',p).getURI();c('BanzaiODS').bumpEntityKey('search_story_expansion','render_attempt');new (c('AsyncRequest'))().setURI(r).setHandler(function(s){c('DOM').replace(l.placeholderElem,s.payload);if(m!=null)c('CSS').addClass(m,"_1nlc");}).setErrorHandler(function(s){c('BanzaiODS').bumpEntityKey('search_story_expansion','render_failure')}).send()}}))}};f.exports=i}),null);