if (self.CavalryLogger) { CavalryLogger.start_js(["Giow0"]); }

__d('ModuleDependencies',['__debug'],(function a(b,c,d,e,f,g){function h(l,m,n){var o=c('__debug').modulesMap[n],p=c('__debug').deps;if(m[n])return;m[n]=true;if(!o){p[n]&&(l[n]=true);return}if(!o.dependencies||!o.dependencies.length){if(o.waiting)l[n]=true;return}o.dependencies.forEach(function(q){h(l,m,q)})}function i(l){var m={};h(m,{},l);var n=Object.keys(m);n.sort();return n}function j(){var l={loading:{},missing:[]},m={},n=c('__debug').getModules(),o=c('__debug').deps;for(var p in n){var q=n[p];if(q.waiting){var r={};h(r,{},q.id);delete r[q.id];l.loading[q.id]=Object.keys(r);l.loading[q.id].sort();l.loading[q.id].forEach(function(s){if(!(s in n)&&o[s])m[s]=1;})}}l.missing=Object.keys(m);l.missing.sort();return l}var k={getMissing:i,getNotLoadedModules:j};f.exports=k}),null);
__d('ModuleErrorLogger',['Bootloader','ErrorUtils','ModuleDependencies','BanzaiScuba'],(function a(b,c,d,e,f,g){function h(k){if(!k||!k.length)return 0;return k.reduce(function(l,m){return l+m})/k.length}function i(k){if(!k)return [];var l=[];for(var m in k)l.push(k[m]);return l}var j={init:function k(){c('ErrorUtils').addListener(function(l){if(l.name!=='ModuleError')return;var m=c('ModuleDependencies').getNotLoadedModules(),n=Object.keys(m.loading),o=i(c('Bootloader').getLoadingUrls()),p=i(c('Bootloader').getLoadedUrlTimes()),q={};m.missing.forEach(function(t){q[t]=1});var r={};n.forEach(function(t){r[t]=1});var s=new (c('BanzaiScuba'))('module_errors',null,{addAsnFields:true,addPredictedGeographyFields:true,addBrowserFields:true,addMobileDeviceFields:true,addPageFields:true,addUserFields:true});s.addNormal('message',l.message).addInteger('missing_count',m.missing.length).addInteger('loading_count',n.length).addInteger('error_url_count',c('Bootloader').getErrorUrls().length).addTagset('missing_modules',q).addTagset('loading_modules',r).addInteger('mean_url_loading_time',Math.floor(h(o))).addInteger('mean_url_loaded_time',Math.floor(h(p))).post()},true)}};f.exports=j}),null);
__d('ResetScrollOnUnload',['Run'],(function a(b,c,d,e,f,g){var h={disableScrollRestoration:function i(){c('Run').onUnload(function(){window.history.scrollRestoration='manual'})},init:function i(j){c('Run').onUnload(function(){window.history.scrollRestoration='manual';j.style.opacity='0';window.scrollTo(0,0)})}};f.exports=h}),null);
__d('AccessibilityWebAssistiveTechTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear()}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:AccessibilityWebAssistiveTechLoggerConfig',this.$AccessibilityWebAssistiveTechTypedLogger1,c('Banzai').BASIC)};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:AccessibilityWebAssistiveTechLoggerConfig',this.$AccessibilityWebAssistiveTechTypedLogger1,c('Banzai').VITAL)};h.prototype.clear=function(){this.$AccessibilityWebAssistiveTechTypedLogger1={};return this};h.prototype.updateData=function(j){this.$AccessibilityWebAssistiveTechTypedLogger1=babelHelpers['extends']({},this.$AccessibilityWebAssistiveTechTypedLogger1,j);return this};h.prototype.setIndicatedBrowsers=function(j){this.$AccessibilityWebAssistiveTechTypedLogger1.indicated_browsers=c('GeneratedLoggerUtils').serializeVector(j);return this};h.prototype.setIsVirtualCursorAction=function(j){this.$AccessibilityWebAssistiveTechTypedLogger1.is_virtual_cursor_action=j;return this};h.prototype.setVC=function(j){this.$AccessibilityWebAssistiveTechTypedLogger1.vc=j;return this};h.prototype.updateExtraData=function(j){j=c('nullthrows')(c('GeneratedLoggerUtils').serializeMap(j));c('GeneratedLoggerUtils').checkExtraDataFieldNames(j,i);this.$AccessibilityWebAssistiveTechTypedLogger1=babelHelpers['extends']({},this.$AccessibilityWebAssistiveTechTypedLogger1,j);return this};h.prototype.addToExtraData=function(j,k){var l={};l[j]=k;return this.updateExtraData(l)};var i={indicated_browsers:true,is_virtual_cursor_action:true,vc:true};f.exports=h}),null);
__d('AccessibilityWebVirtualCursorClickLogger',['AccessibilityWebAssistiveTechTypedLogger','VirtualCursorStatus'],(function a(b,c,d,e,f,g){var h={init:function i(j){j.forEach(function(k){c('VirtualCursorStatus').add(k,this._log)}.bind(this),this)},_log:function i(j,k){var l=arguments.length<=2||arguments[2]===undefined?false:arguments[2];if(j)new (c('AccessibilityWebAssistiveTechTypedLogger'))().setIndicatedBrowsers(k).setIsVirtualCursorAction(l).log();}};f.exports=h}),null);
__d('NavigationMenubarInteractionsTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear()}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:NavigationMenubarInteractionsLoggerConfig',this.$NavigationMenubarInteractionsTypedLogger1,c('Banzai').BASIC)};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:NavigationMenubarInteractionsLoggerConfig',this.$NavigationMenubarInteractionsTypedLogger1,c('Banzai').VITAL)};h.prototype.clear=function(){this.$NavigationMenubarInteractionsTypedLogger1={};return this};h.prototype.updateData=function(j){this.$NavigationMenubarInteractionsTypedLogger1=babelHelpers['extends']({},this.$NavigationMenubarInteractionsTypedLogger1,j);return this};h.prototype.setAction=function(j){this.$NavigationMenubarInteractionsTypedLogger1.action=j;return this};h.prototype.setTargetItem=function(j){this.$NavigationMenubarInteractionsTypedLogger1.target_item=j;return this};h.prototype.updateExtraData=function(j){j=c('nullthrows')(c('GeneratedLoggerUtils').serializeMap(j));c('GeneratedLoggerUtils').checkExtraDataFieldNames(j,i);this.$NavigationMenubarInteractionsTypedLogger1=babelHelpers['extends']({},this.$NavigationMenubarInteractionsTypedLogger1,j);return this};h.prototype.addToExtraData=function(j,k){var l={};l[j]=k;return this.updateExtraData(l)};var i={action:true,target_item:true};f.exports=h}),null);
__d('NavigationAssistantController',['csx','cx','fbt','AccessibilityConfig','AsyncDialog','AsyncRequest','CSS','DOM','DOMEventListener','DOMTraverser','DOMQuery','Event','Focus','Menu','MenuItem','NavigationMenubarInteractionsTypedLogger','KeyEventController','KeyboardShortcuts','RTLKeys','PageTransitions','TabbableElements','ge','getActiveElement','getOrCreateDOMID','setImmediate'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=['main','banner','search','navigation','region','complementary','form','contentinfo'],l={main:function n(o){return o?j._("Main: {section name}",[j.param('section name',o)]):j._("Main section")},banner:function n(o){return j._("{section name} banner",[j.param('section name',o)])},search:function n(o){return j._("Search {section name}",[j.param('section name',o)])},navigation:function n(o){return o?j._("Navigate {section name}",[j.param('section name',o)]):j._("Navigation")},region:function n(o){return o},complementary:function n(o){return o?o:j._("Complementary information")},form:function n(o){return j._("{section name} form",[j.param('section name',o)])},contentinfo:function n(o){return j._("{section name} footer",[j.param('section name',o)])}},m={init:function n(o,p,q,r){this._banner=o;this._menubar=p;this._sectionsMenu=q;this._accessibilityMenu=r;this._shortcutMenuItem=this._accessibilityMenu.getItemAt(0);this._menubarMenus=[{menu:this._sectionsMenu,logName:'page_sections'},{menu:this._accessibilityMenu,logName:'accessibility'}];if(document.body)c('CSS').addClass(document.body,'hasAXNavMenubar');this._shown=false;this._items=[];this._hotKeyTrigger=null;this._menubarMenuItems=c('DOMQuery').scry(this._menubar,'[role="button"]');this._menubarMenuItems.forEach(function(s){s.setAttribute('role','menuitem')});this._activeItem=this._menubarMenuItems[0];this._activeItemIndex=0;this._setupEvents()},_setupEvents:function n(){this._menubar.addEventListener('keyup',this._checkShow.bind(this));this._menubar.addEventListener('keydown',this._checkHide.bind(this));this._menubar.addEventListener('keyup',this._checkMenuSwitch.bind(this));this._menubarMenus.forEach(function(o){o.menu.subscribe('show',this._menuShown.bind(this,o));o.menu.subscribe('hide',this._menuHidden.bind(this,o));o.menu.subscribe('done',this._checkBlur.bind(this));o.menu.getRoot().addEventListener('keyup',this._checkMenuSwitch.bind(this))}.bind(this));c('DOMEventListener').add(document,'click',this._checkClickBlur.bind(this));this._sectionsMenu.subscribe('focus',this._highlightFocused.bind(this));this._sectionsMenu.subscribe('blur',this._unhighlightFocused.bind(this));this._accessibilityMenu.subscribe('itemclick',this._checkShortcutsShow.bind(this));if(c('AccessibilityConfig').a11yNavHotkey){c('DOMEventListener').add(document,'keydown',this._checkHotKey.bind(this));c('DOMEventListener').add(document,'keypress',this._trackHotKeyPress.bind(this));c('DOMEventListener').add(document,'keyup',this._unsetHotKey.bind(this))}},_checkShow:function n(o){if(c('DOM').contains(this._menubar,o.target))this._showMenubar();},_checkHide:function n(o){var p=c('Event').getKeyCode(o);if(p===c('RTLKeys').ESC){this._hideMenubar();this._returnFocus();return}if(p===c('RTLKeys').TAB)c('setImmediate')(function(){this._hideMenubar()}.bind(this));},_returnFocus:function n(){if(this._hotKeyTrigger){c('Focus').set(this._hotKeyTrigger,true);this._hotKeyTrigger=null}else{var o=this._banner.nextElementSibling;if(!c('TabbableElements').isTabbable(o))o=c('DOMTraverser').nextFilteredNode(document.body,o,c('TabbableElements').isTabbable);c('Focus').set(o)}},_setActiveItem:function n(o){if(o<0||o>=this._menubarMenuItems.length)return;this._activeItem.setAttribute('tabindex','-1');this._activeItem=this._menubarMenuItems[o];this._activeItemIndex=o;this._activeItem.setAttribute('tabindex','0')},_checkMenuSwitch:function n(event){var o=c('Event').getKeyCode(event),p=this._menubarMenus.length,q=this._activeItemIndex;switch(o){case c('RTLKeys').getLeft():q=this._activeItemIndex===0?p-1:this._activeItemIndex-1;break;case c('RTLKeys').getRight():q=this._activeItemIndex===p-1?0:this._activeItemIndex+1;break;default:return false;}if(this._showingMenu)this._showingMenu.done();this._setActiveItem(q);setTimeout(function(){c('Focus').set(this._activeItem,true)}.bind(this),0);return true},_menuShown:function n(o){this._ignoreBlur=true;this._showingMenu=o.menu;this._logEvent('menu_shown',o.logName)},_menuHidden:function n(o){this._ignoreBlur=false;if(this._showingMenu===o.menu)this._showingMenu=null;},_checkClickBlur:function n(){if(!this._ignoreBlur)this._checkBlur();},_checkBlur:function n(){var o=c('getActiveElement')();if(this._shown&&o&&!c('DOM').contains(this._menubar,o)&&!this._ignoreBlur)this._hideMenubar();if(this._highlighted){c('CSS').removeClass(this._highlighted,"_1toc");this._highlighted=null}},_highlightFocused:function n(o,p){if(this._highlighted)c('CSS').removeClass(this._highlighted,"_1toc");this._highlighted=c('ge')(p.item.getValue());if(this._highlighted)c('CSS').addClass(this._highlighted,"_1toc");},_unhighlightFocused:function n(o,p){if(this._highlighted)c('CSS').removeClass(this._highlighted,"_1toc");},_checkHotKey:function n(o){var p=c('Event').getKeyCode(o),q=o.altKey;if(!c('AccessibilityConfig').a11yNavHotkeyFromInputs&&!c('KeyEventController').filterEventTargets(o,'keydown'))return;if(p===c('RTLKeys').FORWARD_SLASH&&q){var r=c('getActiveElement')();this._listenHotKeyPress=true;if(this._shown){this._hideMenubar();this._sectionsMenu.done();this._accessibilityMenu.done();setTimeout(function(){this._returnFocus()}.bind(this),0);return}if(r&&this._isInDialog(r))return;this._hotKeyTrigger=r;this._showMenubar();c('Focus').set(this._activeItem,true);this._logEvent('hotkey_triggered','menubar');return}this._listenHotKeyPress=false;if(this._shown)this._checkHide(o);},_unsetHotKey:function n(o){this._listenHotKeyPress=false},_trackHotKeyPress:function n(o){if(this._listenHotKeyPress){var p=c('Event').getKeyCode(o);this._logEvent('hotkey_char',''+p)}},_isInDialog:function n(o){var p=o;while(p&&p!==document&&p.getAttribute('role')!=='dialog')p=p.parentNode;return p!==document},_hideMenubar:function n(){if(!this._shown)return;this._shown=false;this._cleanupSectionsMenu();c('KeyboardShortcuts').popLayer();c('CSS').addClass(this._banner,"_1toe");this._setActiveItem(0);setTimeout(function(){c('Event').fire(window,'scroll')},350)},_showMenubar:function n(){if(this._shown)return;this._shown=true;this._setupMenus();this._ignoreBlur=false;c('KeyboardShortcuts').pushLayer();if(c('CSS').matchesSelector(this._banner.nextElementSibling,"._3d9x")){c('CSS').addClass(this._banner,"_1tof")}else c('CSS').removeClass(this._banner,"_1tof");c('CSS').removeClass(this._banner,"_1toe");setTimeout(function(){c('Event').fire(window,'scroll')},50);this._logEvent('shown','menubar')},_addMenuItem:function n(o,p,q){var r=c('Menu').buildItemFromData({ctor:c('MenuItem'),label:o,selected:false,value:p,onclick:function(s){setTimeout(function(){c('Focus').set(c('ge')(q),true)},0);this._logEvent('selected_item',o)}.bind(this)});this._sectionsMenu.addItem(r);this._items.push(r)},_getLandmarkSections:function n(o){var p=[],q=[];o.forEach(function(r){var s=r.getAttribute('role');if(s==='main'){p.push(r)}else if(k.indexOf(s)>-1)q.push(r);});return p.concat(q)},_addSectionItems:function n(o){o.forEach(function(p){if(!c('TabbableElements').isVisible(p)||!p.offsetHeight||!p.offsetWidth)return;var q=p.getAttribute('role');if(!q||!Object.prototype.hasOwnProperty.call(l,q))return;var r=l[q](p.getAttribute('aria-label')),s=p;if(q==='search'||q==='region'||q==='form'){var t=c('DOMQuery').scry(p,".navigationFocus");if(t.length){s=t[0];if(!c('TabbableElements').isTabbable(s)&&c('TabbableElements').find(s).length)s=c('TabbableElements').find(s)[0];}}if(r)this._addMenuItem(r,c('getOrCreateDOMID')(p),c('getOrCreateDOMID')(s));}.bind(this))},_setupMenus:function n(){this._setupSectionsMenu();this._setupAccessibilityMenu()},_setupSectionsMenu:function n(){var o=c('DOMQuery').scry(document.body,'[role]'),p=this._getLandmarkSections(o);this._addSectionItems(p)},_cleanupSectionsMenu:function n(){while(this._items.length)this._sectionsMenu.removeItem(this._items.pop());},_setupAccessibilityMenu:function n(){if(c('PageTransitions').getMostRecentURI().getPath()==='/'){var o=this._accessibilityMenu.getItemAt(0);if(o!==this._shortcutMenuItem)this._accessibilityMenu.addItemBefore(this._shortcutMenuItem,o);}else this._accessibilityMenu.removeItem(this._shortcutMenuItem);},_logEvent:function n(o,p){new (c('NavigationMenubarInteractionsTypedLogger'))().setAction(o).setTargetItem(p).log()},_checkShortcutsShow:function n(o,p){if(p.item.getValue()==='key_shortcuts'){var q=this._getHelpDialogRequest();if(q){q.setRelativeTo(c('getActiveElement')());c('AsyncDialog').send(q);this._hideMenubar()}}},_getHelpDialogRequest:function n(){if(!this._dialogRequest){this._dialogRequest=new (c('AsyncRequest'))('/ajax/keyboard_shortcuts');this._dialogRequest.setReadOnly(true)}else if(this._dialogRequest.transport)return null;return this._dialogRequest}};f.exports=m}),null);
__d('BlueBarFocusListener',['CSS','Deferred','Event'],(function a(b,c,d,e,f,g){var h='f_key',i='f_click',j=null,k=function r(){j=null};function l(r){c('CSS').removeClass(r,h);c('CSS').removeClass(r,i)}function m(r){if(j)j.reject();j=new (c('Deferred'))();j.then(function(s){l(r);c('CSS').addClass(r,s)}).done(k,k)}function n(){if(j)j.resolve(h);}function o(r){if(j)j.reject();c('CSS').removeClass(r,h);c('CSS').addClass(r,i)}function p(r){return function(event){r(event.getTarget())}}var q={listen:function r(s){if(!s)return;c('Event').listen(s,'focusout',p(l));c('Event').listen(s,'focusin',p(m));c('Event').listen(s,'click',p(o));c('Event').listen(s,'keyup',n)}};f.exports=q}),null);
__d('RoyalBluebar',['cx','Arbiter','CSS','Event','Run','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h){var i={_subscriptionHandler:null,_getSubscriptionHandler:function j(){if(!this._subscriptionHandler){this._subscriptionHandler=new (c('SubscriptionsHandler'))();c('Run').onUnload(function(){this._subscriptionHandler.release();this._subscriptionHandler=null}.bind(this))}return this._subscriptionHandler},fixOnScroll:function j(k){this._getSubscriptionHandler().addSubscriptions(c('Arbiter').subscribe('bluebarFixedBehaviorController/isfixed',function(l,m){var n="_50ti",o="_33rf";if(k.firstChild instanceof Element)c('CSS').conditionClass(k.firstChild,n,m);if(k.firstChild instanceof Element)c('CSS').conditionClass(k.firstChild,o,!m);}))},informOnClick:function j(k){this._getSubscriptionHandler().addSubscriptions(c('Event').listen(k,'click',function(event){if(c('Arbiter').inform('BlueBar/homeClick',event)===false)event.preventDefault();}))}};f.exports=i}),null);
__d('BootloaderEventsTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear()}h.prototype.log=function(){c('GeneratedLoggerUtils').log('bootloader_events:BootloaderEventsLoggerConfig',this.$BootloaderEventsTypedLogger1,c('Banzai').BASIC)};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('bootloader_events:BootloaderEventsLoggerConfig',this.$BootloaderEventsTypedLogger1,c('Banzai').VITAL)};h.prototype.clear=function(){this.$BootloaderEventsTypedLogger1={};return this};h.prototype.updateData=function(j){this.$BootloaderEventsTypedLogger1=babelHelpers['extends']({},this.$BootloaderEventsTypedLogger1,j);return this};h.prototype.setAllResourcesCount=function(j){this.$BootloaderEventsTypedLogger1.all_resources_count=j;return this};h.prototype.setAllResourcesDownloaded=function(j){this.$BootloaderEventsTypedLogger1.all_resources_downloaded=j;return this};h.prototype.setAsyncResourcesCount=function(j){this.$BootloaderEventsTypedLogger1.async_resources_count=j;return this};h.prototype.setAsyncResourcesDownloaded=function(j){this.$BootloaderEventsTypedLogger1.async_resources_downloaded=j;return this};h.prototype.setBlEndpointMode=function(j){this.$BootloaderEventsTypedLogger1.bl_endpoint_mode=j;return this};h.prototype.setBlSampleRate=function(j){this.$BootloaderEventsTypedLogger1.bl_sample_rate=j;return this};h.prototype.setBlockingResourcesCount=function(j){this.$BootloaderEventsTypedLogger1.blocking_resources_count=j;return this};h.prototype.setBlockingResourcesDownloaded=function(j){this.$BootloaderEventsTypedLogger1.blocking_resources_downloaded=j;return this};h.prototype.setCavalryBlCohort=function(j){this.$BootloaderEventsTypedLogger1.cavalry_bl_cohort=j;return this};h.prototype.setCavalryCohort=function(j){this.$BootloaderEventsTypedLogger1.cavalry_cohort=j;return this};h.prototype.setComponents=function(j){this.$BootloaderEventsTypedLogger1.components=c('GeneratedLoggerUtils').serializeVector(j);return this};h.prototype.setDuration=function(j){this.$BootloaderEventsTypedLogger1.duration=j;return this};h.prototype.setErrCount=function(j){this.$BootloaderEventsTypedLogger1.err_count=j;return this};h.prototype.setFirstIdenticalRequest=function(j){this.$BootloaderEventsTypedLogger1.first_identical_request=j;return this};h.prototype.setHasNewComponent=function(j){this.$BootloaderEventsTypedLogger1.has_new_component=j;return this};h.prototype.setIsEmployee=function(j){this.$BootloaderEventsTypedLogger1.is_employee=j;return this};h.prototype.setMsSinceNavstart=function(j){this.$BootloaderEventsTypedLogger1.ms_since_navstart=j;return this};h.prototype.setParentLid=function(j){this.$BootloaderEventsTypedLogger1.parent_lid=j;return this};h.prototype.setPkgCohort=function(j){this.$BootloaderEventsTypedLogger1.pkg_cohort=j;return this};h.prototype.setRef=function(j){this.$BootloaderEventsTypedLogger1.ref=j;return this};h.prototype.setRequestPath=function(j){this.$BootloaderEventsTypedLogger1.request_path=j;return this};h.prototype.setRetries=function(j){this.$BootloaderEventsTypedLogger1.retries=j;return this};h.prototype.setSvnRev=function(j){this.$BootloaderEventsTypedLogger1.svn_rev=j;return this};h.prototype.setTimesliceContext=function(j){this.$BootloaderEventsTypedLogger1.timeslice_context=j;return this};h.prototype.setVC=function(j){this.$BootloaderEventsTypedLogger1.vc=j;return this};h.prototype.setWeight=function(j){this.$BootloaderEventsTypedLogger1.weight=j;return this};var i={all_resources_count:true,all_resources_downloaded:true,async_resources_count:true,async_resources_downloaded:true,bl_endpoint_mode:true,bl_sample_rate:true,blocking_resources_count:true,blocking_resources_downloaded:true,cavalry_bl_cohort:true,cavalry_cohort:true,components:true,duration:true,err_count:true,first_identical_request:true,has_new_component:true,is_employee:true,ms_since_navstart:true,parent_lid:true,pkg_cohort:true,ref:true,request_path:true,retries:true,svn_rev:true,timeslice_context:true,vc:true,weight:true};f.exports=h}),null);
__d('BootloaderLoggerUtil',['Arbiter','Bootloader','BootloaderEventsTypedLogger','CurrentUser','ScriptPath','SiteData','performanceNavigationStart'],(function a(b,c,d,e,f,g){var h=null,i={initLogging:function j(k){if(h)return;h=c('Arbiter').subscribe(c('Bootloader').Events.BOOTLOAD,function(l,m){var n=m.start_time,o=babelHelpers.objectWithoutProperties(m,['start_time']),p=Math.round(n-c('performanceNavigationStart')());new (c('BootloaderEventsTypedLogger'))().setMsSinceNavstart(p).setCavalryCohort(k.cavalry_cohort).setPkgCohort(c('SiteData').pkg_cohort).setWeight(k.sample_rate).setIsEmployee(c('CurrentUser').isEmployee()).setSvnRev(c('SiteData').client_revision).setBlEndpointMode(c('SiteData').be_mode).setRequestPath(c('ScriptPath').getScriptPath()).setCavalryBlCohort(k.cavalry_bl_cohort).setBlSampleRate(k.bl_sample_rate).setParentLid(k.parent_lid).updateData(o).log()})}};f.exports=i}),null);
__d("NotificationSeenFilter",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ALL:"all",SEEN_ONLY:"seen_only",UNSEEN_ONLY:"unseen_only",READ_ONLY:"read_only",UNREAD_ONLY:"unread_only",SEEN_BUT_UNREAD_ONLY:"seen_unread_only"})}),null);
__d('NotificationSeenState',['NotificationConstants','NotificationSeenFilter','NotificationUpdates','createObjectFrom','ifRequired','objectValues'],(function a(b,c,d,e,f,g){var h=1,i=2,j=0,k=h,l=3,m=c('NotificationConstants').PayloadSourceType.INITIAL_LOAD,n={UNSEEN_AND_UNREAD:j,SEEN_BUT_UNREAD:k,SEEN_AND_READ:l},o={};c('ifRequired')('NotificationStore',function(t){var u=t.getAllForAllEndpoints(),v=c('objectValues')(u),w=q(v);Object.keys(w).forEach(function(x){var y=w[x];o[x]=y})});function p(t){var u=[],v=[];Object.keys(t).forEach(function(w){var x=t[w],y=o[w];o[w]=x;if(y===undefined){u.push(w);v.push(w);return}var z=y^x;if(z&h)u.push(w);if(z&i)v.push(w);});u.length&&c('NotificationUpdates').didUpdateSeenState(u);v.length&&c('NotificationUpdates').didUpdateReadState(v)}c('NotificationUpdates').subscribe('update-notifications',function(t,u){var v=u.nodes;if(!v||!v.length)return;var w=u.payloadsource,x=c('NotificationConstants').PayloadSourceType,y=w==x.ENDPOINT,z=v.filter(function(ba){var ca=ba.alert_id;return !y||o[ca]===undefined}),aa=q(z);p(aa)});function q(t){var u={};t.forEach(function(v){if(v.seen_state)u[v.alert_id]=n[v.seen_state];});return u}c('NotificationUpdates').subscribe('update-seen',function(t,u){if(!u.seenState)return;var v=[],w={};Object.keys(u.seenState).forEach(function(y){if(!u.seenState||!u.seenState[y]){v.push(y);return}var z=o[y];if(z!==undefined)w[y]=z|h;});var x=babelHelpers['extends']({},c('createObjectFrom')(v,j),w);p(x)});c('NotificationUpdates').subscribe('update-read',function(t,u){if(!u.readState)return;var v=[],w={};Object.keys(u.readState).forEach(function(y){if(!u.readState)return;var z=u.readState[y];if(z){v.push(y);return}var aa=o[y];if(aa!==undefined){w[y]=aa&~i}else if(u.payloadsource==m)w[y]=k;});var x=babelHelpers['extends']({},c('createObjectFrom')(v,l),w);p(x)});function r(t){var u=o[t];return u}var s={isRead:function t(u){return r(u)===l},isSeen:function t(u){return r(u)!==j},getUnseenCount:function t(){return s.getUnseenIDs().length},getUnseenIDs:function t(){return Object.keys(o).filter(function(u){return o[u]===j})},getUnreadCount:function t(){return s.getUnreadIDs().length},getUnreadIDs:function t(){return Object.keys(o).filter(function(u){return o[u]!==l})},validateFilter:function t(u,v){switch(v){case c('NotificationSeenFilter').SEEN_ONLY:return s.isSeen(u);case c('NotificationSeenFilter').UNSEEN_ONLY:return !s.isSeen(u);case c('NotificationSeenFilter').READ_ONLY:return s.isRead(u);case c('NotificationSeenFilter').UNREAD_ONLY:return !s.isRead(u);case c('NotificationSeenFilter').SEEN_BUT_UNREAD_ONLY:return s.isSeen(u)&&!s.isRead(u);default:return true;}}};f.exports=s}),6);
__d('NotificationJewelControllerModuleLoader',['JSResource','NotificationSeenState','NotificationStore','NotificationUpdates'],(function a(b,c,d,e,f,g){c('NotificationSeenState');c('NotificationStore');c('NotificationUpdates');f.exports=c('JSResource')('NotificationJewelController').__setRef('NotificationJewelControllerModuleLoader')}),null);
__d('NotificationComponentsBootloader',['Promise','JSResource','NotificationJewelControllerModuleLoader'],(function a(b,c,d,e,f,g){'use strict';var h=[c('JSResource')('NotificationList.react').__setRef('NotificationComponentsBootloader'),c('JSResource')('NotificationJewelList.react').__setRef('NotificationComponentsBootloader'),c('NotificationJewelControllerModuleLoader')];function i(){var j=h.map(function(k){return k.load()});return c('Promise').all(j)}f.exports={load:i}}),null);
__d('NotificationJewelHeaderController',['DOM','Event','NotificationSeenState','NotificationUpdates','NotificationUserActions'],(function a(b,c,d,e,f,g){function h(i,j){'use strict';c('Event').listen(i,'click',function(){c('NotificationUserActions').markAllNotificationsAsRead()});c('NotificationUpdates').subscribe('read-state-updated',function(){if(j)c('DOM').setContent(j,c('NotificationSeenState').getUnreadCount());})}f.exports=h}),null);
__d('NotificationJewelPerformanceTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear()}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:NotificationJewelPerformanceLoggerConfig',this.$NotificationJewelPerformanceTypedLogger1,c('Banzai').BASIC)};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:NotificationJewelPerformanceLoggerConfig',this.$NotificationJewelPerformanceTypedLogger1,c('Banzai').VITAL)};h.prototype.clear=function(){this.$NotificationJewelPerformanceTypedLogger1={};return this};h.prototype.updateData=function(j){this.$NotificationJewelPerformanceTypedLogger1=babelHelpers['extends']({},this.$NotificationJewelPerformanceTypedLogger1,j);return this};h.prototype.setBadgeCurrentCount=function(j){this.$NotificationJewelPerformanceTypedLogger1.badge_current_count=j;return this};h.prototype.setBadgeInitialCount=function(j){this.$NotificationJewelPerformanceTypedLogger1.badge_initial_count=j;return this};h.prototype.setClientSessionID=function(j){this.$NotificationJewelPerformanceTypedLogger1.client_session_id=j;return this};h.prototype.setClientTimestamp=function(j){this.$NotificationJewelPerformanceTypedLogger1.client_timestamp=j;return this};h.prototype.setEagerLoadTriggerAndDelay=function(j){this.$NotificationJewelPerformanceTypedLogger1.eager_load_trigger_and_delay=j;return this};h.prototype.setEventName=function(j){this.$NotificationJewelPerformanceTypedLogger1.event_name=j;return this};h.prototype.setVC=function(j){this.$NotificationJewelPerformanceTypedLogger1.vc=j;return this};var i={badge_current_count:true,badge_initial_count:true,client_session_id:true,client_timestamp:true,eager_load_trigger_and_delay:true,event_name:true,vc:true};f.exports=h}),null);
__d('NotificationJewelInteractionLogging',['NotificationJewelPerformanceTypedLogger','guid'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('NotificationJewelPerformanceTypedLogger'));i=h&&h.prototype;j.prototype.log=function(){this.setClientSessionID(j.$NotificationJewelPerformanceTypedLoggerWithSession1);i.log.call(this)};function j(){h.apply(this,arguments)}j.$NotificationJewelPerformanceTypedLoggerWithSession1=c('guid')();function k(n){new j().setEventName(n.eventName).setClientTimestamp(n.timestamp).log()}function l(n){var o=n.trigger,p=n.eagerLoadDelayInMs,q=babelHelpers.objectWithoutProperties(n,['trigger','eagerLoadDelayInMs']),r=o+':'+p;new j().setEventName(q.eventName).setClientTimestamp(q.timestamp).setEagerLoadTriggerAndDelay(r).log()}var m={logDataEagerLoad:function n(o){if(o.eventName==='data_eager_load_trigger'){l(o)}else k(o);},logJsBootload:function n(o){if(o.eventName==='js_bootload_trigger'){l(o)}else k(o);},logFirstJewelClick:function n(o){new j().setEventName('first_jewel_click').setClientTimestamp(o.timestamp).setBadgeInitialCount(o.badgeInitialCount).setBadgeCurrentCount(o.badgeCurrentCount).log()},logJewelListComponentEvent:k};f.exports=m}),null);
__d('NotificationUpNext',['Bootloader','DOMQuery','NotificationsDefaultEndpointURI','QE2Logger','React','ReactDOM','Toggler','ge','ifRequired'],(function a(b,c,d,e,f,g){'use strict';var h='fbNotificationsJewel',i={initialize:function j(k){var l=arguments.length<=1||arguments[1]===undefined?{endpointURI:c('NotificationsDefaultEndpointURI')}:arguments[1];c('Bootloader').loadModules(["NotificationUpNextStore","NotificationUpNextDialog.react"],function(m,n){if(k.shouldExpose&&k.universeName)m.subscribe(function(){c('QE2Logger').logExposureForUser(k.universeName)});var o=k.data;if(!o)return;m.setMaxAge(o.maxAgeInSecs);m.setTriggerAction(o.triggerAction);var p=c('ge')(h),q=c('DOMQuery').scry(p,'.jewelButton')[0];c('ReactDOM').render(c('React').createElement(n,{context:q,endpointConfig:l,footer:o.footerText,hideDelay:o.hideDelayInMs,maxImpressions:o.maxImpressions,onFooterClick:function r(){c('Toggler').show(p);c('ifRequired')('ClientChromeStore',function(s){s.dispatch({type:'UPDATE_ACTIVE_FLYOUT',data:'notification'})})},showDelay:o.showDelayInMs,title:o.titleText}),document.createElement('div'))},'NotificationUpNext')}};f.exports=i}),null);
__d('NotificationJewelListController',['NotificationComponentsBootloader','NotificationListConfig','NotificationUpNext','React','ReactDOM'],(function a(b,c,d,e,f,g){var h=c('NotificationListConfig').numNotificationsPerPage,i=c('NotificationListConfig').upNextConfig,j=null,k=null,l=false;function m(n,o){'use strict';this.$NotificationJewelListController1=false;this.$NotificationJewelListController2=false;this.$NotificationJewelListController3=n;this.$NotificationJewelListController4=o;this.$NotificationJewelListController5()}m.prototype.open=function(){'use strict';this.$NotificationJewelListController1=true;this.$NotificationJewelListController6()};m.prototype.pause=function(){'use strict';this.$NotificationJewelListController2=true;this.$NotificationJewelListController6()};m.prototype.unpause=function(){'use strict';this.$NotificationJewelListController2=false;this.$NotificationJewelListController6()};m.prototype.$NotificationJewelListController5=function(){'use strict';if(l)return;l=true;if(i)c('NotificationUpNext').initialize(i,{endpointURI:this.$NotificationJewelListController4.endpoint});};m.prototype.$NotificationJewelListController6=function(){'use strict';if(!j||!k){c('NotificationComponentsBootloader').load().done(function(n){var o=n[0],p=n[1];j=o;k=p;this.$NotificationJewelListController7()}.bind(this))}else this.$NotificationJewelListController7();};m.prototype.$NotificationJewelListController7=function(){'use strict';if(!j||!k)return;c('ReactDOM').render(c('React').createElement(j,{hasEverBeenOpened:this.$NotificationJewelListController1,paused:this.$NotificationJewelListController2,tracking:this.$NotificationJewelListController4.tracking,negativeTracking:this.$NotificationJewelListController4.negativeTracking,shortenTimestamp:this.$NotificationJewelListController4.shortenTimestamp,businessID:this.$NotificationJewelListController4.businessID,maxHeight:this.$NotificationJewelListController4.maxHeight,useChevron:this.$NotificationJewelListController4.useChevron,chevronType:this.$NotificationJewelListController4.chevronType,numPerPage:h,listRenderer:k,upsell:this.$NotificationJewelListController4.upsell||null,endpoint:this.$NotificationJewelListController4.endpoint}),this.$NotificationJewelListController3)};f.exports=m}),null);
__d("XBrowserPushDisabledController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/notifications\/client\/push\/disabled\/",{})}),null);
__d("XBrowserPushXOutController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/notifications\/client\/push\/xout\/",{})}),null);
__d("XServiceWorkerSessionChangeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/service_workers\/session\/persist\/",{})}),null);
__d('BrowserPushSessionChange.react',['cx','fbt','ix','AsyncRequest','BanzaiLogger','Image.react','ImageBlock.react','LayerFadeOnHide','React','ReloadPage','XBrowserPushDisabledController','XBrowserPushXOutController','XServiceWorkerSessionChangeController','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogFooter.react','XUIDialogOkayButton.react','XUIDialogTitle.react','XUISpinner.react','XUIText.react'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(){var o,p;'use strict';for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.state={dialogShown:true,spin:false},this.$BrowserPushSessionChange1=function(t){if(t)return;this.setState({dialogShown:false});this.$BrowserPushSessionChange2('session_keep');var u=c('XServiceWorkerSessionChangeController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(u).setMethod('POST').setData({app_id:this.props.push.appID}).setAllowCrossPageTransition(true).setHandler(function(v){this.props.onHide()}.bind(this)).send()}.bind(this),this.$BrowserPushSessionChange3=function(){this.setState({spin:true});this.$BrowserPushSessionChange2('session_uninstall');this.$BrowserPushSessionChange2('xout');var t=c('XBrowserPushXOutController').getURIBuilder().getURI(),u=function(){this.props.push.unregisterPushAndSW(c('XBrowserPushDisabledController'),c('AsyncRequest')).done(function(v){c('ReloadPage').now()})}.bind(this);new (c('AsyncRequest'))().setURI(t).setMethod('POST').setHandler(u).setAllowCrossPageTransition(true).send()}.bind(this),p}n.prototype.$BrowserPushSessionChange2=function(event){'use strict';var o={event:event,appid:this.props.push.appID,surface:'session_change'};c('BanzaiLogger').log('BrowserPushLoggerConfig',o)};n.prototype.componentDidMount=function(){'use strict';this.$BrowserPushSessionChange2('session_change_prompt')};n.prototype.render=function(){'use strict';if(!this.state.dialogShown)return null;var o=j("92724");return c('React').createElement(c('XUIDialog.react'),{shown:true,behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},onToggle:this.$BrowserPushSessionChange1,width:445,key:'dialog'},c('React').createElement(c('XUIDialogTitle.react'),null,i._("Desktop Notifications Are On")),c('React').createElement(c('XUIDialogBody.react'),null,this.state.spin?c('React').createElement(c('XUISpinner.react'),{size:'large'}):c('React').createElement(c('ImageBlock.react'),{spacing:'medium'},c('React').createElement(c('Image.react'),{src:o,alt:i._("Desktop Notifications Are On")}),c('React').createElement('div',null,c('React').createElement('div',{className:"_3-8h"},c('React').createElement(c('XUIText.react'),{size:'large'},i._("When you get a new notification, you'll see it in the corner of your screen."))),c('React').createElement('div',{className:"_3-8h"},c('React').createElement(c('XUIText.react'),{size:'small'},i._("To be sure you get notifications, you'll now stay logged into Facebook on this computer. If you're using a public computer or don't want to stay logged in, click Undo to turn off desktop notifications.")))))),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{action:'button',label:i._("Undo"),onClick:this.$BrowserPushSessionChange3}),c('React').createElement(c('XUIDialogOkayButton.react'),{use:'confirm',action:'cancel'})))};n.propTypes={onHide:m.func.isRequired,push:m.object.isRequired};f.exports=n}),null);
__d('MockChromeBrowserNotification.react',['cx','fbt','ix','DOMContainer.react','Image.react','React','WorkModeConfig','isNode','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;k=babelHelpers.inherits(m,c('React').Component);l=k&&k.prototype;m.prototype.render=function(){var n=c('isNode')(this.props.message)?c('React').createElement(c('DOMContainer.react'),null,this.props.message):this.props.message;return c('React').createElement('section',{className:c('joinClasses')(this.props.className,"_257o")},c('React').createElement('span',{className:"_61kd"}),c('React').createElement(c('Image.react'),{className:"_ega",draggable:false,src:this.props.image}),c('React').createElement('div',{className:"_egb"},c('React').createElement('h3',null,c('WorkModeConfig').is_work_user?'Workplace':'Facebook'),c('React').createElement('p',null,n),c('React').createElement('cite',null,window.location.hostname)))};function m(){k.apply(this,arguments)}m.defaultProps={message:i._("You have new notifications."),image:j("76304")};f.exports=m}),null);
__d('MockEdgeBrowserNotification.react',['cx','fbt','ix','DOMContainer.react','Image.react','React','WorkModeConfig','isNode','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;k=babelHelpers.inherits(m,c('React').Component);l=k&&k.prototype;m.prototype.render=function(){var n=c('isNode')(this.props.message)?c('React').createElement(c('DOMContainer.react'),null,this.props.message):this.props.message,o=i._("Microsoft Edge");return c('React').createElement('section',{className:c('joinClasses')(this.props.className,"_2eed")},c('React').createElement(c('Image.react'),{className:"_2eee",draggable:false,src:this.props.image}),c('React').createElement('div',{className:"_2eef"},c('React').createElement('h3',{className:"_2eeg"},c('WorkModeConfig').is_work_user?'Workplace':'Facebook'),c('React').createElement('p',{className:"_2eeh"},n),c('React').createElement('div',{className:"_2eei"},o,' \u00B7 ',window.location.hostname)))};function m(){k.apply(this,arguments)}m.defaultProps={message:i._("You have new notifications."),image:j("363137")};f.exports=m}),null);
__d('MockFirefoxBrowserNotification.react',['cx','fbt','ix','DOMContainer.react','Image.react','React','WorkModeConfig','isNode','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;k=babelHelpers.inherits(m,c('React').Component);l=k&&k.prototype;m.prototype.render=function(){var n=c('isNode')(this.props.message)?c('React').createElement(c('DOMContainer.react'),null,this.props.message):this.props.message,o=this.props.isWindows;return c('React').createElement('section',{className:c('joinClasses')(this.props.className,"_g5o")},o?this.$MockFirefoxBrowserNotification1(n):this.$MockFirefoxBrowserNotification2(n))};m.prototype.$MockFirefoxBrowserNotification2=function(n){return c('React').createElement('div',{className:"_g5p"},c('React').createElement('div',{className:"_g5q"},c('React').createElement(c('Image.react'),{draggable:false,src:j("355144")})),c('React').createElement('div',{className:"_g5r"},c('React').createElement('h3',null,c('WorkModeConfig').is_work_user?'Workplace':'Facebook'),c('React').createElement('cite',null,window.location.hostname),c('React').createElement('p',null,n)),c('React').createElement(c('Image.react'),{className:"_g5u",draggable:false,src:this.props.image}))};m.prototype.$MockFirefoxBrowserNotification1=function(n){return c('React').createElement('div',{className:"_g5w"},c('React').createElement('h3',null,c('WorkModeConfig').is_work_user?'Workplace':'Facebook'),c('React').createElement('div',{className:"_g5x"},c('React').createElement('span',{className:"_g5z"}),c('React').createElement('span',{className:"_g7w"})),c('React').createElement('div',{className:"_g5r"},c('React').createElement(c('Image.react'),{className:"_g5u",draggable:false,src:this.props.image}),c('React').createElement('div',{className:"_g7x"},c('React').createElement('p',null,n),c('React').createElement('cite',null,window.location.hostname))))};function m(){k.apply(this,arguments)}m.defaultProps={message:i._("You have new notifications."),image:j("363137"),isWindows:false};f.exports=m}),null);
__d('MockBrowserNotification.react',['MockChromeBrowserNotification.react','MockEdgeBrowserNotification.react','MockFirefoxBrowserNotification.react','React','UserAgent'],(function a(b,c,d,e,f,g){'use strict';f.exports=function h(i){var j=c('UserAgent').isPlatform('Windows');if(c('UserAgent').isBrowser('Firefox')){return c('React').createElement(c('MockFirefoxBrowserNotification.react'),babelHelpers['extends']({},i,{isWindows:j}))}else if(c('UserAgent').isBrowser('Edge'))return c('React').createElement(c('MockEdgeBrowserNotification.react'),i);return c('React').createElement(c('MockChromeBrowserNotification.react'),babelHelpers['extends']({},i,{isWindows:j}))}}),null);
__d('NotificationPermissionNotice.react',['cx','fbt','Event','Keys','React','XUIAmbientNUX.react'],(function a(b,c,d,e,f,g,h,i){var j,k,l=[],m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;n.prototype.componentDidMount=function(){'use strict';l.push(c('Event').listen(window,'mousedown',this.props.onHide));l.push(c('Event').listen(window,'keydown',function(event){if(event.keyCode===c('Keys').ESC)this.props.onHide();}.bind(this)))};n.prototype.componentWillUnmount=function(){'use strict';while(l.length>0){var o=l.pop();o.remove()}};n.prototype.renderLayers=function(){'use strict';var o=this.props.shortText?i._("Click the lock to give {browser_name} permission to send you desktop notifications.",[i.param('browser_name',this.props.browserName)]):i._("If you change your mind, click the lock to give {browser_name} permission to send you desktop notifications.",[i.param('browser_name',this.props.browserName)]);return c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:function(){return this.refs.noticeAnchor}.bind(this),shown:true,position:'below',onCloseButtonClick:this.props.onHide,key:'nux'},o)};n.prototype.render=function(){'use strict';return c('React').createElement('span',null,c('React').createElement('span',{ref:'noticeAnchor',className:"_1_i1"}),this.renderLayers())};function n(){'use strict';j.apply(this,arguments)}n.propTypes={onHide:m.func.isRequired,shortText:m.bool,browserName:m.string.isRequired};f.exports=n}),null);
__d('NotificationPermissionRequest.react',['cx','React','Spotlight.react'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){'use strict';return c('React').createElement(c('Spotlight.react'),{shown:true,onHide:this.props.onHide,key:'spotlight'},c('React').createElement('div',{className:"_n3"}))};function l(){'use strict';i.apply(this,arguments)}l.propTypes={onHide:k.func};f.exports=l}),null);
__d('NotificationPermissionRequestWithPreview.react',['cx','fbt','ix','BrowserPushStrings','Image.react','ImageBlock.react','MockBrowserNotification.react','React','Spotlight.react','XUIAmbientNUX.react','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogFooter.react','XUIDialogTitle.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=function o(p){var q=void 0;return c('React').createElement(c('Spotlight.react'),{onHide:p.onHide,shown:p.shown,wash:'xui'},c('React').createElement('span',{ref:function r(s){return q=s},className:"_m4w"}),c('React').createElement('div',{className:"_n3"},c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:function r(){return q},key:'nux',shown:p.shown,onCloseButtonClick:p.onHide,position:'below'},c('React').createElement('strong',null,i._("Almost Done!")),c('React').createElement('br',null),i._("Now, click \"Allow\" to finish activating notifications."))))};k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.state={acceptPromptShown:false,dialogShown:true,spinnerShown:false},this.$NotificationPermissionRequestWithPreview2=function(t){this.setState({dialogShown:t})}.bind(this),this.$NotificationPermissionRequestWithPreview3=function(){this.setState({acceptPromptShown:!this.props.showSpinnerWhileRequesting,dialogShown:this.props.showSpinnerWhileRequesting,spinnerShown:this.props.showSpinnerWhileRequesting});this.props.onAccept&&this.props.onAccept(this.$NotificationPermissionRequestWithPreview4)}.bind(this),this.$NotificationPermissionRequestWithPreview4=function(){if(this.$NotificationPermissionRequestWithPreview1)this.setState({acceptPromptShown:false,dialogShown:false});}.bind(this),this.$NotificationPermissionRequestWithPreview5=function(){this.setState({acceptPromptShown:false})}.bind(this),p}n.prototype.componentWillMount=function(){this.$NotificationPermissionRequestWithPreview1=true};n.prototype.componentWillUnmount=function(){this.$NotificationPermissionRequestWithPreview1=false};n.prototype.render=function(){var o=this.props,p=o.notificationImage,q=o.notificationMessage,r=c('React').createElement(c('MockBrowserNotification.react'),{className:"_m4x",image:p,message:q}),s=this.state.spinnerShown?c('React').createElement(c('XUIDialogBody.react'),null,c('React').createElement(c('ImageBlock.react'),{spacing:'large'},c('React').createElement(c('Image.react'),{draggable:false,src:j("287648")}),c('React').createElement('div',null,c('React').createElement('strong',null,i._("Almost Done!")),c('React').createElement('p',null,i._("Now, click \"Allow\" to finish activating notifications."))))):c('React').createElement(c('XUIDialogBody.react'),null,c('React').createElement(c('ImageBlock.react'),{spacing:'large'},c('React').createElement(c('Image.react'),{draggable:false,src:j("287648")}),c('React').createElement('div',null,this.props.isWebNotifications?c('BrowserPushStrings').explanation_web_notifications:c('BrowserPushStrings').explanation)),r),t=this.state.spinnerShown?null:c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{action:'cancel',label:i._("Not Now"),onClick:this.props.onClose}),c('React').createElement(c('XUIDialogButton.react'),{action:'button',label:i._("Turn On"),onClick:this.$NotificationPermissionRequestWithPreview3,use:'special'}));return c('React').createElement('div',{className:"_m4y"},c('React').createElement(c('XUIDialog.react'),{layerHideOnBlur:false,onToggle:this.$NotificationPermissionRequestWithPreview2,shown:this.state.dialogShown,titleID:'notification-permission-title',width:445},c('React').createElement(c('XUIDialogTitle.react'),{showCloseButton:false},c('React').createElement('span',{id:'notification-permission-title'},c('BrowserPushStrings').turn_on)),s,t),c('React').createElement(m,{shown:this.state.acceptPromptShown,onHide:this.$NotificationPermissionRequestWithPreview5}))};f.exports=n}),null);
__d('incognito',['regeneratorRuntime','Promise','UserAgent','WebStorage'],(function a(b,c,d,e,f,g){'use strict';function h(){var i;return c('regeneratorRuntime').async(function j(k){while(1)switch(k.prev=k.next){case 0:i=window.RequestFileSystem||window.webkitRequestFileSystem;if(!i){k.next=3;break}return k.abrupt('return',new (c('Promise'))(function(l){return i(window.TEMPORARY,10,function(){return l(false)},function(){return l(true)})}));case 3:if(!(c('UserAgent').isBrowser('IE >= 10')||c('UserAgent').isBrowser('Edge'))){k.next=5;break}return k.abrupt('return',!window.indexedDB);case 5:if(!c('UserAgent').isBrowser('Firefox >= 16')){k.next=7;break}return k.abrupt('return',new (c('Promise'))(function(l){var m=window.indexedDB.open('__test__');m.onsuccess=function(){return l(false)};m.onerror=function(n){n.preventDefault();l(true)}}));case 7:if(!c('UserAgent').isBrowser('Safari')){k.next=9;break}return k.abrupt('return',!c('WebStorage').getLocalStorage());case 9:return k.abrupt('return',false);case 10:case 'end':return k.stop();}},null,this)}f.exports=h}),null);
__d('JewelBadgeCountRecorder',['invariant','Arbiter','performanceNow'],(function a(b,c,d,e,f,g,h){'use strict';var i=Object.create(null),j={onCountUpdated:function k(l,m){if(i[m.jewel]==null)i[m.jewel]=[];var n=i[m.jewel];n.push({timestamp:c('performanceNow')(),count:m.count});if(n.length>1000)n.shift();},getCountAtTimestamp:function k(l,m){var n=i[l];n!=null||h(0);n.length>0||h(0);var o=n.find(function(p,q){var r=n[q+1];return q===0&&m<p.timestamp||m>p.timestamp&&(r==null||m<r.timestamp)});o||h(0);return o.count}};c('Arbiter').subscribe('jewel/count-updated',j.onCountUpdated);f.exports=j}),null);
__d('CrossWindowEventEmitter',['CacheStorage','EventEmitter','FBJSON'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('EventEmitter'));i=h&&h.prototype;function j(k){i.constructor.call(this);this.$CrossWindowEventEmitter2=k;this.$CrossWindowEventEmitter1=new (c('CacheStorage'))('localstorage',k+':');this.$CrossWindowEventEmitter1.addValueChangeCallback(function(l,m,n){var o,event=l.split(':')[1],p=c('FBJSON').parse(n),q=p.__v;(o=i.emit).call.apply(o,[this,event].concat(q))}.bind(this))}j.prototype.emit=function(k){var l;for(var m=arguments.length,n=Array(m>1?m-1:0),o=1;o<m;o++)n[o-1]=arguments[o];this.emitRemote.apply(this,[k].concat(n));(l=i.emit).call.apply(l,[this,k].concat(n))};j.prototype.emitRemote=function(k){for(var l=arguments.length,m=Array(l>1?l-1:0),n=1;n<l;n++)m[n-1]=arguments[n];this.$CrossWindowEventEmitter1.set(k,m)};f.exports=j}),null);
__d('FriendingSurfaceVisitationTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear()}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:FriendingSurfaceVisitationLoggerConfig',this.$FriendingSurfaceVisitationTypedLogger1,c('Banzai').BASIC)};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:FriendingSurfaceVisitationLoggerConfig',this.$FriendingSurfaceVisitationTypedLogger1,c('Banzai').VITAL)};h.prototype.clear=function(){this.$FriendingSurfaceVisitationTypedLogger1={};return this};h.prototype.updateData=function(j){this.$FriendingSurfaceVisitationTypedLogger1=babelHelpers['extends']({},this.$FriendingSurfaceVisitationTypedLogger1,j);return this};h.prototype.setAppVersion=function(j){this.$FriendingSurfaceVisitationTypedLogger1.app_version=j;return this};h.prototype.setBadgeCount=function(j){this.$FriendingSurfaceVisitationTypedLogger1.badge_count=j;return this};h.prototype.setClientTimestamp=function(j){this.$FriendingSurfaceVisitationTypedLogger1.client_timestamp=j;return this};h.prototype.setRawRefTab=function(j){this.$FriendingSurfaceVisitationTypedLogger1.raw_ref_tab=j;return this};h.prototype.setRawTab=function(j){this.$FriendingSurfaceVisitationTypedLogger1.raw_tab=j;return this};h.prototype.setRefPage=function(j){this.$FriendingSurfaceVisitationTypedLogger1.ref_page=j;return this};h.prototype.setSurface=function(j){this.$FriendingSurfaceVisitationTypedLogger1.surface=j;return this};h.prototype.setTargetProfileID=function(j){this.$FriendingSurfaceVisitationTypedLogger1.target_profile_id=j;return this};h.prototype.setVC=function(j){this.$FriendingSurfaceVisitationTypedLogger1.vc=j;return this};var i={app_version:true,badge_count:true,client_timestamp:true,raw_ref_tab:true,raw_tab:true,ref_page:true,surface:true,target_profile_id:true,vc:true};f.exports=h}),null);
__d('JewelCountSideLoader',['invariant','CSS'],(function a(b,c,d,e,f,g,h){var i={},j={},k={},l={queueInstances:function m(n,o,p){i[n]={badge:o,root:p}},updateCountAndQueueArgs:function m(n,o,p){var q=j[n];if(q){q.updateCountAndArgs(p,o);return}var r=i[n];r||h(0);k[n]={count:o,args:p};c('CSS').conditionClass(r.root,'hasNew',!!o);r.badge.setLegacyContent(o);return},getOverwritesForJewel:function m(n){if(k[n.name])return k[n.name];j[n.name]=n;return null}};f.exports=l}),null);
__d('normalizedEventTimestamp',['performance'],(function a(b,c,d,e,f,g){'use strict';function h(i){if(i!=null){if(c('performance')&&c('performance').timing&&c('performance').timing.navigationStart&&i>c('performance').timing.navigationStart){return i-=c('performance').timing.navigationStart}else return i;}else if(c('performance').now)return c('performance').now();return null}f.exports=h}),null);
__d('JewelBase',['csx','invariant','Promise','Arbiter','ArbiterMixin','CrossWindowEventEmitter','CSS','DOM','Event','FriendingSurfaceVisitationTypedLogger','NotificationJewelFunnelLoggingConstants','FunnelLogger','HTML','JewelCountSideLoader','Keys','NotificationJewelInteractionLogging','MercuryMessengerJewelPerfConfig','Run','TabIsolation','JewelBadgeCountRecorder','Toggler','TooltipData','firstClickTimestamp','mixin','normalizedEventTimestamp','reportData'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('NotificationJewelFunnelLoggingConstants').FUNNEL_LOGGING_EVENT,m=c('NotificationJewelFunnelLoggingConstants').FUNNEL_LOGGING_NAME,n=c('NotificationJewelInteractionLogging').logFirstJewelClick,o=new (c('CrossWindowEventEmitter'))('JewelBase'),p={};j=babelHelpers.inherits(q,c('mixin')(c('ArbiterMixin')));k=j&&j.prototype;function q(r,s){'use strict';k.constructor.call(this);this.name=s.name;this.label=s.label;this.loggedFirstClick=false;this.root=r;this.badge=s.badge;this.countNew=0;this.initialCount=s.count||0;this.escHandler=null;this.bootload_module=s.bootload_module;this.bootload_args=s.bootload_args;this.bootload_eager_modules=s.bootload_eager_modules;this.bootloading=null;this.togglerInstance=c('Toggler').getInstance(r).setSticky(false);this.disableTooltip=s.disableTooltip;c('JewelBadgeCountRecorder').onCountUpdated('jewel/initial-count',{jewel:this.name,count:this.initialCount});if(c('MercuryMessengerJewelPerfConfig').eagerLoadingOnInteraction){this.$JewelBase3()}else c('Run').onAfterLoad(function(){return this.$JewelBase4()}.bind(this));if(c('MercuryMessengerJewelPerfConfig').eagerLoadingOnInteraction)this.$JewelBase5();if(s.keepOpenForSnowlift)this.togglerInstance.setPrePageTransitionCallback(this.$JewelBase6.bind(this));p[this.name]=this;this.$JewelBase7();var t=this.getFlyout();t||i(0);var u=new (c('TabIsolation'))(t);c('Toggler').createInstance(t).setSticky(false);this.$JewelBase8();c('Toggler').listen('show',this.root,function(v){c('FunnelLogger').appendAction(m,l.OPEN_JEWEL);this.inform('open');this.$JewelBase9();this.hasNew()&&this.markSeen();this.reset();c('Arbiter').inform('layer_shown',{type:'Jewel'});u.enable();this.setupEvents();this.$JewelBase10();if(c('MercuryMessengerJewelPerfConfig').eagerLoadingOnInteraction){this.$JewelBase11()}else this.$JewelBase4().then(function(){return this.inform('opened')}.bind(this)).done();}.bind(this));c('Toggler').listen('hide',this.root,function(v,w){c('FunnelLogger').appendAction(m,l.CLOSE_JEWEL);c('FunnelLogger').endFunnel(m);this.hasNew()&&this.markSeen();this.reset();this.inform('closed');c('Arbiter').inform('layer_hidden',{type:'Jewel'});u.disable();this.removeEvents();this.$JewelBase8()}.bind(this));c('Arbiter').subscribe('jewel/count-updated',function(v,w){w.jewel==this.name&&this.update(w)}.bind(this));c('Arbiter').subscribe('jewel/hide',function(v,w){this.hide()}.bind(this));o.addListener('count-updated',function(v){v.jewel==this.name&&this.update(v)}.bind(this))}q.prototype.getRoot=function(){'use strict';return this.root};q.prototype.hide=function(){'use strict';if(this.isOpen())c('Toggler').hide(this.root);};q.prototype.getFlyout=function(){'use strict';if(this.$JewelBase1==null)this.$JewelBase1=c('DOM').find(this.root,".__tw");return this.$JewelBase1};q.prototype.hasNew=function(){'use strict';return c('CSS').hasClass(this.root,'hasNew')};q.prototype.isOpen=function(){'use strict';return c('CSS').hasClass(this.root,'openToggler')};q.prototype.reset=function(){'use strict';c('FunnelLogger').appendAction(m,l.CLEAR_BADGE_COUNT);c('CSS').removeClass(this.root,'hasNew')};q.prototype.setContent=function(r){'use strict';var s=c('DOM').find(this.root,'ul.jewelItemList');c('DOM').setContent(s,c('HTML')(r))};q.prototype.update=function(r){'use strict';if(r.animation&&this.badge.setAnimation)this.badge.setAnimation(r.animation);this.countNew=r.count;if(typeof this.countNew==='number'&&this.countNew<0)this.countNew=0;this.badge.setLegacyContent(this.countNew);var s=isNaN(this.countNew)||this.countNew>0;c('CSS').conditionClass(this.root,'hasNew',s);this.inform('updated',r,c('Arbiter').BEHAVIOR_STATE)};q.prototype.setupEvents=function(){'use strict';this.escHandler=c('Event').listen(document.documentElement,'keydown',function(r){if(r.keyCode===c('Keys').ESC)this.hide();}.bind(this))};q.prototype.removeEvents=function(){'use strict';if(this.escHandler){this.escHandler.remove();this.escHandler=null}};q.prototype.markSeen=function(){'use strict';c('Arbiter').inform('jewel/count-updated',{jewel:this.name,count:0},c('Arbiter').BEHAVIOR_STATE);o.emitRemote('count-updated',{jewel:this.name,count:0});this.inform('marked-seen')};q.prototype.getButton=function(){'use strict';if(this.$JewelBase2==null)this.$JewelBase2=c('DOM').find(this.root,"a.jewelButton");return this.$JewelBase2};q.prototype.$JewelBase8=function(){'use strict';if(!this.disableTooltip){var r=this.getButton();c('TooltipData').set(r,this.label);r.setAttribute('data-tooltip-delay','500')}};q.prototype.$JewelBase10=function(){'use strict';c('TooltipData').remove(this.getButton())};q.prototype.$JewelBase6=function(r,s){'use strict';if(!this.$JewelBase12(s.from)&&!this.$JewelBase12(s.to))this.togglerInstance&&this.togglerInstance.hide();};q.prototype.$JewelBase12=function(r){'use strict';return r&&Object.prototype.hasOwnProperty.call(r.getQueryData(),'theater')};q.prototype.$JewelBase9=function(){'use strict';if(!this.loggedFirstClick&&this.name==='notifications'){this.loggedFirstClick=true;var r=this.getButton(),s=c('firstClickTimestamp').get(r);if(s){s=c('normalizedEventTimestamp')(s);if(s)n({timestamp:s,badgeCurrentCount:c('JewelBadgeCountRecorder').getCountAtTimestamp(this.name,s),badgeInitialCount:this.initialCount});}}c('reportData')('jewel_click',{gt:{count:this.countNew,initial:this.initialCount,jewel:this.name}});if(this.name==='requests')new (c('FriendingSurfaceVisitationTypedLogger'))().setSurface('jewel').setBadgeCount(this.countNew).log();};q.prototype.$JewelBase4=function(){'use strict';if(!this.bootload_module)return c('Promise').resolve();if(!this.bootloading)this.bootloading=new (c('Promise'))(function(r,s){this.bootload_module.load().then(function(t){new t(this,this.bootload_args);r()}.bind(this))['catch'](s)}.bind(this));return this.bootloading};q.prototype.$JewelBase3=function(){'use strict';if(this.bootload_eager_modules){c('Run').onAfterLoad(function(){return this.bootload_eager_modules.loadModules(this)}.bind(this))}else c('Run').onAfterLoad(function(){return this.$JewelBase4()}.bind(this));};q.prototype.$JewelBase5=function(){'use strict';this.bootload_eager_modules&&this.bootload_eager_modules.mount(this)};q.prototype.$JewelBase11=function(){'use strict';if(this.bootload_eager_modules){this.bootload_eager_modules.load(this)}else this.$JewelBase4().then(function(){return this.inform('opened')}.bind(this)).done();};q.prototype.$JewelBase7=function(){'use strict';if(this.bootloading)return;var r=c('JewelCountSideLoader').getOverwritesForJewel(this);if(!r)return;this.updateCountAndArgs(r.args,r.count)};q.prototype.updateCountAndArgs=function(r,s){'use strict';for(var t in r)if(r[t])this.bootload_args[t]=r[t];if(s)c('Arbiter').inform('jewel/count-updated',{jewel:this.name,count:s},c('Arbiter').BEHAVIOR_STATE);};f.exports=q}),null);
__d('ModalMask',['DOM'],(function a(b,c,d,e,f,g){var h=null,i=0,j={show:function k(){i++;if(!h){h=c('DOM').create('div',{id:'modalMaskOverlay'});c('DOM').appendContent(document.body,h)}},hide:function k(){if(i){i--;if(!i&&h){c('DOM').remove(h);h=null}}},getNode:function k(){return h}};f.exports=j}),null);
__d('LitestandChromeHomeBadge',['cx','Arbiter','AsyncRequest','CSS','DOM','Event','LitestandMessages','UserAgent','formatNumber'],(function a(b,c,d,e,f,g,h){var i=300000,j={},k=void 0,l=void 0;function m(){l&&clearTimeout(l);if(k)return;l=setTimeout(n,i)}function n(){if(k)return;new (c('AsyncRequest'))().setURI('/ajax/litestand/newsfeed_count').setHandler(function(q){if(k)return;p.setCount(q.getPayload());m()}).setAllowCrossPageTransition(true).send()}function o(q){if(j.badgeNode){c('CSS').conditionClass(j.badgeNode,"_2527",q>0)}else{if(j.badgeNode)c('CSS').conditionClass(j.badgeNode,"_461d",q>0);if(q>0){var r=c('formatNumber').withMaxLimit(q,j.maxCount);c('DOM').setContent(j.countNode,r)}}}var p={init:function q(r){j=r;c('Event').listen(j.homeNode,'click',function(event){var s=event.getModifiers(),t=s.shift,u=s.meta,v=s.control;if(t||c('UserAgent').isPlatform('Mac OS X')&&u||c('UserAgent').isPlatform('Windows')&&v)o(0);});c('Arbiter').subscribe(c('LitestandMessages').NEWSFEED_LOAD,function(){k=true;this.setCount(0)}.bind(this));c('Arbiter').subscribe(c('LitestandMessages').LEAVE_HOME,function(){k=false;m()});m()},setCount:function q(r){o(k?0:r)}};f.exports=p}),null);
__d('BootloadOnInteraction',['Event','JSResource','emptyFunction'],(function a(b,c,d,e,f,g){var h={mount:function i(j,k){var l=arguments.length<=2||arguments[2]===undefined?c('emptyFunction'):arguments[2],m=[c('Event').listen(j,'mouseover',n),c('Event').listen(j,'focus',n)];function n(){m.forEach(function(o){return o.remove()});c('JSResource').loadAll(k,l)}}};f.exports=h}),null);
__d('MercuryJewelBootloadModules',['BootloadOnInteraction','JSResource','MercuryMessengerJewelPerfConfig'],(function a(b,c,d,e,f,g){var h=null,i=[c('JSResource')('MercuryJewel').__setRef('MercuryJewelBootloadModules')].concat(c('MercuryMessengerJewelPerfConfig').bundleBootloader?[c('JSResource')('MercuryOrderedThreadlist').__setRef('MercuryJewelBootloadModules'),c('JSResource')('MercuryThreadInformer').__setRef('MercuryJewelBootloadModules'),c('JSResource')('MercuryThreads').__setRef('MercuryJewelBootloadModules'),c('JSResource')('Toggler').__setRef('MercuryJewelBootloadModules')]:[]);function j(m,n){h=h||new m(n,n.bootload_args)}function k(m,n){j(m,n);n.inform('opened')}var l={mount:function m(n){var o=n.getButton();c('BootloadOnInteraction').mount(o,i,function(p){k(p,n)})},load:function m(n){c('JSResource').loadAll(i,function(o){k(o,n)})},loadModules:function m(n){c('JSResource').loadAll(i,function(o){j(o,n)})}};f.exports=l}),null);
__d('AccessibilityShortcut',['AccessibilityLogger','Event','Focus','ge','onEnclosingPageletDestroy','warning'],(function a(b,c,d,e,f,g){var h={init:function i(j,k){var l=c('Event').listen(j,'click',function(m){m.preventDefault();var n=c('ge')(k);if(n){c('Focus').set(n);c('AccessibilityLogger').logSRKey()}else c('warning')(n,'Failed to set focus on element with ID: %s',k);});c('onEnclosingPageletDestroy')(j,function(){return l.remove()})}};f.exports=h}),null);
__d("CSSClassTransition",[],(function a(b,c,d,e,f,g){var h=[];function i(){}Object.assign(i,{go:function j(k,l,m,n){var o;for(var p=0;p<h.length;p++)if(h[p](k,l,m,n)===true)o=true;if(!o)k.className=l;},registerHandler:function j(k){h.push(k);return {remove:function l(){var m=h.indexOf(k);if(m>=0)h.splice(m,1);}}}});f.exports=i}),null);
__d('FocusRing',['cx','AccessibilityConfig','CSS','Event','Keys','KeyEventController','VirtualCursorStatus','emptyFunction'],(function a(b,c,d,e,f,g,h){var i=['mousedown','mouseup'],j={KEY_CODES:[c('Keys').UP,c('Keys').RIGHT,c('Keys').DOWN,c('Keys').LEFT,c('Keys').TAB,c('Keys').RETURN,c('Keys').SPACE,c('Keys').ESC],init:function k(){if(this._initialized||!c('AccessibilityConfig').focusRingModule)return;this._userInteractingWithKeyboard=false;this._attachVirtualCursorListener();this._attachKeyDownListener();if(document.body)c('CSS').addClass(document.body,"_19_u");this._initialized=true},usingKeyboardNavigation:function k(){return this._userInteractingWithKeyboard},_attachVirtualCursorListener:function k(){if(document.documentElement)this._onClickListener=c('VirtualCursorStatus').add(document.documentElement,this._onClick.bind(this));},_attachMouseListeners:function k(){this._onMouseListeners=i.map(function(l){return c('Event').listen(document.documentElement,l,this._onMouseEvent.bind(this))}.bind(this))},_attachKeyDownListener:function k(){this._onKeyDownListener=c('Event').listen(document.documentElement,'keydown',this._onKeyDown.bind(this))},_initialized:false,_userInteractingWithKeyboard:true,_onMouseEvent:function k(){this._hideFocusRing()},_onMouseListeners:i.map(function(k){return {remove:c('emptyFunction')}}),_removeMouseListeners:function k(){this._onMouseListeners.forEach(function(l){return l.remove()})},_onClick:function k(l,m,n){if(l)this._showFocusRing();},_onKeyDown:function k(event){if(this.KEY_CODES.indexOf(c('Event').getKeyCode(event))>-1&&c('KeyEventController').filterEventTargets(event,'keydown'))this._showFocusRing();},_showFocusRing:function k(){this._onKeyDownListener.remove();this._attachMouseListeners();this._userInteractingWithKeyboard=true;if(document.body)c('CSS').removeClass(document.body,"_19_u");},_hideFocusRing:function k(){this._removeMouseListeners();this._attachKeyDownListener();this._userInteractingWithKeyboard=false;if(document.body)c('CSS').addClass(document.body,"_19_u");},_onKeyDownListener:{remove:c('emptyFunction')},_onClickListener:{remove:c('emptyFunction')}};f.exports=j}),null);
__d('QuicklingAugmenter',['URI'],(function a(b,c,d,e,f,g){var h=[],i={addHandler:function j(k){h.push(k)},augmentURI:function j(k){var l=[],m=new (c('URI'))(k);h.forEach(function(n){var o=n(m);if(!o)return m;l.push(n);m=m.addQueryData(o)});h=l;return m}};f.exports=i}),null);
__d('cancelIdleCallback',['IdleCallbackImplementation','TimerStorage'],(function a(b,c,d,e,f,g){f.exports=function(){for(var h=arguments.length,i=Array(h),j=0;j<h;j++)i[j]=arguments[j];c('TimerStorage').unset(c('TimerStorage').IDLE_CALLBACK,i[0]);return Function.prototype.apply.call(c('IdleCallbackImplementation').cancelIdleCallback,b,i)}}),null);
__d('Quickling',['AjaxPipeRequest','Arbiter','CSSClassTransition','DocumentTitle','DOM','HTML','PageHooks','PageEvents','PageNavigationStageLogger','PageTransitionsRegistrar','QuicklingAugmenter','QuicklingConfig','Run','URI','UserAgent_DEPRECATED','PHPQuerySerializer','TimerStorage','cancelAnimationFrame','cancelIdleCallback','clearImmediate','clearInterval','clearTimeout','goOrReplace','isEmpty','requireWeak','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g){var h,i,j;c('requireWeak')('PageTransitions',function(w){j=w});var k=c('QuicklingConfig').version,l=c('QuicklingConfig').sessionLength,m=new RegExp(c('QuicklingConfig').inactivePageRegex),n=0,o,p='',q={isActive:function w(){return true},isPageActive:function w(x){if(x=='#')return false;x=new (c('URI'))(x);if(x.getDomain()&&x.getDomain()!=new (c('URI'))(window.location.href).getDomain())return false;if(x.getPath()=='/l.php'){var y=x.getQueryData().u;if(y){y=new (c('URI'))(unescape(y)).getDomain();if(y&&y!=new (c('URI'))(window.location.href).getDomain())return false;}}var z=x.getPath(),aa=x.getQueryData();if(!c('isEmpty')(aa))z+='?'+c('PHPQuerySerializer').serialize(aa);if(Object.keys(aa).reduce(function(ba,ca){return ba||c('QuicklingConfig').badRequestKeys.includes(ca)},false))return false;return !m.test(z)},getLoadCount:function w(){return n}};function r(w){w=w||'Facebook';c('DocumentTitle').set(w);if(c('UserAgent_DEPRECATED').ie()){p=w;if(!o)o=window.setInterval(function(){var x=p,y=c('DocumentTitle').get();if(x!=y)c('DocumentTitle').set(x);},5000,false);}}h=babelHelpers.inherits(s,c('AjaxPipeRequest'));i=h&&h.prototype;function s(w){'use strict';var x={version:k};i.constructor.call(this,w,{quickling:x});this._isQuickling=true}s.prototype._preBootloadFirstResponse=function(w){'use strict';return true};s.prototype._fireDomContentCallback=function(){'use strict';this._request.cavalry&&this._request.cavalry.setTimeStamp('t_domcontent');if(j)j.transitionComplete();this._onPageDisplayed&&this._onPageDisplayed(this.pipe);i._fireDomContentCallback.call(this)};s.prototype._fireOnloadCallback=function(){'use strict';if(this._request.cavalry){this._request.cavalry.setTimeStamp('t_hooks');this._request.cavalry.setTimeStamp('t_layout');this._request.cavalry.setTimeStamp('t_onload')}i._fireOnloadCallback.call(this)};s.prototype.isPageActive=function(w){'use strict';return q.isPageActive(w)};s.prototype._versionCheck=function(w){'use strict';if(w.version==k)return true;var x=['quickling','ajaxpipe','ajaxpipe_token'];c('PageNavigationStageLogger').setCookieForNavigation(w.uri);c('PageNavigationStageLogger').setNote('quickling_version');c('PageNavigationStageLogger').updateCookie();c('goOrReplace')(window.location,new (c('URI'))(w.uri).removeQueryData(x),true);return false};s.prototype._processFirstResponse=function(w){'use strict';var x=w.getPayload();r(x.title);window.scrollTo(0,0);c('CSSClassTransition').go(document.body,x.body_class||'',j.getMostRecentURI(),w.getRequest().getURI());c('Arbiter').inform('quickling/response')};s.prototype.getSanitizedParameters=function(){'use strict';return ['quickling']};s.prototype.getAsyncRequestType=function(){'use strict';return 'useIframeTransport'};function t(){n++;return n>=l}function u(w){c('AjaxPipeRequest').setCurrentRequest(null);if(t()){c('PageNavigationStageLogger').setNote('quickling_refresh');return false}w=c('QuicklingAugmenter').augmentURI(w);if(!q.isPageActive(w)){c('PageNavigationStageLogger').setNote('quickling_inactive');return false}c('TimerStorage').clearAll(c('TimerStorage').ANIMATION_FRAME,c('cancelAnimationFrame'));c('TimerStorage').clearAll(c('TimerStorage').IDLE_CALLBACK,c('cancelIdleCallback'));c('TimerStorage').clearAll(c('TimerStorage').IMMEDIATE,c('clearImmediate'));c('TimerStorage').clearAll(c('TimerStorage').INTERVAL,c('clearInterval'));c('TimerStorage').clearAll(c('TimerStorage').TIMEOUT,c('clearTimeout'));window.ExitTime=Date.now();c('Run').__removeHook(c('PageHooks').ONLOAD_HOOK);c('Run').__removeHook(c('PageHooks').DOMREADY_HOOK);c('Arbiter').inform(c('PageEvents').AJAXPIPE_ONUNLOAD,{transition_type:'quickling'});v();new s(w).setCanvasId('content').send();var x=window.__bodyWrapper;if(x.getCodeUsage)x.clearCodeUsage();return c('PageTransitionsRegistrar').DELAY_HISTORY}function v(){var w=function x(){c('PageHooks').runHooks('onleavehooks')};if(c('QuicklingConfig').useAsyncLeaveHooks){c('setTimeoutAcrossTransitions')(w,0)}else w();}c('Run').onAfterLoad(function w(){c('PageTransitionsRegistrar').registerHandler(u,1)});f.exports=b.Quickling=q}),null);
__d('StringTransformations',[],(function a(b,c,d,e,f,g){f.exports={unicodeEscape:function h(i){return i.replace(/[^A-Za-z0-9\-\.\:\_\$\/\+\=]/g,function(j){var k=j.charCodeAt().toString(16);return '\\u'+('0000'+k.toUpperCase()).slice(-4)})},unicodeUnescape:function h(i){return i.replace(/(\\u[0-9A-Fa-f]{4})/g,function(j){return String.fromCharCode(parseInt(j.slice(2),16))})}}}),null);
__d('TimeSpentArray',['Banzai','pageID','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g){var h=2,i=h*32,j,k,l,m,n,o,p,q,r,s={},t;function u(){return {timeoutDelayMap:s,nextDelay:t,timeoutInSeconds:l}}function v(){if(j){var da=Date.now();if(da>n)p=Math.min(i,Math.ceil(da/1000-m));var ea=aa();if(ea)j(ea,t);}z()}function w(){x();k=c('setTimeoutAcrossTransitions')(v,l*1000)}function x(){if(k){clearTimeout(k);k=null}}function y(da){m=da;n=m*1000;o=[1];for(var ea=1;ea<h;ea++)o.push(0);p=1;q+=1;r+=1;var fa=r.toString()+'_delay';t=s[fa];if(t===undefined)t=s.delay;var ga=r.toString()+'_timeout',ha=s[ga];if(ha===undefined)ha=s.timeout;ha=Math.min(ha,i);l=ha||i;w()}function z(){x();o=null}function aa(){if(!o)return null;return {tos_id:c('pageID'),start_time:m,tos_array:o.slice(0),tos_len:p,tos_seq:r,tos_cum:q}}function ba(da){if(da>=n&&da-n<1000)return;ca(Math.floor(da/1000))}function ca(da){var ea=da-m;if(ea<0||ea>=i)v();if(!o){y(da)}else{o[ea>>5]|=1<<(ea&31);p=ea+1;q+=1;n=da*1000}}f.exports={init:function da(ea,fa,ga){q=0;r=-1;j=ea;if(typeof fa=='object'&&fa!==null){s=fa}else s={};if(!ga)ga=Date.now();y(Math.floor(ga/1000));c('Banzai').subscribe(c('Banzai').SHUTDOWN,v)},update:function da(ea){ba(ea)},get:function da(){return aa()},ship:function da(){v()},reset:function da(){z()},testState:function da(){return u()}}}),null);
__d('TimeSpentImmediateActiveSecondsLogger',['Banzai','ImmediateActiveSecondsConfig','ScriptPath'],(function a(b,c,d,e,f,g){var h='immediate_active_seconds',i={signal:true,retry:true},j=c('ImmediateActiveSecondsConfig').sampling_rate,k=c('ImmediateActiveSecondsConfig').ias_bucket,l=0;function m(o){if(j<=0)return false;var p=Math.floor(o/1000)%j;return p===k}function n(o){if(o>=l&&o-l<1000)return;if(m(o)){var p={activity_time_ms:o,last_activity_time_ms:l,script_path:c('ScriptPath').getTopViewEndpoint()};try{c('Banzai').post(h,p,i)}catch(q){}}l=Math.floor(o/1000)*1000}f.exports={maybeReportActiveSecond:n}}),null);
__d('TimeSpentBitArrayLogger',['Arbiter','Banzai','BanzaiODS','TimeSpentArray','TimeSpentConfig','TimeSpentImmediateActiveSecondsLogger','UserActivity','isInIframe'],(function a(b,c,d,e,f,g){var h={delay:c('Banzai').BASIC.delay,retry:true};function i(j,k){c('Arbiter').inform('timespent/tosbitdataposted',babelHelpers['extends']({},j));if(typeof k=='number'){h.delay=k}else h.delay=c('Banzai').BASIC.delay;c('Banzai').post('time_spent_bit_array',babelHelpers['extends']({},j),h);h.delay=c('TimeSpentConfig').delay}f.exports={init:function j(k){if(c('isInIframe')())return;c('UserActivity').subscribe(function(m,n){var o=n.last_inform;c('TimeSpentArray').update(o);c('TimeSpentImmediateActiveSecondsLogger').maybeReportActiveSecond(o)});var l=Date.now();c('TimeSpentArray').init(i,c('TimeSpentConfig'),l);c('TimeSpentImmediateActiveSecondsLogger').maybeReportActiveSecond(l);c('BanzaiODS').bumpEntityKey('ms.time_spent.qa.www','time_spent.bits.js_initialized')}}}),null);
__d('UserActionHistory',['Arbiter','ClickRefUtils','ScriptPath','throttle','WebStorage'],(function a(b,c,d,e,f,g){var h={click:1,submit:1},i=false,j={log:[],len:0},k=c('throttle').acrossTransitions(function(){try{i._ua_log=JSON.stringify(j)}catch(n){i=false}},1000);function l(){var n=c('WebStorage').getSessionStorage();if(n){i=n;i._ua_log&&(j=JSON.parse(i._ua_log))}else i=false;j.log[j.len%10]={ts:Date.now(),path:'-',index:j.len,type:'init',iref:'-'};j.len++;c('Arbiter').subscribe("UserAction/new",function(o,p){var q=p.ua,r=p.node,event=p.event;if(!event||!(event.type in h))return;var s={path:c('ScriptPath').getScriptPath(),type:event.type,ts:q._ue_ts,iref:c('ClickRefUtils').get_intern_ref(r)||'-',index:j.len};j.log[j.len++%10]=s;i&&k()})}function m(){return j.log.sort(function(n,o){return o.ts!=n.ts?o.ts-n.ts:o.index-n.index})}l();f.exports={getHistory:m}}),null);
__d('XHPTemplate',['DataStore','DOM','HTML','XHPTemplateProcessor'],(function a(b,c,d,e,f,g){var h=c('XHPTemplateProcessor').processor;function i(k){'use strict';if(h instanceof Function)k=h(k);this._model=k}i.prototype.render=function(){'use strict';if(c('HTML').isHTML(this._model))this._model=c('DOM').setContent(document.createDocumentFragment(),this._model)[0];return this._model.cloneNode(true)};i.prototype.build=function(){'use strict';return new j(this.render())};i.getNode=function(k,l){'use strict';return i.getNodes(k)[l]};i.getNodes=function(k){'use strict';var l=c('DataStore').get(k,'XHPTemplate:nodes');if(!l){l={};var m=c('DOM').scry(k,'[data-jsid]');m.push(k);var n=m.length;while(n--){var o=m[n];l[o.getAttribute('data-jsid')]=o;o.removeAttribute('data-jsid')}c('DataStore').set(k,'XHPTemplate:nodes',l)}return l};function j(k){'use strict';this._root=k;this._populateNodes()}j.prototype._populateNodes=function(){'use strict';this._nodes={};this._leaves={};var k=this._root.getElementsByTagName('*');for(var l=0,m=k.length;l<m;l++){var n=k[l],o=n.getAttribute('data-jsid');if(o){n.removeAttribute('data-jsid');this._nodes[o]=n;this._leaves[o]=!n.childNodes.length}}};j.prototype.getRoot=function(){'use strict';return this._root};j.prototype.getNode=function(k){'use strict';return this._nodes[k]};j.prototype.setNodeProperty=function(k,l,m){'use strict';this.getNode(k)[l]=m;return this};j.prototype.setNodeContent=function(k,l){'use strict';if(!this._leaves[k])throw new Error("Can't setContent on non-leaf node: "+k);c('DOM').setContent(this.getNode(k),l);return this};f.exports=i}),null);
__d('BrowserPushCommands',[],(function a(b,c,d,e,f,g){var h='browser_push_ack',i='browser_push_redirect',j='browser_push_window_visible',k={ACK:h,REDIRECT:i,WINDOW_VISIBLE:j};f.exports=k}),null);
__d('BrowserPushMessageRedirectUtil',['Bootloader'],(function a(b,c,d,e,f,g){var h=function i(j){var k='(messages)(.*?)(?:(tid=))([^&]*)',l=j.match(k);if(!l)return true;var m=l.pop();c('Bootloader').loadModules(["FantaTabActions"],function(n){n.openTab(m)},'BrowserPushMessageRedirectUtil');return false};f.exports=h}),null);
__d('BrowserPushMessageHandler',['BrowserPushCommands','BrowserPushMessageRedirectUtil','EventListener','URI','URISchemes','isFacebookURI'],(function a(b,c,d,e,f,g){function h(event){if(event.data.command&&event.data.command===c('BrowserPushCommands').REDIRECT){if(window.onbeforeunload()===undefined){event.ports[0].postMessage({command:c('BrowserPushCommands').ACK,success:true})}else{event.ports[0].postMessage({command:c('BrowserPushCommands').ACK,success:false});return}var j=event.data.uri;if(/^([^.:/?#]+):/.test(j)&&!c('URISchemes').isAllowed(/^([^.:/?#]+):/.exec(j)[1])||!c('isFacebookURI')(new (c('URI'))(j)))throw new Error('goURI: URI scheme rejected, URI: '+j);if(c('BrowserPushMessageRedirectUtil')(j))window.location.href=j;}}var i={registerRedirectHandler:function j(){c('EventListener').listen(window,'message',function(event){if(event.origin==='')h(event);});if(navigator.serviceWorker&&navigator.serviceWorker.addEventListener)navigator.serviceWorker.addEventListener('message',function(event){if(navigator.serviceWorker&&navigator.serviceWorker.controller&&event.target&&event.target.controller&&event.target.controller===navigator.serviceWorker.controller||new RegExp('^'+window.location.protocol+'//'+window.location.host+'$').test(event.origin))h(event);});}};f.exports=i}),null);
__d('BrowserPushVisibilityChanger',['BrowserPushCommands','ClientServiceWorkerMessage','Visibility'],(function a(b,c,d,e,f,g){function h(){new (c('ClientServiceWorkerMessage'))(c('BrowserPushCommands').WINDOW_VISIBLE,null).sendViaController()}var i={listenForVisibility:function j(){if(!c('Visibility').isHidden())h();c('Visibility').addListener(c('Visibility').VISIBLE,h)}};f.exports=i}),null);
__d('PushRegistration',['Promise','BrowserPushMessageHandler','BrowserPushVisibilityChanger','Map','ServiceWorkerRegistration','emptyFunction'],(function a(b,c,d,e,f,g){var h=window.Notification,i=new (c('Map'))();j.get=function(k,l){'use strict';if(i.has(l))return i.get(l);var m=new j(k,l);i.set(l,m);return m};function j(k,l){'use strict';this.$PushRegistration3=k;this.appID=l;if(!j.$PushRegistration1&&!j.$PushRegistration2){j.$PushRegistration1=false;j.$PushRegistration2=false}}j.prototype.getPushSubscription=function(){'use strict';return new (c('Promise'))(function(k,l){if(j.pushPermissionIsDenied())l(new Error('No permission or not supported'));c('ServiceWorkerRegistration').getWorkerRegistration(this.$PushRegistration3).then(function(m){if(!m){k(null);return}m.pushManager.getSubscription().then(function(n){k(n)})['catch'](l)})['catch'](l)}.bind(this))};j.prototype.$PushRegistration4=function(k){'use strict';var l=k.endpoint;if('subscriptionId' in k&&!new RegExp('/'+k.subscriptionId+'$').test(l))l+='/'+k.subscriptionId;return l};j.prototype.$PushRegistration5=function(k,l,m,n){'use strict';var o=this.$PushRegistration4(m),p=k.getURIBuilder().getURI(),q=new l(p),r=null;if(m.toJSON){r=m.toJSON().keys}else if(m.keys)r=m.keys;q.setData({app_id:this.appID,push_endpoint:o,subscription_keys:JSON.stringify(r)});q.setMethod('post');if(q.setHandler)q.setHandler(function(s){if(s.payload&&s.payload.session_change)n();});q.send()};j.prototype.getSubscription=function(){'use strict';return new (c('Promise'))(function(k,l){this.getPushSubscription().then(function(m){if(m){k(this.$PushRegistration4(m))}else k(null);}.bind(this))['catch'](l)}.bind(this))};j.prototype.maybeRegisterPushAgain=function(k,l,m){'use strict';return new (c('Promise'))(function(n,o){this.getPushSubscription().then(function(p){if(p){this.$PushRegistration5(k,l,p,m);n(this.$PushRegistration4(p))}else n(null);}.bind(this))['catch'](function(){n(null)})}.bind(this))};j.prototype.$PushRegistration6=function(k,l,m){'use strict';return new (c('Promise'))(function(n,o){if(j.$PushRegistration2&&!m){o(new Error('sending disable info already'));return}j.$PushRegistration2=true;var p=k.getURIBuilder().getURI(),q=new l(p.toString());q.setData({appid:this.appID,from_browser_settings:m});q.setMethod('post');if(q.listen){q.listen('finally',n);q.listen('fail',function(){j.$PushRegistration2=false;o()})}else if(q.setErrorHandler&&q.setHandler){q.setErrorHandler(function(){j.$PushRegistration2=false;o()});q.setHandler(n)}else n();q.send()}.bind(this))};j.prototype.isPushRegistered=function(k,l,m,n){var o=arguments.length<=4||arguments[4]===undefined?false:arguments[4],p=arguments.length<=5||arguments[5]===undefined?c('emptyFunction'):arguments[5],q=arguments.length<=6||arguments[6]===undefined?false:arguments[6];'use strict';c('BrowserPushMessageHandler').registerRedirectHandler();return new (c('Promise'))(function(r,s){this.getPushSubscription().then(function(t){r(!!t||k&&!j.pushPermissionIsPending());if(t){if(o){self.$PushRegistration5(l,n,p,q)}else c('BrowserPushVisibilityChanger').listenForVisibility();}else if(!t&&k)if(j.pushPermissionIsOn()){this.registerPush(l,n,p,q)['catch'](function(){})}else this.$PushRegistration6(m,n,false);}.bind(this))['catch'](function(){if(k){this.$PushRegistration6(m,n,false);s()}if(q)c('ServiceWorkerRegistration').unregisterControllingWorker();}.bind(this))}.bind(this))};j.prototype.$PushRegistration7=function(){'use strict';return new (c('Promise'))(function(k,l){h.requestPermission(k)})};j.prototype.registerPushAndWaitForEndpoint=function(k,l,m,n){'use strict';return new (c('Promise'))(function(o,p){this.$PushRegistration8(k,l,m,true,null,n).then(function(q){if(typeof q!=='string'){p(new Error('registerPushImpl did not return an endpoint'));return}o(q)})['catch'](p)}.bind(this))};j.prototype.registerPushOnKaiOS=function(k,l,m){'use strict';return new (c('Promise'))(function(n,o){m.waitForKaiOS().done(function(){m.registerPush(function(p){var q=JSON.parse(p.get('push_endpoint'));this.$PushRegistration5(k,l,q,c('emptyFunction'));n(this.$PushRegistration4(q))}.bind(this))}.bind(this))}.bind(this))};j.prototype.registerPush=function(k,l){var m=arguments.length<=2||arguments[2]===undefined?c('emptyFunction'):arguments[2],n=arguments.length<=3||arguments[3]===undefined?false:arguments[3];'use strict';return this.registerPushWithFinishedCallBack(k,l,m,null,n)};j.prototype.registerPushWithFinishedCallBack=function(k,l,m,n,o){'use strict';return new (c('Promise'))(function(p,q){this.$PushRegistration8(k,l,m,false,n,o).then(function(r){if(typeof r!=='boolean'){q(new Error('registerPushImpl did not return a boolean'));return}p(r)})['catch'](q)}.bind(this))};j.prototype.$PushRegistration8=function(k,l,m,n,o,p){'use strict';if(j.$PushRegistration1)return new (c('Promise'))(function(q,r){r(new Error('registering already'))});if(!self.PushManager)return c('Promise').reject(new Error('PushManager not found.'));j.$PushRegistration1=true;return new (c('Promise'))(function(q,r){var s=c('ServiceWorkerRegistration').registerWorkerIfUnregistered(this.$PushRegistration3),t=this.$PushRegistration7();c('Promise').all([s,t]).then(function(u){var v=u[0];if(!j.pushPermissionIsOn()){if(p)v.unregister();throw new Error('Push permission was denied')}if(!n)q(true);v.pushManager.subscribe({userVisibleOnly:true}).then(function(w){if(n)q(this.$PushRegistration4(w));this.$PushRegistration5(k,l,w,m);if(o)o();c('BrowserPushVisibilityChanger').listenForVisibility()}.bind(this))['catch'](function(w){j.$PushRegistration1=false;if(p)v.unregister();r(w)})}.bind(this))['catch'](function(u){j.$PushRegistration1=false;r(u)})}.bind(this))};j.prototype.unregisterPushAndSWOnKaiOS=function(k,l,m,n){'use strict';return new (c('Promise'))(function(o,p){this.$PushRegistration6(k,l,n).then(function(){m.unregisterPush();o()})['catch'](p)}.bind(this))};j.prototype.unregisterPushAndSW=function(k,l){'use strict';return new (c('Promise'))(function(m,n){this.$PushRegistration6(k,l,true).then(function(){c('ServiceWorkerRegistration').unregisterControllingWorker().done(m)})['catch'](n)}.bind(this))};j.prototype.unregisterPushOnly=function(k,l){'use strict';return new (c('Promise'))(function(m,n){this.getPushSubscription().then(function(o){if(o){o.unsubscribe().then(this.$PushRegistration6(k,l,true)).then(function(){m(true)})['catch'](n)}else n();}.bind(this))['catch'](n)}.bind(this))};j.pushPermissionIsPending=function(){'use strict';return window.Notification&&window.Notification.permission==='default'};j.pushPermissionIsOn=function(){'use strict';return window.Notification&&window.Notification.permission==='granted'};j.pushPermissionIsDenied=function(){'use strict';return window.Notification&&window.Notification.permission==='denied'};f.exports=j}),null);
__d("XBrowserWebNotificationsEnableController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/notifications\/client\/web_notifications\/enable\/",{})}),null);
__d("XPushRegisterServiceWorkerController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/push\/register\/service_worker\/",{})}),null);
__d('BrowserPushDirectPromptInstaller',['Promise','Arbiter','AsyncRequest','BanzaiLogger','BrowserPushSessionChange.react','Bootloader','CrossWindowEventEmitter','DOM','NotificationPermissionNotice.react','NotificationPermissionRequest.react','NotificationPermissionRequestWithPreview.react','PushRegistration','QE2Logger','React','ReactDOM','XBrowserPushDisabledController','XBrowserPushXOutController','XBrowserWebNotificationsEnableController','XPushRegisterServiceWorkerController','emptyFunction','incognito'],(function a(b,c,d,e,f,g){'use strict';var h=window.Notification,i=new (c('CrossWindowEventEmitter'))('BrowserPushInstall'),j={},k,l=false;function m(event,t){var u=babelHelpers['extends']({event:event,appid:t,surface:'prompt'},j);c('BanzaiLogger').log('BrowserPushLoggerConfig',u)}function n(t){var u=c('XBrowserPushXOutController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(u).setMethod('POST').send();m('xout',t)}function o(t){var u=c('XBrowserWebNotificationsEnableController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(u).setMethod('POST').send();c('Arbiter').inform('WebNotifications/enabled');c('Bootloader').loadModules(["WebNotificationsPresenter"],function(v){v.init()},'BrowserPushDirectPromptInstaller')}function p(t){if(!l){l=true;c('ReactDOM').unmountComponentAtNode(t)}}function q(t,u){var v=c('DOM').insertBefore(t,c('DOM').create('span')),w=v.pop();c('ReactDOM').render(c('React').createElement(c('BrowserPushSessionChange.react'),{onHide:function x(){c('ReactDOM').unmountComponentAtNode(t)},push:u}),w)}function r(t,u,v,w,x){var y=c('PushRegistration').get(t,u);m('turn_on',u);return y.registerPushWithFinishedCallBack(c('XPushRegisterServiceWorkerController'),c('AsyncRequest'),function(){q(v,y)},function(){c('Arbiter').inform('BrowserPushInstall/installed')},x).then(function(){p(v);m('install',u)})['catch'](function(z){p(v);if(c('PushRegistration').pushPermissionIsDenied()){c('ReactDOM').render(c('React').createElement(c('NotificationPermissionNotice.react'),{onHide:function aa(){c('ReactDOM').unmountComponentAtNode(v)},browserName:w}),v);m('deny',u)}else m('install_ignore',u);n(u)})}var s={setLogExtraData:function t(u){j=u},setQEUniverseName:function t(u){k=u},requestThenInstallWebNotifications:function t(u,v,w,x,y,z){this._showRequestPermissions({appID:u,baseElement:v,browserName:w,hasEnoughFriendsToRequestPush:x,sampleNotificationAvatarURI:z,sampleNotificationMessage:y,showSpinnerWhileRequesting:true,isWebNotifications:true,onAcceptCallback:this._getOnWebNotificationsAccept({appID:u,callback:function aa(ba){if(ba==='granted'){m('install',u);i.emitRemote('complete');p(v);o(u)}else{m('deny',u);n(u)}}})})},requestThenInstallPush:function t(u,v,w,x,y,z,aa,ba,ca,da,ea,fa){var ga=c('PushRegistration').get(u,v),ha=ga.isPushRegistered(x,c('XPushRegisterServiceWorkerController'),c('XBrowserPushDisabledController'),c('AsyncRequest'),!!z,function(){q(w,ga)},ba);c('Promise').all([ha,c('incognito')()]).then(function(ia){var ja=ia[0],ka=ia[1];if(ja||ka)return;if(c('PushRegistration').pushPermissionIsPending()){this._showRequestPermissions({appID:v,baseElement:w,browserName:aa,hasEnoughFriendsToRequestPush:ca,path:u,qeUniverseName:k,sampleNotificationAvatarURI:ea,sampleNotificationMessage:da,showSpinnerWhileRequesting:fa,wasXOuted:y,workerIsForPushOnly:ba,isWebNotifications:false,onAcceptCallback:this._getOnPushNotificationsAccept({appID:v,baseElement:w,browserName:aa,path:u,workerIsForPushOnly:ba})})}else if(!y&&c('PushRegistration').pushPermissionIsOn())r(u,v,w,aa,ba);}.bind(this))['catch'](c('emptyFunction'))},installPush:function t(u,v,w,x,y,z,aa,ba,ca){var da=c('PushRegistration').get(u,v),ea=da.isPushRegistered(x,c('XPushRegisterServiceWorkerController'),c('XBrowserPushDisabledController'),c('AsyncRequest'),!!z,function(){q(w,da)},ba);c('Promise').all([ea,c('incognito')()]).then(function(fa){var ga=fa[0],ha=fa[1];if(ga||ha)return;if(c('PushRegistration').pushPermissionIsPending()){k&&c('QE2Logger').logExposureForUser(k);if(!ca||y)return;c('ReactDOM').render(c('React').createElement(c('NotificationPermissionRequest.react'),{onHide:function ia(){p(w)}}),w);r(u,v,w,aa,ba)}else if(!y)r(u,v,w,aa,ba);})['catch'](c('emptyFunction'))},_showRequestPermissions:function t(u){var v=u.appID,w=u.baseElement,x=u.hasEnoughFriendsToRequestPush,y=u.isWebNotifications,z=u.onAcceptCallback,aa=u.qeUniverseName,ba=u.sampleNotificationAvatarURI,ca=u.sampleNotificationMessage,da=u.showSpinnerWhileRequesting,ea=u.wasXOuted;i.once('complete',function(fa){p(w);m('twostep_suppressed',v)});aa&&c('QE2Logger').logExposureForUser(aa);if(!x||ea)return;m('twostep_request',v);c('ReactDOM').render(c('React').createElement(c('NotificationPermissionRequestWithPreview.react'),{isWebNotifications:y,notificationImage:ba||undefined,notificationMessage:ca||undefined,onAccept:z,onClose:function fa(){m('twostep_notnow',v);i.emitRemote('complete');n(v);p(w)},showSpinnerWhileRequesting:da}),w)},_getOnPushNotificationsAccept:function t(u){var v=u.appID,w=u.baseElement,x=u.browserName,y=u.callback,z=u.path,aa=u.workerIsForPushOnly;return function(){m('twostep_accept',v);i.emitRemote('complete');r(z,v,w,x,aa).then(y,y).done()}},_getOnWebNotificationsAccept:function t(u){var v=u.appID,w=u.callback;return function(){m('twostep_accept',v);i.emitRemote('complete');this._requestWebNotificationsFromBrowser(v,w)}.bind(this)},_requestWebNotificationsFromBrowser:function t(u,v){m('turn_on',u);if(h.permission==='granted'){v&&v(h.permission)}else h.requestPermission(v);}};f.exports=s}),null);
__d("XBrowserPushMuteController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/notifications\/client\/push\/mute\/",{appid:{type:"Int",required:true},push_endpoint:{type:"String",required:true},surface:{type:"Enum",required:true,enumType:1},mute_for:{type:"Enum",enumType:0},__asyncDialog:{type:"Int"}})}),null);
__d('BrowserPushMuteOptions',['fbt','AsyncRequest','PushRegistration','React','ReactDOM','XBrowserPushMuteController'],(function a(b,c,d,e,f,g,h){function i(k,l,m){var n=c('PushRegistration').get(l,m);n.getPushSubscription().done(function(o){if(o){var p=c('XBrowserPushMuteController').getURIBuilder().setEnum('surface','jewel').setString('push_endpoint',o.endpoint).setInt('appid',m).getURI();new (c('AsyncRequest'))().setURI(p).setRelativeTo(k).send()}})}var j={showMuteOptions:function k(l,m,n){if(!c('PushRegistration').pushPermissionIsOn())return;c('ReactDOM').render(c('React').createElement('a',{href:'#',onClick:function o(){i(l,m,n)}},h._("Mute")),l)}};f.exports=j}),null);
__d('BrowserPushNotificationJewelUpsellLogger',['Arbiter','QE2Logger'],(function a(b,c,d,e,f,g){'use strict';var h={exposeOnVisible:function i(j){c('Arbiter').subscribeOnce('notificationJewel/opened',function(){return c('QE2Logger').logExposureForUser(j.qeUniverseName)})}};f.exports=h}),null);
__d('ViewasChromeBar',['csx','cx','Arbiter','AsyncRequest','CSS','DOM','Event','Focus','ModalMask','PageTransitionsRegistrar','Parent'],(function a(b,c,d,e,f,g,h,i){var j='ViewasChromeBar/initialized',k=null,l=false;function m(p){c('Arbiter').subscribe(j,p)}function n(p){c('CSS').addClass(p,"_7g7");var q=c('DOM').find(p,"._7g0");c('Focus').set(c('DOM').find(q,'.textInput'))}var o={initChromeBar:function p(q){if(l)return;k=q;l=true;c('Arbiter').inform(j,null,c('Arbiter').BEHAVIOR_STATE)},update:function p(q,r){m(function(){c('DOM').setContent(k,q);if(r)new (c('AsyncRequest'))('/ajax/privacy/glasgow/viewas_bar_flyout_open').send();})},registerSpecificModeOnClick:function p(q){c('Event').listen(q,'click',function(){var r=c('Parent').bySelector(q,"._7f-");if(r instanceof HTMLElement)n(r);})},registerFlyoutModalMask:function p(){c('ModalMask').show();c('PageTransitionsRegistrar').registerHandler(c('ModalMask').hide,10)}};f.exports=o}),null);
__d('NavigationClickPointHandler',['Event','ScriptPath','collectDataAttributes'],(function a(b,c,d,e,f,g){var h={getClickPointInfo:function j(k){var l=null,m=c('collectDataAttributes')(k,['ft'],['href','data-click']),n=m.normal.href;if(!n||n==='#')return false;var o=m.normal['data-click'];if(l===null&&o)l={click:o};var p=m.ft.tn;if(l===null&&p)l={tn:p};if(l===null&&k.getAttribute){var q=k.getAttribute('class');if(q)l={'class':q};}return l}};function i(event){var j=event.target||event.srcElement,k=h.getClickPointInfo(j);if(k!==false)c('ScriptPath').setClickPointInfo(k);}if(document.documentElement!==null)c('Event').listen(document.documentElement,{click:i});f.exports=h}),null);
__d("XWebStorageLoggingAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ajax\/webstorage\/process_keys\/",{})}),null);
__d('WebStorageMonster',['Event','AsyncRequest','UserActivity','StringTransformations','WebStorage','XWebStorageLoggingAsyncController','isEmpty','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g){var h=300000,i=false;function j(o){var p={};for(var q in o){var r=o.getItem(q),s=c('StringTransformations').unicodeEscape(q);if(typeof r==='string')p[s]=r.length;}return p}function k(o){var p=c('WebStorage').getLocalStorage();if(!p||!o.keys)return;n._getLocalStorageKeys().forEach(function(q){if(o.keys.includes(q))p.removeItem(q);})}function l(o){var p=c('WebStorage').getLocalStorage();if(p)n._getLocalStorageKeys().forEach(function(q){if(!o.some(function(r){return new RegExp(r).test(q)}))p.removeItem(q);});}function m(){if(c('UserActivity').isActive(h)){c('setTimeoutAcrossTransitions')(m,h)}else n.cleanNow();}var n={registerLogoutForm:function o(p,q){c('Event').listen(p,'submit',function(r){n.cleanOnLogout(q)})},schedule:function o(){if(i)return;i=true;m()},cleanNow:function o(){var p=Date.now(),q={},r=c('WebStorage').getLocalStorage();if(r)q.local_storage=j(r);var s=c('WebStorage').getSessionStorage();if(s)q.session_storage=j(s);var t=!c('isEmpty')(q),u=Date.now();q.logtime=u-p;if(t){var v=c('XWebStorageLoggingAsyncController').getURIBuilder().getURI();new (c('AsyncRequest'))(v).setData(q).setHandler(function(w){var x=w.getPayload();if(x.keys)x.keys=x.keys.map(c('StringTransformations').unicodeUnescape);k(x)}).send()}},cleanOnLogout:function o(p){if(p)l(p);var q=c('WebStorage').getSessionStorage();if(q)q.clear();},_getLocalStorageKeys:function o(){var p=c('WebStorage').getLocalStorage();return p?Object.keys(p):[]}};f.exports=n}),null);
__d('ScriptPathLogger',['Banzai','CurrentUser','ScriptPath','TimeSpentPageTransitionCause','URI','isInIframe'],(function a(b,c,d,e,f,g){'use strict';var h='script_path_change',i={scriptPath:null,categoryToken:null,extraData:{}},j=false,k='imp_id';function l(v){var w=c('URI').getNextURI?c('URI').getNextURI():new (c('URI'))(window.location.href),x=w.getQueryData(),y=w.getPath();if(y.endsWith('/'))y=y.substr(0,y.length-1);var z=m(y,x);if(z){v.content_id=z;return}var aa=n(y);if(aa!==''){v.dest_topic_feed=aa;return}if(o(y)){var ba=x.queue_id;if(ba)v.dest_srt_queue_id=ba;return}}function m(v,w){if(w.story_fbid)return w.story_fbid;if(w.fbid)return w.fbid;if(w.view==='permalink'&&w.id)return w.id;var x=/\/(posts|videos|notes|groups\/.*\/permalink)\//,y=/^[0-9]+$/;if(x.test(v)){var z=v.split('/'),aa=z[z.length-1];if(y.test(aa))return aa;}return ''}function n(v){if(!v||v.search('/feed/topics/')==-1)return '';var w=v.split('/');return w[w.length-1]}function o(v){return !!v&&v.search('/intern/review/')!==-1}function p(v,w,x,y){if(!j||c('isInIframe')())return;var z=c('CurrentUser').isLoggedIn(),aa=z?c('Banzai').VITAL:c('Banzai').BASIC;if(z){y=y||{};y.via_banzai_vital='1'}var ba={source_path:v.scriptPath,source_token:v.categoryToken,dest_path:w.scriptPath,dest_token:w.categoryToken,impression_id:w.extraData?w.extraData.imp_id:null,cause:x},ca=x===c('TimeSpentPageTransitionCause').PAGE_UNLOAD;if(!ca)l(ba);if(y!=null){var da=y,ea=da.snowlift_content_id;if(!ca&&ea!=null){ba.content_id=ea;delete y.snowlift_content_id}ba.extra_data=y}if(v.scriptPath===null)ba.referrer=document.referrer;var fa=c('ScriptPath').getClickPointInfo();if(fa)ba.click_point_info=fa;if(v.extraData)for(var ga in v.extraData)if(ga!=k)ba['source_'+ga]=v.extraData[ga];if(w.extraData)for(var ha in w.extraData)if(ha!=k)ba['dest_'+ha]=w.extraData[ha];if(v.topViewEndpoint)ba.source_endpoint=v.topViewEndpoint;if(w.topViewEndpoint)ba.dest_endpoint=w.topViewEndpoint;if(v.restored)ba.source_restored=true;c('Banzai').post(h,ba,aa);c('ScriptPath').setClickPointInfo(null)}function q(){p(c('ScriptPath').getSourcePageInfo()||i,c('ScriptPath').getPageInfo()||i,c('TimeSpentPageTransitionCause').PAGE_LOAD)}function r(v,w,x){p(v,w,c('TimeSpentPageTransitionCause').TRANSITION,x)}function s(){p(c('ScriptPath').getPageInfo()||i,i,c('TimeSpentPageTransitionCause').PAGE_UNLOAD);c('ScriptPath').shutdown()}var t=c('ScriptPath').subscribe(function(v){if(j){var w=v.source,x=v.dest,y=v.cause,z=v.extraData;if(y){p(w||i,x||i,y,z)}else if(w){r(w,x||i,z)}else q();}});c('Banzai').subscribe(c('Banzai').SHUTDOWN,s);var u={startLogging:function v(){j=true;if(c('ScriptPath').getPageInfo())q();},stopLogging:function v(){j=false;t.remove()},BANZAI_LOGGING_ROUTE:h};f.exports=u}),null);