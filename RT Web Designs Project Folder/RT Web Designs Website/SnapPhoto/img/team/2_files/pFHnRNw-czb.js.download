if (self.CavalryLogger) { CavalryLogger.start_js(["UmfgW"]); }

__d("FeedStoryCategory",[],(function a(b,c,d,e,f,g){f.exports={UNKNOWN:0,ORGANIC:1,ENGAGEMENT:2,FIXED_POSITION:3,PROMOTION:4,SPONSORED:5}}),null);
__d('DetectBrokenProxyCache',['AsyncSignal','Cookie','URI'],(function a(b,c,d,e,f,g){function h(i,j){var k=c('Cookie').get(j);if(k!=i&&k!=null&&i!='0'){var l={c:'si_detect_broken_proxy_cache',m:j+' '+i+' '+k},m=new (c('URI'))('/common/scribe_endpoint.php').getQualifiedURI().toString();new (c('AsyncSignal'))(m,l).send()}}f.exports={run:h}}),null);
__d('ChatOpenTab',['csx','Bootloader','ContextualThing','Event','MercuryIDs','MercuryParticipantTypes','Parent','requireWeak'],(function a(b,c,d,e,f,g,h){'use strict';var i=null;c('requireWeak')('FantaTabsReactApp',function(n){return i=n});c('requireWeak')('FantaTabsSlimApp',function(n){return i=n});function j(n,o,p,q){c('Event').listen(n,'click',function(r){if(m.canOpenTab()){q(o,p);return r.kill()}})}function k(n,o,p,q){c('Event').listen(n,'click',function(r){if(m.canOpenTab())q(o,p);})}function l(n){var o=c('ContextualThing').getContext(n);return o&&c('Parent').bySelector(o,"._3qw")!==null}var m={canOpenTab:function n(){return i&&!i.isHidden()},listenOpenEmptyTabDEPRECATED:function n(o,p){j(o,null,p,this._loadAndOpenEmptyFantaTab)},listenOpenThreadDEPRECATED:function n(o,p,q){j(o,p,q,function(r,s){return this._loadAndOpenFantaTab(r,s,q)}.bind(this))},listenOpenUserTabDEPRECATED:function n(o,p,q){if(!l(o))j(o,p,q,function(r){return this._loadAndOpenFantaTab(r,c('MercuryParticipantTypes').USER,q)}.bind(this));},listenOpenUserTabPersistentEventDEPRECATED:function n(o,p,q){if(!l(o))k(o,p,q,function(r){return this._loadAndOpenFantaTab(r,c('MercuryParticipantTypes').USER,q)}.bind(this));},listenOpenPageTabDEPRECATED:function n(o,p,q,r){if(!l(o))j(o,p,r,function(s){return this._loadAndOpenFantaTab(s,c('MercuryParticipantTypes').PAGE,r)}.bind(this));},listenOpenPageTabPersistentEventDEPRECATED:function n(o,p,q,r){if(!l(o))k(o,p,r,function(s){return this._loadAndOpenFantaTab(s,c('MercuryParticipantTypes').PAGE,r)}.bind(this));},_loadAndOpenFantaTab:function n(o,p,q){c('Bootloader').loadModules(["ChatOpenTabEventLogger","FantaTabActions"],function(r,s){if(p===c('MercuryParticipantTypes').USER||p===c('MercuryParticipantTypes').PAGE){var t=c('MercuryIDs').getThreadIDFromUserID(o);s.openTab(t,[q]);r.logUserClickOpen(q,o)}else{s.openTab(o,[q]);r.logClickOpen(q,o)}},'ChatOpenTab')},_loadAndOpenEmptyFantaTab:function n(){c('Bootloader').loadModules(["ChatOpenTabEventLogger","FantaTabActions","MercuryThreads"],function(o,p,q){var r=q.get().createNewLocalThreadGenerateID();p.openTab(r,'jewel_new_message');o.logClickOpen('EmptyTab')},'ChatOpenTab')}};f.exports=m}),null);
__d('Spotlight',['csx','cx','Arbiter','ArbiterMixin','DOM','JSXDOM','Layer','LayerAutoFocus','LayerTabIsolation','ModalLayer','Vector','classWithMixins','joinClasses','mixin'],(function a(b,c,d,e,f,g,h,i){var j,k;j=babelHelpers.inherits(l,c('classWithMixins')(c('Layer'),c('mixin')(c('ArbiterMixin'))));k=j&&j.prototype;function l(n,o){'use strict';k.constructor.call(this,n,o);this.stageMinSize=new (c('Vector'))(0,0);this.stagePadding=new (c('Vector'))(0,0)}l.prototype._buildWrapper=function(n,o){'use strict';var p=c('joinClasses')("_n8"+(n.wash==='dark'||!n.wash?' '+"_3qx":'')+(n.wash==='xui'?' '+"_4-hy":''),n.rootClassName);return c('JSXDOM').div({className:p},c('JSXDOM').div({className:"_n9"},o))};l.prototype._getDefaultBehaviors=function(){'use strict';return k._getDefaultBehaviors.call(this).concat([m,c('LayerAutoFocus'),c('LayerTabIsolation'),c('ModalLayer')])};l.prototype.getContentRoot=function(){'use strict';if(!this._content)this._content=c('DOM').find(this.getRoot(),"div._n3");return this._content};l.prototype.configure=function(n){'use strict';if(n.stageMinSize)this.stageMinSize=n.stageMinSize;if(n.stagePadding)this.stagePadding=n.stagePadding;};l.prototype.onContentLoaded=function(){'use strict';this.inform('content-load')};l.prototype.updatePermalink=function(n){'use strict';this.inform('permalinkchange',n)};Object.assign(l.prototype,{stageMinSize:null,stagePadding:null});function m(n){'use strict';this._layer=n}m.prototype.enable=function(){'use strict';this._subscription=this._layer.subscribe(['show','hide'],function(n,o){if(n==='show'){c('Arbiter').inform('layer_shown',{type:'Spotlight'})}else c('Arbiter').inform('layer_hidden',{type:'Spotlight'});})};m.prototype.disable=function(){'use strict';this._subscription.unsubscribe();this._subscription=null};Object.assign(m.prototype,{_subscription:null});f.exports=l}),null);
__d('Spotlight.react',['LayerAutoFocusReact','LayerHideOnBlur','LayerHideOnEscape','LayerRefocusOnHide','ReactLayer','Spotlight','React'],(function a(b,c,d,e,f,g){var h=c('React').PropTypes,i=c('ReactLayer').createClass({propTypes:{causalElement:h.instanceOf(HTMLElement),onHide:h.func,rootClassName:h.string,shown:h.bool,wash:h.oneOf(['light','xui','dark'])},getDefaultEnabledBehaviors:function j(){return {hideOnBlur:c('LayerHideOnBlur'),hideOnEscape:c('LayerHideOnEscape'),refocusOnHide:c('LayerRefocusOnHide'),autoFocus:c('LayerAutoFocusReact')}},createLayer:function j(k){var l=this.enumerateBehaviors(this.props.behaviors),m={addedBehaviors:l,rootClassName:this.props.rootClassName,wash:this.props.wash},n=new (c('Spotlight'))(m,k);n.setCausalElement(this.props.causalElement);n.conditionShow(this.props.shown);if(this.props.onBeforeHide)n.subscribe('beforehide',this.props.onBeforeHide);if(this.props.onHide)n.subscribe('hide',this.props.onHide);return n},receiveProps:function j(k){if(this.layer){this.layer.setCausalElement(k.causalElement);this.layer.conditionShow(k.shown)}}});f.exports=i}),null);
__d('OutdatedBrowserBanner',['CSS','$'],(function a(b,c,d,e,f,g){g.conditionShow=function(h,i){c('CSS').conditionShow(c('$')(h),i)}}),null);
__d('HelpLiteFlyoutBootloader',['regeneratorRuntime','Deferred','JSResource'],(function a(b,c,d,e,f,g){'use strict';var h=false,i=null,j=null,k={loadFlyout:function l(){return c('regeneratorRuntime').async(function m(n){while(1)switch(n.prev=n.next){case 0:k.loadFlyoutWithHelpType(null);case 1:case 'end':return n.stop();}},null,this)},loadFlyoutWithHelpType:function l(m){var n,o,p,q;return c('regeneratorRuntime').async(function r(s){while(1)switch(s.prev=s.next){case 0:s.next=2;return c('regeneratorRuntime').awrap(c('JSResource')('HelpLiteFlyout').__setRef('HelpLiteFlyoutBootloader').load());case 2:n=s.sent;if(!h){s.next=6;break}n.refreshHelp();return s.abrupt('return');case 6:h=true;if(m)k.setHelpType(m);s.next=10;return c('regeneratorRuntime').awrap(this._getDeferredFlyoutElements().getPromise());case 10:o=s.sent;p=o.flyout;q=o.flyoutRoot;n.registerFlyoutToggler(p,q);n.loadBody();case 15:case 'end':return s.stop();}},null,this)},setHelpType:function l(m){j=m},getHelpType:function l(){return j},_getDeferredFlyoutElements:function l(){if(i==null)i=new (c('Deferred'))();return i},registerFlyoutElements:function l(m,n){this._getDeferredFlyoutElements().resolve({flyout:m,flyoutRoot:n})}};f.exports=k}),null);
__d('PrivacyLiteFlyoutBootloader',['regeneratorRuntime','Promise','Deferred','JSResource'],(function a(b,c,d,e,f,g){'use strict';var h=false,i=null,j=null,k={loadFlyout:function l(){return c('regeneratorRuntime').async(function m(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return c('regeneratorRuntime').awrap(k._loadFlyout(false));case 2:case 'end':return n.stop();}},null,this)},loadFlyoutAsChild:function l(){return c('regeneratorRuntime').async(function m(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return c('regeneratorRuntime').awrap(k._loadFlyout(true));case 2:case 'end':return n.stop();}},null,this)},_loadFlyout:function l(m){var n,o,p,q,r,s,t,event,u,v;return c('regeneratorRuntime').async(function w(x){while(1)switch(x.prev=x.next){case 0:if(!h){x.next=2;break}return x.abrupt('return');case 2:h=true;x.next=5;return c('regeneratorRuntime').awrap(c('Promise').all([c('JSResource')('PrivacyLiteFlyout').__setRef('PrivacyLiteFlyoutBootloader').load(),this._getDeferredFlyoutElements().getPromise(),this._getDeferredFooterElements().getPromise()]));case 5:n=x.sent;o=n[0];p=n[1];q=p.flyout;r=p.flyoutRoot;s=n[2];t=s.footer;event=s.event;u=s.settingsExitPoint;v=s.basicsExitPoint;o.setIsChild(!!m);o.registerFlyoutToggler(q,r);o.registerSettingsAndBasicsLinkLogging(t,event,u,v);o.loadBody();case 19:case 'end':return x.stop();}},null,this)},setChildFlyoutVisible:function l(m){var n,o,p,q,r;return c('regeneratorRuntime').async(function s(t){while(1)switch(t.prev=t.next){case 0:if(!(!h&&!m)){t.next=2;break}return t.abrupt('return');case 2:t.next=4;return c('regeneratorRuntime').awrap(c('Promise').all([c('JSResource')('PrivacyLiteFlyout').__setRef('PrivacyLiteFlyoutBootloader').load(),this._getDeferredFlyoutElements().getPromise()]));case 4:n=t.sent;o=n[0];p=n[1];q=p.flyout;r=p._flyoutRoot;if(!(m===o.isFlyoutVisible())){t.next=11;break}return t.abrupt('return');case 11:o.setChildFlyoutVisible(m);o.onToggle(q,m?'show':'hide');case 13:case 'end':return t.stop();}},null,this)},_getDeferredFlyoutElements:function l(){if(i==null)i=new (c('Deferred'))();return i},registerFlyoutElements:function l(m,n){this._getDeferredFlyoutElements().resolve({flyout:m,flyoutRoot:n})},_getDeferredFooterElements:function l(){if(j==null)j=new (c('Deferred'))();return j},registerFooterElements:function l(m,event,n,o){this._getDeferredFooterElements().resolve({footer:m,event:event,settingsExitPoint:n,basicsExitPoint:o})}};f.exports=k}),null);
__d('HelpLiteFlyout',['AsyncRequest','CSS','DOM','Event','HelpLiteFlyoutBootloader','PrivacyLiteFlyoutBootloader','Toggler','ge','ifRequired'],(function a(b,c,d,e,f,g){'use strict';var h=null,i={loadBody:function j(){if(c('ge')('fbHelpLiteFlyoutLoading'))new (c('AsyncRequest'))('/help/ajax/contextual/').setData({page_type:c('HelpLiteFlyoutBootloader').getHelpType()}).send();},refreshHelp:function j(){if(c('ge')('fbHelpLiteFlyoutLoading'))new (c('AsyncRequest'))('/help/ajax/contextual/').setData({page_type:c('HelpLiteFlyoutBootloader').getHelpType(),is_refresh:true}).send();},resetHelp:function j(k){var l=c('ge')('fbContextualHelpContent');if(l)c('DOM').replace(l,k);},showHelp:function j(){c('PrivacyLiteFlyoutBootloader').setChildFlyoutVisible(false);c('CSS').show(c('ge')('fbHelpLiteFlyout'))},openPrivacy:function j(){c('CSS').hide(c('ge')('fbHelpLiteFlyout'));c('PrivacyLiteFlyoutBootloader').loadFlyoutAsChild();c('PrivacyLiteFlyoutBootloader').setChildFlyoutVisible(true)},registerPrivacyBackLink:function j(k){c('Event').listen(k,'click',i.showHelp)},registerFlyoutToggler:function j(k,l){h=l;var m=c('Toggler').createInstance(k);m.setSticky(false);c('Toggler').listen('hide',l,function(n){c('PrivacyLiteFlyoutBootloader').setChildFlyoutVisible(false)});c('Toggler').listen('show',l,function(n){i.showHelp()});c('ifRequired')('ClientChromeStore',function(n){this._clientChromeStoreUnsubscribe=n.subscribe(function(){var o=n.getState();if(o.bluebar.activeFlyout.type==='help'){i.showHelp()}else c('PrivacyLiteFlyoutBootloader').setChildFlyoutVisible(false);})}.bind(this))},isFlyoutVisible:function j(){return h&&c('Toggler').getActive()===h},setFlyoutVisible:function j(k){if(k)c('HelpLiteFlyoutBootloader').loadFlyout();c('ifRequired')('ClientChromeStore',function(l){l.dispatch({type:'UPDATE_ACTIVE_FLYOUT',data:k?'help':null})});k?c('Toggler').show(h):c('Toggler').hide(h)}};f.exports=i}),null);
__d("LocaleSwitchingReferrers",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CARRY_LOGOUT_LOGIN:"carry_logout_login",FB4B_GLOBAL_SITES_DIALOG:"fb4b_global_sites_dialog",FB4B_GLOBAL_SITES_FOOTER:"fb4b_global_sites_footer",IGB_GLOBAL_SITES_FOOTER:"igb_global_sites_footer",LOCALE_SWITCH_SCRIPT:"locale_switch_script",M_TOUCH_LOCALE_SELECTOR:"m_touch_locale_selector",M_BASIC_LOCALE_FOOTER:"m_basic_locale_footer",MEDIA_PORTAL_V3_DIALOG:"media_portal_v3_dialog",MOBILE_ACCOUNT_SETTINGS:"mobile_account_settings",MOBILE_CHROME_JP_FOOTER:"mobile_chrome_jp_footer",MOBILE_FB4B_GLOBAL_SITES_FOOTER:"mobile_fb4b_global_sites_footer",MOBILE_FB4B_GLOBAL_SITES_PAGE_VIEW:"mobile_fb4b_global_sites_page_view",MOBILE_HELP_CENTER_SEARCH:"mobile_help_center_search",MOBILE_LOCALE_CHANGED_NOTICE:"mobile_locale_changed_notice",MOBILE_LOCALE_LINKS:"mobile_locale_links",MOBILE_SUGGESTED_LOCALE_SELECTOR:"mobile_suggested_locale_selector",MOBILE_SWITCH_LANGUAGE_HEADER:"mobile_switch_language_header",SAFETY_CENTER_GLOBAL_SITES_FOOTER:"fbsc_global_sites_footer",SITEMAP:"sitemap",QP_PROMO:"qp_promo",RLX_QP_FORCE_SWITCH:"rlx_qp_force_switch",RLX_QP_PROMPT_SWITCH:"rlx_qp_prompt_switch",RLX_QP_MULTI_LANGUAGE:"rlx_qp_multi_language",WWW_ACCOUNT_SETTINGS:"www_account_settings",WWW_CARD_SELECTOR:"www_card_selector",WWW_CARD_SELECTOR_MORE:"www_card_selector_more",WWW_DEV_SITE:"www_dev_site",WWW_HELP_INLINE_SELECTOR:"www_help_inline_selector",WWW_I18N_NUB:"www_i18n_nub",WWW_LANGUAGE_PAGE:"www_language_page",WWW_LINK_DIALOG_SELECTOR:"www_link_dialog_selector",WWW_LIST_SELECTOR:"www_list_selector",WWW_LIST_SELECTOR_MORE:"www_list_selector_more",WWW_MANDATORY_LOCALE_SELECTION_POST:"www_mandatory_locale_selection_post",WWW_TRANS_APP_INCONSISTENT:"www_trans_app_inconsistent",FBCOLUMN_FOOTER:"fbcolumn_footer",WWW_LOGIN_BLUE_BAR:"www_login_blue_bar_nub",UNIT_TEST:"unit_test",ACCOUNT_CREATOR:"account_creator",AT_WORK_ACCOUNT:"at_work_account_creator",ADMIN_TOOL:"admin_tool",TRANSLATION_APP_UNINSTALL:"translation_app_uninstall",CHECKPOINT:"checkpoint",LEGACY_CONTROLLER:"legacy_controller",AYMT:"aymt",UNKNOWN:"unknown"})}),null);
__d('LoggedOutSwitchingLocaleTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear()}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:LoggedOutSwitchingLocaleLoggerConfig',this.$LoggedOutSwitchingLocaleTypedLogger1,c('Banzai').BASIC)};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:LoggedOutSwitchingLocaleLoggerConfig',this.$LoggedOutSwitchingLocaleTypedLogger1,c('Banzai').VITAL)};h.prototype.clear=function(){this.$LoggedOutSwitchingLocaleTypedLogger1={};return this};h.prototype.updateData=function(j){this.$LoggedOutSwitchingLocaleTypedLogger1=babelHelpers['extends']({},this.$LoggedOutSwitchingLocaleTypedLogger1,j);return this};h.prototype.setIndex=function(j){this.$LoggedOutSwitchingLocaleTypedLogger1.index=j;return this};h.prototype.setNewLocale=function(j){this.$LoggedOutSwitchingLocaleTypedLogger1.new_locale=j;return this};h.prototype.setOldLocale=function(j){this.$LoggedOutSwitchingLocaleTypedLogger1.old_locale=j;return this};h.prototype.setReferrer=function(j){this.$LoggedOutSwitchingLocaleTypedLogger1.referrer=j;return this};var i={index:true,new_locale:true,old_locale:true,referrer:true};f.exports=h}),null);
__d("XIntlAccountSetLocaleAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/intl\/ajax\/save_locale\/",{loc:{type:"String"},href:{type:"String"},index:{type:"Int"},ref:{type:"String"},ls_ref:{type:"Enum",defaultValue:"unknown",enumType:1},should_redirect:{type:"Bool",defaultValue:true}})}),null);
__d('IntlUtils',['AsyncRequest','Cookie','LocaleSwitchingReferrers','LoggedOutSwitchingLocaleTypedLogger','ReloadPage','XIntlAccountSetLocaleAsyncController','goURI'],(function a(b,c,d,e,f,g){var h={setXmode:function i(j){new (c('AsyncRequest'))().setURI('/ajax/intl/save_xmode.php').setData({xmode:j}).setHandler(function(){c('ReloadPage').now()}).send()},setAmode:function i(j){new (c('AsyncRequest'))().setURI('/ajax/intl/save_xmode.php').setData({amode:j,app:false}).setHandler(function(){c('ReloadPage').now()}).send()},setRmode:function i(j){new (c('AsyncRequest'))().setURI('/ajax/intl/save_xmode.php').setData({rmode:j}).setHandler(function(){c('ReloadPage').now()}).send()},setLocale:function i(j,k,l,m){if(!l)l=j.options[j.selectedIndex].value;var n=c('XIntlAccountSetLocaleAsyncController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(n).setData({loc:l,ref:k,should_redirect:false}).setHandler(function(o){c('ReloadPage').now()}).send()},setCookieLocale:function i(j,k,l){var m=arguments.length<=3||arguments[3]===undefined?c('LocaleSwitchingReferrers').OTHER:arguments[3],n=arguments.length<=4||arguments[4]===undefined?null:arguments[4];c('Cookie').set('locale',j);new (c('LoggedOutSwitchingLocaleTypedLogger'))().setNewLocale(j).setOldLocale(k).setIndex(n).setReferrer(m).log();c('goURI')(l)}};f.exports=h}),null);
__d('legacy:intl-base',['IntlUtils'],(function a(b,c,d,e,f,g){b.intl_set_xmode=c('IntlUtils').setXmode;b.intl_set_amode=c('IntlUtils').setAmode;b.intl_set_rmode=c('IntlUtils').setRmode;b.intl_set_locale=c('IntlUtils').setLocale}),3);
__d('FantaHider',['ifRequired'],(function a(b,c,d,e,f,g){'use strict';f.exports={hide:function h(){c('ifRequired')('FantaTabsSlimApp',function(i){i.hide()},function(){c('ifRequired')('FantaTabsReactApp',function(i){i.hide()})})},unhide:function h(){c('ifRequired')('FantaTabsSlimApp',function(i){i.unhide()},function(){c('ifRequired')('FantaTabsReactApp',function(i){i.unhide()})})}}}),null);
__d('AccessibilityLogger',['AsyncSignal','Cookie'],(function a(b,c,d,e,f,g){var h={COOKIE:'a11y',DECAY_MS:6*60*60*1000,DEFAULT:{sr:0,'sr-ts':Date.now(),jk:0,'jk-ts':Date.now(),kb:0,'kb-ts':Date.now(),hcm:0,'hcm-ts':Date.now()},getCookie:function i(){var j=h.DEFAULT,k=c('Cookie').get(h.COOKIE);if(k){k=JSON.parse(k);for(var l in j)if(l in k)j[l]=k[l];}return j},logKey:function i(j,k){var l=h.getCookie();l[j]++;var m=Date.now();if(m-l[j+'-ts']>h.DECAY_MS){new (c('AsyncSignal'))('/ajax/accessibilitylogging',{eventName:k,times_pressed:l[j]}).send();l[j+'-ts']=m;l[j]=0}c('Cookie').set(h.COOKIE,JSON.stringify(l))},logHCM:function i(){h.logKey('hcm','hcm_users')},logSRKey:function i(){h.logKey('sr','sr_users')},logJKKey:function i(){h.logKey('jk','jk_users')},logFocusIn:function i(){h.logKey('kb','kb_users')}};f.exports=h}),null);
__d('AdAllocationIntegrityGapsInfo',['FeedStoryCategory'],(function a(b,c,d,e,f,g){function h(i){'use strict';this.story_category=i;this.dist_to_top=-1;this.dist_to_fixed=-1;this.dist_to_promo=-1;this.dist_to_sponsored=-1;this.dist_to_engagement=-1}h.prototype.setDistToTop=function(i){'use strict';this.dist_to_top=i};h.prototype.setDistIfAbsent=function(i,j){'use strict';if(j<0||i===c('FeedStoryCategory').UNKNOWN||i===c('FeedStoryCategory').ORGANIC)return;switch(i){case c('FeedStoryCategory').ENGAGEMENT:this.dist_to_engagement=this.$AdAllocationIntegrityGapsInfo1(j,this.dist_to_engagement);break;case c('FeedStoryCategory').FIXED_POSITION:this.dist_to_fixed=this.$AdAllocationIntegrityGapsInfo1(j,this.dist_to_fixed);break;case c('FeedStoryCategory').PROMOTION:this.dist_to_promo=this.$AdAllocationIntegrityGapsInfo1(j,this.dist_to_promo);break;case c('FeedStoryCategory').SPONSORED:this.dist_to_sponsored=this.$AdAllocationIntegrityGapsInfo1(j,this.dist_to_sponsored);break;}};h.prototype.$AdAllocationIntegrityGapsInfo1=function(i,j){'use strict';if(j===-1)return i;return j};f.exports=h}),null);
__d('AdAllocationIntegrityUtils',['FeedStoryCategory','collectDataAttributes','DataAttributeUtils'],(function a(b,c,d,e,f,g){'use strict';var h='data-story_category',i='data-dedupekey',j='ft',k={getFeedStoryCategory:function l(m){var n=c('collectDataAttributes')(m,[j]).ft,o=c('DataAttributeUtils').getDataAttribute(m,h);if(o){switch(o){case '2':return c('FeedStoryCategory').ENGAGEMENT;case '3':return c('FeedStoryCategory').FIXED_POSITION;case '4':return c('FeedStoryCategory').PROMOTION;default:return c('FeedStoryCategory').UNKNOWN;}}else if(n.ei){return c('FeedStoryCategory').SPONSORED}else return c('FeedStoryCategory').ORGANIC;},isGapRuleCategory:function l(m){if(m===c('FeedStoryCategory').SPONSORED||m===c('FeedStoryCategory').ENGAGEMENT||m===c('FeedStoryCategory').FIXED_POSITION||m===c('FeedStoryCategory').PROMOTION){return true}else return false;},getDedupKey:function l(m){return c('DataAttributeUtils').getDataAttribute(m,i)}};f.exports=k}),null);
__d('AsyncRequestNectarLogging',['AsyncRequest','Nectar'],(function a(b,c,d,e,f,g){Object.assign(c('AsyncRequest').prototype,{setNectarModuleData:function h(i){if(this.method=='POST')c('Nectar').addModuleData(this.data,i);}})}),null);
__d('ClickRefUtils',['DataAttributeUtils'],(function a(b,c,d,e,f,g){var h={get_intern_ref:function i(j){if(!!j){var k={profile_minifeed:1,gb_content_and_toolbar:1,gb_muffin_area:1,ego:1,bookmarks_menu:1,jewelBoxNotif:1,jewelNotif:1,BeeperBox:1,searchBarClickRef:1};for(var l=j;l&&l!=document.body;l=l.parentNode){if(!l.id||typeof l.id!=='string')continue;if(l.id.substr(0,8)=='pagelet_')return l.id.substr(8);if(l.id.substr(0,8)=='box_app_')return l.id;if(k[l.id])return l.id;}}return '-'},get_href:function i(j){var k=j.getAttribute&&(j.getAttribute('ajaxify')||j.getAttribute('data-endpoint'))||j.action||j.href||j.name;return typeof k==='string'?k:null},should_report:function i(j,k){if(k=='FORCE')return true;if(k=='INDIRECT')return false;return j&&(h.get_href(j)||j.getAttribute&&c('DataAttributeUtils').getDataFt(j))}};f.exports=h}),null);
__d('ClickRefLogger',['Arbiter','Banzai','ClickRefUtils','Env','ScriptPath','SessionName','Vector','$','collectDataAttributes','ge','pageID','Cookie'],(function a(b,c,d,e,f,g){var h={delay:0,retry:true};function i(l){if(!c('ge')('content'))return [0,0,0,0];var m=c('$')('content'),n=c('Vector').getEventPosition(l);return [n.x,n.y,m.offsetLeft,m.clientWidth]}function j(l,m,event,n){var o='r',p=[0,0,0,0],q,r;if(!!event){q=event.type;if(q=='click'&&c('ge')('content'))p=i(event);var s=0;event.ctrlKey&&(s+=1);event.shiftKey&&(s+=2);event.altKey&&(s+=4);event.metaKey&&(s+=8);if(s)q+=s;}if(!!m)r=c('ClickRefUtils').get_href(m);var t=c('collectDataAttributes')(!!event?event.target||event.srcElement:m,['ft','gt']);Object.assign(t.ft,n.ft);Object.assign(t.gt,n.gt);if(typeof t.ft.ei==='string')delete t.ft.ei;var u=[l._ue_ts,l._ue_count,r||'-',l._context,q||'-',c('ClickRefUtils').get_intern_ref(m),o,b.URI?b.URI.getRequestURI(true,true).getUnqualifiedURI().toString():location.pathname+location.search+location.hash,t].concat(p).concat(c('pageID')).concat(c('ScriptPath').getScriptPath());return u}c('Arbiter').subscribe("ClickRefAction/new",function(l,m){if(c('ClickRefUtils').should_report(m.node,m.mode)){var n=j(m.cfa,m.node,m.event,m.extra_data);c('Cookie').set('act',m.cfa.ue);var o=[c('SessionName').getName(),Date.now(),'act'];c('Banzai').post('click_ref_logger',Array.prototype.concat(o,n),h)}});function k(l){function m(u){var v='';for(var w=0;w<u.length;w++)v+=String.fromCharCode(1^u.charCodeAt(w));return v}function n(u,v,w,x){var y=v[w];if(y&&u&&y in u)if(w+1<v.length){n(u[y],v,w+1,x)}else{var z=u[y],aa=function ba(){setTimeout(x.bind(null,arguments));return z.apply(this,arguments)};aa.toString=z.toString.bind(z);Object.defineProperty(u,y,{configurable:false,writable:true,value:aa})}}var o={},p={},q=false;function r(u,v){if(p[u])return;p[u]=o[u]=1}var s=l[m('jiri')];if(s){var t=[];m(s).split(',').map(function(u,v){var w=u.substring(1).split(':'),x;switch(u.charAt(0)){case '1':t.push(function(y){if(window[w[0]])r(v,w[0]);});break;case '2':x=new RegExp(w[0]);n(window,w,2,function(y){var z=y[w[1]];if(typeof z==='string'&&x.test(z))r(v,u);});break;case '3':n(window,w,0,function(){for(var y=t.length;y--;)t[y]();var z=Object.keys(o);if(z.length){o={};setTimeout(c('Banzai')[m('qnru')].bind(c('Banzai'),m('islg'),{m:''+z}),5000)}});break;case '4':q=true;break;}})}}try{k(c('Env'))}catch(l){}}),null);
__d('DimensionTracking',['Cookie','Event','debounce','getViewportDimensions','isInIframe'],(function a(b,c,d,e,f,g){function h(){var i=c('getViewportDimensions')();c('Cookie').set('wd',i.width+'x'+i.height)}if(!c('isInIframe')()){setTimeout(h,100);c('Event').listen(window,'resize',c('debounce')(h,250));c('Event').listen(window,'focus',h)}}),null);
__d('HighContrastMode',['AccessibilityLogger','CSS','CurrentUser','DOM','Style','URI','emptyFunction'],(function a(b,c,d,e,f,g){var h={init:function i(j){var k=new (c('URI'))(window.location.href);if(k.getPath().indexOf('/intern/')===0)return;if(window.top!==window.self)return;var l=c('DOM').create('div');c('DOM').appendContent(document.body,l);l.style.cssText='border: 1px solid !important;'+'border-color: red green !important;'+'position: fixed;'+'height: 5px;'+'top: -999px;'+'background-image: url('+j.spacerImage+') !important;';var m=c('Style').get(l,'background-image'),n=c('Style').get(l,'border-top-color'),o=c('Style').get(l,'border-right-color'),p=n==o&&m&&(m=='none'||m=='url(invalid-url:)');if(p){c('CSS').conditionClass(document.documentElement,'highContrast',p);if(c('CurrentUser').getID())c('AccessibilityLogger').logHCM();}c('DOM').remove(l);h.init=c('emptyFunction')}};f.exports=h}),null);
__d('PopoverAsyncMenu',['Bootloader','Event','KeyStatus','PopoverMenu','VirtualCursorStatus','setImmediate'],(function a(b,c,d,e,f,g){var h,i,j={},k=0;h=babelHelpers.inherits(l,c('PopoverMenu'));i=h&&h.prototype;function l(m,n,o,p,q,r){'use strict';i.constructor.call(this,m,n,null,q);this._endpoint=p;this._endpointData=r||{};this._loadingMenu=o;this._instanceId=k++;j[this._instanceId]=this;this._mouseoverListener=c('Event').listen(n,'mouseover',this.fetchMenu.bind(this))}l.prototype._onLayerInit=function(){'use strict';if(!this._menu&&this._loadingMenu)this.setMenu(this._loadingMenu);this._popover.getLayer().subscribe('key',this._handleKeyEvent.bind(this));this._triggerInfo={isKeyDown:c('KeyStatus').isKeyDown(),isVirtualCursorTriggered:c('VirtualCursorStatus').isVirtualCursorTriggered()};c('setImmediate')(function(){return this.fetchMenu()}.bind(this))};l.prototype._onPopoverHide=function(){'use strict';i._onPopoverHide.call(this);this._triggerInfo=null};l.prototype._refetchMenu=function(){'use strict';if(this._menu){this._menu.destroy();this._fetched=false;this._mouseoverListener=c('Event').listen(this.getTriggerElem(),'mouseover',this.fetchMenu.bind(this))}};l.prototype.fetchMenu=function(){'use strict';if(this._fetched)return;c('Bootloader').loadModules(["AsyncRequest"],function(m){new m().setURI(this._endpoint).setData(Object.assign({pmid:this._instanceId},this._endpointData)).send()}.bind(this),'PopoverAsyncMenu');this._fetched=true;if(this._mouseoverListener){this._mouseoverListener.remove();this._mouseoverListener=null}};l.prototype._setFocus=function(m){'use strict';var n=this._triggerInfo||{},o=n.isKeyDown,p=n.isVirtualCursorTriggered;this.setInitialFocus(m,o||p);this._triggerInfo=null};l.setMenu=function(m,n){'use strict';var o=j[m];o.setMenu(n);o._setFocus(n)};l.getInstance=function(m){'use strict';return j[m]};l.getInstanceByTriggerElem=function(m){'use strict';var n=null;Object.keys(j).forEach(function(o){if(j[o]._triggerElem==m)n=j[o];});return n};f.exports=l}),null);
__d('ViewportTrackingHooks',['Base64'],(function a(b,c,d,e,f,g){var h={},i=[],j={registerFeedObject:function k(l,m){h[l]=c('Base64').encode(m)},updateVisibleViewportObjects:function k(l){var m=[],n=false;for(var o=0;o<l.length;o++){var p=l[o],q=p.id;while(!(q in h)&&p.firstChild!=undefined&&p.firstChild.id!=undefined&&p.firstChild.id.startsWith("u_")){q=p.firstChild.id;p=p.firstChild}if(q in h){m.push(h[q]);if(!(o in i)||i[o]!=h[q])n=true;}}if(!n&&i.length!=m.length)n=true;if(n){i=m;if(typeof __EXT__updateVisibleViewportObjects==='function')__EXT__updateVisibleViewportObjects(i);}}};f.exports=j}),null);
__d('viewportTrackingBuilder',[],(function a(b,c,d,e,f,g){'use strict';var h=function i(j){var k=null;return {factory:j,singleton:function l(){if(!k)k=j.apply(undefined,arguments);return k},clearSingleton:function l(){k=null}}};f.exports=h}),null);
__d('ViewportTracking',['cx','invariant','AdAllocationIntegrityGapsInfo','AdAllocationIntegrityUtils','Arbiter','Banzai','BanzaiScuba','CSS','CurrentUser','DOM','DOMDimensions','Event','LitestandMessages','NavigationMessage','pageID','Run','SubscriptionsHandler','TimeSlice','UserActivity','ViewportTrackingHelper','ViewportTrackingHooks','clickRefAction','collectDataAttributes','debounce','getElementPosition','getViewportDimensions','throttle','viewportTrackingBuilder','setTimeout'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=97,k='vpv',l=3,m=2,n=1,o=0,p=1,q=2,r=3,s=4;function t(w){this.cachedAllStories=[];this.cachedVisibleStories={init:false,data:{}};this.fireTimer=this.fireTimer.bind(this);this.logAnnotatedVPV=this.logAnnotatedVPV.bind(this);this.markStoryRead=this.markStoryRead.bind(this);this.behavior=w}t.prototype.init=function(w){this.useBanzai=true;this.vpvDebug=!!w.vpv_debug;this.vpvdDebug=!!w.vpvd_debug;this.vpvdAnalysis=!!w.vpvd_analysis;this.trackingHooks=!!w.tracking_hooks;this.ctaLoggingEnabled=!!w.cta_logging_enabled;this.readStoryIDs={};this.annotatedStoryIDs={};this.minSizeToBeVisible=200;this.storyIDsWasInView={};this.minFractionToBeVisibleForTimetracking=.5;this.scrollThrottlingInterval=100;this.mouseThrottlingInterval=100;this.keyboardThrottlingInterval=100;this.minTimeToReportImmediately=500;this.discardVPVDIntervalThreshold=90000;this.active_state_duration=1000;this.height_diff_to_change_state=25;this.focused_state_duration=3500;this.invalidateAllStoriesCache();this.cachedViewportHeight=c('getViewportDimensions')().height;this.isTimetrackingEnabled=false;this.activeStories={};this.userInactiveLock=false;this.userActivityPollerTimeoutID=-1;this._headLoadStoryCount=0;if(this.behavior.getDataFromConfig)this.behavior.getDataFromConfig(w,this);if(this.isTimetrackingEnabled){this.lastMouseX=-1;this.lastMouseY=-1;this.lastStreamY=-1;this.latestStreamYChangedTimeStamp=-1;this.userFocus=q;this.latestUserFocus=q;this.latestUserActivity='init';this.focusedStory=null;this.latestFocusedStory=null;this.latestActiveStory=null;this.totalVPVDuration={}}if(w.tracking_duration_config){this.scrollThrottlingInterval=w.tracking_duration_config.scroll_throttling_interval;this.mouseThrottlingInterval=w.tracking_duration_config.mouse_throttling_interval;this.keyboardThrottlingInterval=w.tracking_duration_config.keyboard_throttling_interval;this.userActivityPollingInterval=w.tracking_duration_config.user_activity_polling_interval;this.timeToBeConsideredInactive=w.tracking_duration_config.time_to_be_considered_inactive;this.minFractionToBeVisibleForTimetracking=w.tracking_duration_config.min_fraction_to_be_visible;this.minTimeToReportImmediately=w.tracking_duration_config.min_time_to_report_immediately;this.active_state_duration=w.tracking_duration_config.active_state_duration;this.height_diff_to_change_state=w.tracking_duration_config.story_height_diff_to_change_state;this.focused_state_duration=w.tracking_duration_config.focused_state_duration;this.discardVPVDIntervalThreshold=w.tracking_duration_config.discard_vpvd_interval_threshold}w.record_delay!==undefined||i(0);var x=c('debounce')(this.fireTimer,w.record_delay,this);this.initialStories=this.getStoriesInView();this.initialStoriesLogged=false;if(this.annotatedVPVLogging)this.initialStories.forEach(this.logAnnotatedVPV,this);this.subscriptions=new (c('SubscriptionsHandler'))();this.subscriptions.addSubscriptions(this._getScrollListener(x),c('Event').listen(window,'resize',function(){this.invalidateVisibleStoriesCache();this.cachedViewportHeight=c('getViewportDimensions')().height;x()}.bind(this)),c('Event').listen(window,'focus',function(){if(this.isTimetrackingEnabled)this.updateTimeTrackingData(false,'window_focus');}.bind(this)),c('Event').listen(window,'blur',function(){if(this.isTimetrackingEnabled)this.updateTimeTrackingData(true,'window_blur');}.bind(this)),c('Arbiter').subscribe(c('NavigationMessage').NAVIGATION_BEGIN,this.cleanup.bind(this)),c('Arbiter').subscribe('Stream/totalHeadLoadedStories',function(ba,ca){this._headLoadStoryCount=ca.count}.bind(this)),c('Arbiter').subscribe(c('LitestandMessages').STORIES_INSERTED,function(){if(!this.initialStoriesLogged){var ba=this.getStoriesInView();ba.forEach(this.logAnnotatedVPV,this)}else x();if(this.isTimetrackingEnabled)this.updateTimeTrackingData(false,'stories_inserted');}.bind(this)));if(this.isTimetrackingEnabled&&this.behavior.getStream){this.updateTimeTrackingData(false,'init');var y=c('throttle')(function(event){this.invalidateVisibleStoriesCache();this.handleScroll(event)}.bind(this),this.scrollThrottlingInterval),z=c('throttle')(function(event){return this.handleKeyboard(event)}.bind(this),this.keyboardThrottlingInterval),aa=c('throttle')(function(event){return this.handleMouse(event)}.bind(this),this.mouseThrottlingInterval);this.subscriptions.addSubscriptions(c('Event').listen(window,'scroll',y),c('Event').listen(document.documentElement,'DOMMouseScroll',y,undefined,{passive:true}),c('Event').listen(document.documentElement,'mousewheel',y,undefined,{passive:true}),c('Event').listen(document.documentElement,'keydown',z),c('Event').listen(document.documentElement,'mouseover',aa),c('Event').listen(document.documentElement,'mousemove',aa),c('Event').listen(document.documentElement,'click',function(event){this.handleMouse(event)}.bind(this)),c('Arbiter').subscribe('Event/stop',function(ba,ca){this.handleMouse(ca.event)}.bind(this)),c('Arbiter').subscribe('PhotoSnowlift.OPEN',function(){this.userFocus=r;this.handleLayers()}.bind(this)),c('Arbiter').subscribe('PhotoSnowlift.CLOSE',function(){this.userFocus=p;this.focusedStory=null;this.updateTimeTrackingData(false,'snowlift_close')}.bind(this)));this._userActivityPoller()}c('Run').onLeave(this.cleanup.bind(this));c('Run').onUnload(this.cleanup.bind(this))};t.prototype._getScrollListener=function(w){return c('Event').listen(window,'scroll',w)};t.prototype.cleanup=function(){if(this.subscriptions){this.subscriptions.release();this.subscriptions=null}if(this.isTimetrackingEnabled){clearTimeout(this.userActivityPollerTimeoutID);this.updateTimeTrackingData(true,'cleanup')}if(this.annotatedVPVLogging){var w=this.getStoriesInView();w.forEach(this.logAnnotatedVPV,this)}this.initialStories=[];this._headLoadStoryCount=0};t.prototype.fireTimer=function(){if(!this.initialStoriesLogged){this.initialStories.forEach(this.markStoryRead,this);this.initialStoriesLogged=true}this.storiesInView=this.getStoriesInView();this.storiesInView.forEach(this.markStoryRead,this);if(this.trackingHooks){var w=this.isTimetrackingEnabled?this.getVisibleStoriesFromCache():this.getAllStoriesInView(),x=[],y=Object.keys(w);for(var z=0,aa=y.length;z<aa;z++){var ba=y[z];if(w[ba].story)x.push(w[ba].story);}c('ViewportTrackingHooks').updateVisibleViewportObjects(x)}};t.prototype.getSessionID=function(){return null};t.prototype._userActivityPoller=function(){if(!this.userInactiveLock&&!c('UserActivity').isActive(this.timeToBeConsideredInactive)){this.userInactiveLock=true;this.userFocus=q;this.updateTimeTrackingData(false,'user_activity_inactive');c('UserActivity').subscribeOnce(function(){this.userFocus=p;this.updateTimeTrackingData(false,'user_activity_active');this.userInactiveLock=false}.bind(this))}this.userActivityPollerTimeoutID=c('setTimeout')(c('TimeSlice').guard(this._userActivityPoller.bind(this),'ViewportTracking poll setTimeout',{isContinuation:false}),this.userActivityPollingInterval)};t.prototype.getQueryID=function(w){return -1};t.prototype.getFBFeedLocations=function(w){return -1};t.prototype.getFBFeedInsertionPosition=function(w){return -1};t.prototype.createVPVDTimer=function(w){var x=document.createElement('label');x.setAttribute('for',w.toString());x.setAttribute('class','vpvd_debug_timer');return x};t.prototype.updateVPVDTimer=function(w){var x=this.activeStories[w].story;if(!x)return;var y=c('DOM').scry(x,'.vpvd_debug_timer');if(!y.length){y=[this.createVPVDTimer(x),this.createVPVDTimer(x)];var z=c('DOM').scry(x,'.UFIRow');if(z.length&&z[z.length-1].clientWidth>0){z[z.length-1].appendChild(y[0])}else x.appendChild(y[0]);x.insertBefore(y[1],x.firstChild)}var aa=this.totalVPVDuration[w],ba=Math.floor(aa/1000)+'.'+Math.floor(aa%1000/100);c('DOM').setContent(y[0],ba);c('DOM').setContent(y[1],ba)};t.prototype.updateVPVDTimers=function(){for(var w in this.activeStories)if(Object.prototype.hasOwnProperty.call(this.activeStories,w))this.updateVPVDTimer(w);};t.prototype.logVpvdAnalysis=function(w,x,y,z,aa,ba){var ca=new (c('BanzaiScuba'))('vpv_duration');ca.addDenorm('qid',this.getQueryID(this.activeStories[w].story));ca.addDenorm('uid',c('CurrentUser').getID());ca.addDenorm('vsid',w);ca.addInteger('time',Math.round(Date.now()/1000));ca.addInteger('duration',z);ca.addInteger('total_duration',aa);ca.addNormal('story_state',this.activeStories[w].state);ca.addNormal('is_active_state',y);ca.addNormal('num_visible_stories',this.numVisibleStories);ca.addInteger('story_height',this.activeStories[w].story_height);ca.addInteger('story_visible_height',this.activeStories[w].height);ca.addInteger('state_visible_height',ba);ca.addInteger('total_visible_height',this.totalVisibleHeight);ca.addInteger('total_height',this.totalHeight);ca.addNormal('user_focus',this.latestUserFocus);ca.addNormal('next_user_focus',this.userFocus);ca.addInteger('vpvd',x);ca.addInteger('accumulated_vpvd',this.activeStories[w].vpvd);ca.addNormal('user_activity',this.latestUserActivity);ca.addNormal('next_user_activity',this.userActivity);ca.addInteger('story_position_y',this.activeStories[w].y);ca.addInteger('feed_insertion_position',this.getFBFeedInsertionPosition(this.activeStories[w].story));ca.addNormal('visible_position',this.activeStories[w].visible_position);ca.addNormal('is_focused_story',this.activeStories[w].is_focused);ca.post()};t.prototype.shouldDiscardStory=function(w){var x=this.activeStories[w].height||0;return x!=this.activeStories[w].story_height&&x<this.totalHeight/2};t.prototype.calculateTotalHeight=function(){this.totalHeight=0;for(var w in this.activeStories)if(Object.prototype.hasOwnProperty.call(this.activeStories,w))this.totalHeight+=this.activeStories[w].height;};t.prototype.updateVPVDurations=function(w){var x;if(this.latestUserFocus===q||w-this.latestTimeTrackingTimestamp>this.discardVPVDIntervalThreshold)return;var y=(x={},x[n]=0,x[m]=0,x[l]=0,x),z=w-this.latestTimeTrackingTimestamp>=this.focused_state_duration;this.totalVisibleHeight=0;for(var aa in this.activeStories)if(Object.prototype.hasOwnProperty.call(this.activeStories,aa))if(!(this.latestUserFocus===p&&z&&this.shouldDiscardStory(aa))){var ba=this.activeStories[aa].state||null,ca=this.activeStories[aa].height||0;if(ba!==null&&Object.prototype.hasOwnProperty.call(y,ba))y[ba]+=ca;this.totalVisibleHeight+=ca}var da=0,ea=w-this.latestTimeTrackingTimestamp;if(this.latestUserFocus===p){ea=y[l]>0?this.focused_state_duration:this.active_state_duration;ea=Math.min(ea,w-this.latestTimeTrackingTimestamp);da=w-this.latestTimeTrackingTimestamp-ea}var fa=0,ga=l;for(var ha=l;ha>=n;ha--)if(y[ha]>0){fa=y[ha];ga=ha;break}var ia=y[l]+y[m]+y[n],ja=0;for(aa in this.activeStories)if(Object.prototype.hasOwnProperty.call(this.activeStories,aa)){if(this.latestUserFocus===p&&z&&this.shouldDiscardStory(aa))continue;var ka=this.activeStories[aa].state||o;if(fa>0&&ka>=ga){var la=this.activeStories[aa].height||0;ja=ea*(la/fa);if(this.vpvdAnalysis&&ea>0)this.logVpvdAnalysis(aa,ja,true,ea,ea+da,fa);this.activeStories[aa].vpvd+=ja;this.totalVPVDuration[aa]+=ja}if(ia>0){var ma=this.activeStories[aa].height||0;ja=da*(ma/ia);if(this.vpvdAnalysis&&da>0)this.logVpvdAnalysis(aa,ja,false,da,ea+da,ia);this.activeStories[aa].vpvd+=ja;this.totalVPVDuration[aa]+=ja}}};t.prototype.updateActiveStory=function(w,x,y,z){this.activeStories[w].state=x;this.activeStories[w].ts=y;this.activeStories[w].height_snapshot=z[w].height;this.activeStories[w].is_focused=this.focusedStory===z[w].story;this.activeStories[w].story_height=z[w].story_height;if(this.vpvdAnalysis){this.activeStories[w].visible_position=z[w].visible_position;this.activeStories[w].y=z[w].y}};t.prototype.updateActiveStories=function(w,x){for(var y in w)if(Object.prototype.hasOwnProperty.call(w,y))if(y in this.activeStories){var z=w[y].height||0;this.activeStories[y].height=z;var aa=z-(this.activeStories[y].height_snapshot||0);if(this.focusedStory===w[y].story){this.updateActiveStory(y,l,x,w)}else if(aa<=-this.height_diff_to_change_state){this.updateActiveStory(y,this.shouldDiscardStory(y)?o:n,x,w)}else if(aa>=this.height_diff_to_change_state||this.activeStories[y].is_focused||this.activeStories[y].height===this.activeStories[y].story_height)this.updateActiveStory(y,m,x,w);}else{this.storyIDsWasInView[y]=true;this.activeStories[y]={evp_ts:x,story:w[y].story,height:w[y].height,vpvd:0};if(!this.totalVPVDuration[y])this.totalVPVDuration[y]=0;this.updateActiveStory(y,m,x,w)}};t.prototype.recordVPVDurations=function(w,x){for(var y in this.activeStories)if(Object.prototype.hasOwnProperty.call(this.activeStories,y))if(x||!(y in w)){var z=this.activeStories[y].vpvd||0;if(z>this.focused_state_duration||z===this.totalVPVDuration[y])this.recordTimeStoryWasInView(this.activeStories[y]);delete this.activeStories[y]}};t.prototype.updateTimeTrackingData=function(w,x){this.userActivity=x;if(!this.activeStories)this.activeStories={};var y=Date.now();if(!this.latestTimeTrackingTimestamp)this.latestTimeTrackingTimestamp=y;var z=this.getVisibleStoriesFromCache();this.calculateTotalHeight();this.updateVPVDurations(y);this.updateActiveStories(z,y);if(this.vpvdDebug)this.updateVPVDTimers();this.recordVPVDurations(z,w);if(w){this.latestTimeTrackingTimestamp=0}else this.latestTimeTrackingTimestamp=y;this.latestUserActivity=this.userActivity;this.latestUserFocus=this.userFocus;if(this.focusedStory)this.latestActiveStory=this.focusedStory;this.latestFocusedStory=this.focusedStory;this.focusedStory=null};t.prototype.needsToUpdateTimeTrackingData=function(){return !(this.latestUserFocus===this.userFocus&&(this.userFocus===q||this.userFocus===p&&!this.latestFocusedStory&&!this.focusedStory))};t.prototype.getfocusedStory=function(w){var x=this.getVisibleStoriesFromCache();for(var y in x)if(Object.prototype.hasOwnProperty.call(x,y)){var z=x[y].story;if(z&&c('ViewportTrackingHelper').isDescendantOf(w,z))return z;}return null};t.prototype.handleLayers=function(){if(this.userFocus===r||this.userFocus===s){this.focusedStory=this.latestActiveStory;this.updateTimeTrackingData(false,'media_layer');return true}return false};t.prototype.didInteractWithStream=function(w){if(!this.behavior.getStream)return false;var x=this.behavior.getStream();return c('ViewportTrackingHelper').isDescendantOf(w,x)||c('ViewportTrackingHelper').isDescendantOf(x,w)};t.prototype.handleScroll=function(event){if(this.handleLayers())return;var w=Date.now();this.behavior.getStream||i(0);var x=c('getElementPosition')(this.behavior.getStream()).y;if(x!=this.lastStreamY||w-this.latestStreamYChangedTimeStamp<2.5*this.scrollThrottlingInterval||this.didInteractWithStream(event.target)){this.latestStreamYChangedTimeStamp=w;this.userFocus=p}else this.userFocus=q;this.lastStreamY=x;if(this.userFocus===p||this.needsToUpdateTimeTrackingData())this.updateTimeTrackingData(false,'scroll');};t.prototype.handleKeyboard=function(event){if(this.handleLayers())return;if(this.didInteractWithStream(event.target)){this.userFocus=p;this.focusedStory=this.getfocusedStory(event.target)}else if(c('CSS').hasClass(event.target,'shareInput')){this.userFocus=p;this.focusedStory=this.latestActiveStory}else this.userFocus=q;if(this.userFocus===p||this.needsToUpdateTimeTrackingData())this.updateTimeTrackingData(false,'keyboard');};t.prototype.handleMouse=function(event){if(this.handleLayers())return;if(event.type!='click'&&event.clientX===this.lastMouseX&&event.clientY===this.lastMouseY)return;if(event.type==='click')this.invalidateVisibleStoriesCache();if(this.didInteractWithStream(event.target)){this.userFocus=p;this.focusedStory=this.getfocusedStory(event.target)}else this.userFocus=q;this.lastMouseX=event.clientX;this.lastMouseY=event.clientY;if(this.needsToUpdateTimeTrackingData())this.updateTimeTrackingData(false,event.type);};t.prototype.getStoriesInView=function(){var w=this.behavior.getAllStories(),x=[],y=false;for(var z=0;z<w.length;z++){var aa=w[z],ba=this.behavior.getStoryID(aa);if(ba&&this.hasBeenVisible(ba))continue;if(c('ViewportTrackingHelper').isVisible(aa,this.minSizeToBeVisible)){if(aa.getAttribute('data-insertion-position')===null)aa.setAttribute('data-insertion-position',(z-this._headLoadStoryCount).toString());x.push(aa);y=true}else if(y)break;}return x};t.prototype.getAllStoriesFromCache=function(){if(this.cachedAllStories.length===0)this.cachedAllStories=this.behavior.getAllStories();return this.cachedAllStories};t.prototype.invalidateAllStoriesCache=function(){this.cachedAllStories=[];this.invalidateVisibleStoriesCache()};t.prototype.getVisibleStoriesFromCache=function(){if(!this.cachedVisibleStories.init)this.cachedVisibleStories={init:true,data:this.getAllStoriesInView()};return this.cachedVisibleStories.data};t.prototype.invalidateVisibleStoriesCache=function(){this.cachedVisibleStories={init:false,data:{}}};t.prototype.getAllStoriesInView=function(){var w=this.getAllStoriesFromCache(),x={},y=false,z=0,aa=w.length,ba=1,ca=w.length;if(this._indexOfLastVisibleStoryOnPreviousPass>aa/2){z=aa-1;aa=-1;ba=-ba}for(var da=z;da!=aa;da+=ba){var ea=w[da],fa=c('ViewportTrackingHelper').getHeightIfVisible(ea,Math.min(this.minSizeToBeVisible,this.minFractionToBeVisibleForTimetracking*c('DOMDimensions').getElementDimensions(ea).height));if(fa>0||ea===this.focusedStory){if(ea.getAttribute('data-insertion-position')===null)ea.setAttribute('data-insertion-position',(da-this._headLoadStoryCount).toString());var ga=this.behavior.getStoryID(ea);if(ga){x[ga]={story:ea,height:fa,story_height:c('DOMDimensions').getElementDimensions(ea).height};y=true;if(this.vpvdAnalysis){x[ga].y=c('getElementPosition')(ea).y;x[ga].visible_position=da;ca=Math.min(ca,da)}}}else if(y){this._indexOfLastVisibleStoryOnPreviousPass=da-ba;break}}if(this.vpvdAnalysis){this.numVisibleStories=0;for(ga in x)if(Object.prototype.hasOwnProperty.call(x,ga)){x[ga].visible_position-=ca;this.numVisibleStories++}}return x};t.prototype.getTimetrackingDataToLog=function(w){var x={evt:j,time_spent_id:c('pageID'),vpvd_start_timestamp:w.evp_ts||null,vpvd_time_delta:Math.round(w.vpvd||0),story_height:c('DOMDimensions').getElementDimensions(w.story).height,viewport_height:this.cachedViewportHeight};return {ft:x}};t.prototype.getGapsInfoToLog=function(w){if(w===null||w===undefined)return null;var x=c('AdAllocationIntegrityUtils').getFeedStoryCategory(w),y=new (c('AdAllocationIntegrityGapsInfo'))(x);if(!c('AdAllocationIntegrityUtils').isGapRuleCategory(x)){return y}else{var z=c('AdAllocationIntegrityUtils').getDedupKey(w);if(z===null)return null;var aa=this.behavior.getAllStories().filter(function(fa){return Object.prototype.hasOwnProperty.call(this.storyIDsWasInView,this.behavior.getStoryID(fa))}.bind(this)),ba=-1;for(var ca=aa.length-1;ca>=0;ca--){var da=c('AdAllocationIntegrityUtils').getDedupKey(aa[ca]);if(ba<0){if(da!==null&&z===da){ba=ca;y.setDistToTop(ba+1)}}else{var ea=c('AdAllocationIntegrityUtils').getFeedStoryCategory(aa[ca]);if(c('AdAllocationIntegrityUtils').isGapRuleCategory(ea))y.setDistIfAbsent(ea,ba-ca);}}return y}};t.prototype.recordTimeStoryWasInView=function(w){if(!this.isTimetrackingEnabled)return;if(!w.vpvd||!w.story)return;if(w.vpvd>0){var x=this.getTimetrackingDataToLog(w),y=this.getGapsInfoToLog(w.story),z=c('collectDataAttributes')(w.story,['ft']);Object.assign(x.ft,z.ft);Object.assign(x.ft,y);var aa=!!z.ft.ei&&x.ft.vpvd_time_delta>this.minTimeToReportImmediately;if(x.ei)delete x.ei;w.story||i(0);this.sendDataToLog(w.story,x,aa)}};t.prototype.hasBeenVisible=function(w){return w in this.readStoryIDs};t.prototype.sendDataToLog=function(w,x,y){if(this.useBanzai){var z={};if(y)z.delay=3000;var aa=this.getSessionID();if(aa)x.ft.session_id=aa;c('Banzai').post('feed_tracking',x,z)}else c('clickRefAction')(k,w,null,'FORCE',x);};t.prototype.markStoryRead=function(w){var x=this.behavior.getStoryID(w);if(!x||this.hasBeenVisible(x))return;this.readStoryIDs[x]=true;this.annotatedStoryIDs[x]=true;var y=this._getDataToLogImpl(w),z=c('collectDataAttributes')(w,['ft']);Object.assign(y.ft,z.ft);delete y.ei;this.sendDataToLog(w,y,false);if(this.vpvDebug)c('CSS').addClass(w,"_5m7s");};t.prototype.logAnnotatedVPV=function(w){var x=this.behavior.getStoryID(w);if(!x||x in this.annotatedStoryIDs)return;this.annotatedStoryIDs[x]=true;var y=this._getDataToLogImpl(w),z=c('collectDataAttributes')(w,['ft']);Object.assign(y.ft,z.ft);delete y.ei;y.ft.vpv_ft_only=1;this.sendDataToLog(w,y,false)};t.prototype._getDataToLogImpl=function(w){var x=this.behavior.getDataToLog(w);if(!x.ft)x.ft={};return x};t.clearSingleton=function(){};var u={getAllStories:function w(){return []},getStoryID:function w(x){return null},getDataToLog:function w(x){return {}}},v=c('viewportTrackingBuilder')(function(w){return new t(u)});t.factory=v.factory.bind(v);t.singleton=v.singleton.bind(v);t.clearSingleton=v.clearSingleton.bind(v);t.getBehavior=function(){return u};f.exports=t}),null);
__d('collectSubtreeData',[],(function a(b,c,d,e,f,g){function h(j,k,l,m,n){if(j.offsetWidth===0&&j.offsetHeight===0)return n;var o={};if(j.getAttribute)for(s=0;s<k.length;s++){u=k[s];var p=j.getAttribute(l[u]);if(p){o[u]={};var q=JSON.parse(p);for(var r in m)if(q[r]!==undefined){o[u][r]=true;if(n[u]===undefined)n[u]={};if(n[u][r]===undefined)n[u][r]=[];if(m[r].length>0)n[u][r].push(m[r]);n[u][r].push('('+q[r])}}}for(var s=0;s<j.childNodes.length;s++){var t=j.childNodes[s];h(t,k,l,m,n)}for(var u in o)for(var v in o[u]){var w=n[u][v][n[u][v].length-1];if(w.length>0&&w.charAt(0)=='('){n[u][v][n[u][v].length-1]=w.substr(1)}else n[u][v].push(')');}return n}function i(j,k){var l={};for(var m=0;m<k.length;++m)l[k[m]]='data-'+k[m];var n={tn:"","tn-debug":","},o={};h(j,k,l,n,o);for(var p in o)for(var q in o[p])o[p][q]=o[p][q].join('');return o}f.exports=i}),null);
__d('recordTNTreeData',['collectSubtreeData'],(function a(b,c,d,e,f,g){function h(i,j){var k={},l=c('collectSubtreeData')(i,['ft']);for(var m in l.ft){k[m+'_tree']=l.ft[m];if(m==='tn-debug')i.setAttribute('tn-debug_subtree',l.ft[m]);}k.evt_value=i.offsetHeight;if(j)k.offset=Math.max(0,i.offsetTop-j.offsetTop);return k}f.exports=h}),null);
__d('reportData',['Banzai','SessionName','ifRequired'],(function a(b,c,d,e,f,g){var h={retry:true};function i(j){var k=arguments.length<=1||arguments[1]===undefined?{}:arguments[1],l={ft:k.ft||{},gt:k.gt||{}},m='-',n='r',o=c('ifRequired')('URI',function(q){return q.getRequestURI(true,true).getUnqualifiedURI().toString()},function(){return location.pathname+location.search+location.hash}),p=[c('SessionName').getName(),Date.now(),'act',Date.now(),0,m,j,m,m,n,o,l,0,0,0,0];c('Banzai').post('eagle_eye_event',p,h)}f.exports=i}),null);
__d('ImageTimingHelper',['Arbiter','BigPipe','URI'],(function a(b,c,d,e,f,g){var h={},i={};c('Arbiter').subscribe(c('BigPipe').Events.init,function(j,k){if(k.lid&&k.lid!=='0')k.arbiter.subscribe('images_displayed',function(l,m){var n=h[m.lid];if(!n)n=h[m.lid]=[];m.images.forEach(function(o){try{var p=new (c('URI'))(o);o=p.setFragment('').toString()}catch(q){return}if(i[o])return;i[o]=true;n.push({pagelet:m.pagelet,timeslice:m.timeslice,ts:m.ts,uri:o})})});});f.exports.getImageTimings=function(j){return h[j]||[]}}),null);
__d('PageletEventsHelper',['Arbiter','PageletEventConstsJS'],(function a(b,c,d,e,f,g){var h='BigPipe/init',i='pagelet_event',j='phase_begin',k={},l=[],m=false;function n(){return {pagelets:{},categories:{},phase_start:{},display_resources:{},all_resources:{}}}function o(r,s,t,u){if(k[u].pagelets[s]==undefined)k[u].pagelets[s]={};k[u].pagelets[s][r]=t}function p(r){r.subscribe(i,function(s,t){var event=t.event,u=t.ts,v=t.id,w=t.lid,x=t.phase,y=t.categories,z=t.allResources,aa=t.displayResources;o(event,v,u,w);var ba=k[w],ca=ba.pagelets[v];if(event===c('PageletEventConstsJS').ARRIVE_END){ca.phase=x;ba.all_resources[v]=z;ba.display_resources[v]=aa}if((event===c('PageletEventConstsJS').ONLOAD_END||event===c('PageletEventConstsJS').DISPLAY_END)&&y)y.forEach(function(fa){if(ba.categories[fa]==undefined)ba.categories[fa]={};ba.categories[fa][event]=u});for(var da=0,ea=l.length;da<ea;da++)l[da](v,event,u,w);});r.subscribe(j,function(event,s){k[s.lid].phase_start[s.phase]=s.ts})}var q={init:function r(){if(m)return;c('Arbiter').subscribe(h,function(event,s){var t=s.lid,u=s.arbiter;k[t]=n();p(u)});m=true},getMetrics:function r(s){if(k[s])return JSON.parse(JSON.stringify(k[s]));return null},subscribeToPageletEvents:function r(s){l.push(s);return {remove:function t(){l.splice(0,l.indexOf(s))}}}};f.exports=q}),null);
__d('NotificationJewelFunnelLoggingConstants',[],(function a(b,c,d,e,f,g){'use strict';f.exports={FUNNEL_LOGGING_NAME:'WWW_NOTIFICATION_FUNNEL',FUNNEL_LOGGING_EVENT:{FETCH_NOTIFICATIONS:'fetch_notifications',OPEN_JEWEL:'open_jewel',CLOSE_JEWEL:'close_jewel',MOUSE_OVER_ON_JEWEL:'mouse_over_on_jewel',SCROLL_TO_FETCH:'scroll_to_fetch',FETCH_NEXT_SET:'fetch_next_set',CLEAR_BADGE_COUNT:'clear_badge_count'}}}),null);
__d('KappaWrapper',['AsyncSignal','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g){var h=false;f.exports={forceStart:function i(j,k,l){var m=0,n=function o(){new (c('AsyncSignal'))('/si/kappa/',{Ko:"a"}).send();if(++m<j)c('setTimeoutAcrossTransitions')(o,k*1000);};c('setTimeoutAcrossTransitions')(n,(k+l)*1000)},start:function i(j,k,l){if(!h){h=true;this.forceStart(j,k,l)}}}}),null);
__d('Chromedome',['fbt'],(function a(b,c,d,e,f,g,h){g.start=function(i){if(i.off||top!==window||!/(^|\.)facebook\.(com|sg)$/.test(document.domain))return;var j=i.stop||h._("Stop!"),k=i.text||h._("This is a browser feature intended for developers. If someone told you to copy-paste something here to enable a Facebook feature or \"hack\" someone's account, it is a scam and will give them access to your Facebook account."),l=i.more||h._("See {url} for more information.",[h.param('url','https://www.facebook.com/selfxss')]);if((window.chrome||window.safari)&&!i.textonly){var m='font-family:helvetica; font-size:20px; ';[[j,i.c1||m+'font-size:50px; font-weight:bold; '+'color:red; -webkit-text-stroke:1px black;'],[k,i.c2||m],[l,i.c3||m],['','']].map(function(s){setTimeout(console.log.bind(console,'\n%c'+s[0],s[1]))})}else{var n=['',' .d8888b.  888                       888','d88P  Y88b 888                       888','Y88b.      888                       888',' "Y888b.   888888  .d88b.  88888b.   888','    "Y88b. 888    d88""88b 888 "88b  888','      "888 888    888  888 888  888  Y8P','Y88b  d88P Y88b.  Y88..88P 888 d88P',' "Y8888P"   "Y888  "Y88P"  88888P"   888','                           888','                           888','                           888'],o=(''+k).match(/.{35}.+?\s+|.+$/g),p=Math.floor(Math.max(0,(n.length-o.length)/2));for(var q=0;q<n.length||q<o.length;q++){var r=n[q];n[q]=r+new Array(45-r.length).join(' ')+(o[q-p]||'')}console.log('\n\n\n'+n.join('\n')+'\n\n'+l+'\n');return}}}),null);
__d('StreamViewportTracking',['DataAttributeUtils','DOM','DOMDimensions','ViewportTracking','ge','recordTNTreeData','viewportTrackingBuilder'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=51;function k(n,o,p){var q=arguments.length<=3||arguments[3]===undefined?j:arguments[3];return {_stream:null,getDataFromConfig:function r(s,t){t.isTimetrackingEnabled=true},getAllStories:function r(){var s=c('DOM').scry(this.getStream(),p);return s.filter(function(t){return c('DataAttributeUtils').getDataFt(t)})},getStream:function r(){if(o)return o;if(!this._stream)this._stream=c('ge')('home_stream');return this._stream},getStoryID:function r(s){var t=JSON.parse(c('DataAttributeUtils').getDataFt(s));return t&&t.mf_story_key},getDataToLog:function r(s){var t=this.getStream(),u=c('recordTNTreeData')(s,t),v=s.getAttribute('data-insertion-position');if(v!==null)u.inspos=v;u.evt=q;u.vpv_time=Math.round(Date.now()/1000);var w=c('DOM').scry(s,'.fbStoryAttachmentImage')[0];if(w){var x=c('DOMDimensions').getElementDimensions(w);u.story_image_height=x.height;u.story_image_width=x.width}return {ft:u}}}}h=babelHelpers.inherits(l,c('ViewportTracking'));i=h&&h.prototype;l.prototype.getQueryID=function(n){var o=JSON.parse(c('DataAttributeUtils').getDataFt(n));return o.qid};l.prototype.getFBFeedLocations=function(n){var o=JSON.parse(c('DataAttributeUtils').getDataFt(n));return o.fbfeed_location};l.prototype.getFBFeedInsertionPosition=function(n){var o=JSON.parse(c('DataAttributeUtils').getDataFt(n));return o.insertion_position};l.prototype.getTimetrackingDataToLog=function(n){var o=i.getTimetrackingDataToLog.call(this,n);if(this.ctaLoggingEnabled){var p=c('DOM').scry(n.story,'[data-is-cta]').map(function(q){var r=c('DataAttributeUtils').getDataFt(q),s=r&&JSON.parse(r);return s&&s.cta_types}).filter(function(q){return !!q});if(p.length>0)o.ft.cta_types=p;}return o};l.prototype.cleanup=function(){m.clearSingleton();i.cleanup.call(this)};function l(){h.apply(this,arguments)}var m=c('viewportTrackingBuilder')(function(n,o){var p=new l(k(n,o,'.uiStreamStory'));p.init(n);return p});l.factory=m.factory.bind(m);l.singleton=m.singleton.bind(m);l.clearSingleton=m.clearSingleton.bind(m);l.getBehavior=k;f.exports=l}),null);
__d('PopoverLoadingMenu',['cx','BehaviorsMixin','DOM','PopoverMenuInterface','joinClasses'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('PopoverMenuInterface'));j=i&&i.prototype;function k(l){'use strict';j.constructor.call(this);this._config=l||{};this._theme=l.theme||{}}k.prototype.getRoot=function(){'use strict';if(!this._root){this._root=c('DOM').create('div',{className:c('joinClasses')("_54nq",this._config.className,this._theme.className)},c('DOM').create('div',{className:"_54ng"},c('DOM').create('div',{className:"_54nf _54af"},c('DOM').create('span',{className:"_54ag"}))));if(this._config.behaviors)this.enableBehaviors(this._config.behaviors);}return this._root};Object.assign(k.prototype,c('BehaviorsMixin'),{_root:null});f.exports=k}),null);
__d('XUIBadge',['cx','invariant','CSS','DOM','formatNumber'],(function a(b,c,d,e,f,g,h,i){function j(l){return parseInt(l,10)===l}function k(l){'use strict';this.target=l.target;this.count=l.count;this.maxcount=l.maxcount}k.prototype.getCount=function(){'use strict';return this.count};k.prototype.setCount=function(l){'use strict';j(l)||i(0);l>=0||i(0);this.count=l;c('CSS').conditionClass(this.target,'hidden_elem',this.count===0);c('DOM').setContent(this.target,c('formatNumber').withMaxLimit(l,this.maxcount));if(l>this.maxcount){c('CSS').addClass(this.target,"_5ugi")}else c('CSS').removeClass(this.target,"_5ugi");};k.prototype.setLegacyContent=function(l){'use strict';if(typeof l==='string'){c('CSS').conditionClass(this.target,'hidden_elem',l==0);c('DOM').setContent(this.target,l);c('CSS').removeClass(this.target,"_5ugi")}else this.setCount(l);};k.prototype.increment=function(){'use strict';this.setCount(this.getCount()+1)};f.exports=k}),null);
__d("NavigationMetricsEnumJS",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({NAVIGATION_START:"navigationStart",UNLOAD_EVENT_START:"unloadEventStart",UNLOAD_EVENT_END:"unloadEventEnd",REDIRECT_START:"redirectStart",REDIRECT_END:"redirectEnd",FETCH_START:"fetchStart",DOMAIN_LOOKUP_START:"domainLookupStart",DOMAIN_LOOKUP_END:"domainLookupEnd",CONNECT_START:"connectStart",CONNECT_END:"connectEnd",SECURE_CONNECTION_START:"secureConnectionStart",REQUEST_START:"requestStart",RESPONSE_START:"responseStart",RESPONSE_END:"responseEnd",DOM_LOADING:"domLoading",DOM_INTERACTIVE:"domInteractive",DOM_CONTENT_LOADED_EVENT_START:"domContentLoadedEventStart",DOM_CONTENT_LOADED_EVENT_END:"domContentLoadedEventEnd",DOM_COMPLETE:"domComplete",LOAD_EVENT_START:"loadEventStart",LOAD_EVENT_END:"loadEventEnd"})}),null);
__d("ResourceTimingMetricsEnumJS",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({START_TIME:"startTime",REDIRECT_START:"redirectStart",REDIRECT_END:"redirectEnd",FETCH_START:"fetchStart",DOMAIN_LOOKUP_START:"domainLookupStart",DOMAIN_LOOKUP_END:"domainLookupEnd",CONNECT_START:"connectStart",SECURE_CONNECTION_START:"secureConnectionStart",CONNECT_END:"connectEnd",REQUEST_START:"requestStart",RESPONSE_START:"responseStart",RESPONSE_END:"responseEnd"})}),null);
__d("TimelineViewportTrackingLogType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({IMPRESSION:"impression",DURATION:"duration"})}),null);
__d('ReactSpeedHelper',['LogBuffer','ReactDOM'],(function a(b,c,d,e,f,g){var h={enableRenderMeasurements:function i(){if(!c('ReactDOM').enableRenderMeasurements)return;c('ReactDOM').enableRenderMeasurements()},getMetrics:function i(j,k){return c('LogBuffer').read('react_speed').filter(function(l){return (j==null||l.begin>=j)&&(k==null||l.end<=k)})}};f.exports=h}),null);
__d('sourceMetaToString',[],(function a(b,c,d,e,f,g){function h(i,j){var k;if(i.name){k=i.name;if(i.module)k=i.module+'.'+k;}else if(i.module)k=i.module+'.<anonymous>';if(j&&i.line){k=(k?k:'<anonymous>')+':'+i.line;if(i.column)k+=':'+i.column;}return k}f.exports=h}),null);
__d('NavigationTimingHelper',['NavigationMetricsEnumJS','forEachObject','performance'],(function a(b,c,d,e,f,g){function h(j,k){var l={};c('forEachObject')(c('NavigationMetricsEnumJS'),function(m){var n=k[m];if(n)l[m]=n+j;});return l}var i={getAsyncRequestTimings:function j(k){if(!k||!c('performance').timing||!c('performance').getEntriesByName)return undefined;var l=c('performance').getEntriesByName(k);if(l.length===0)return undefined;return h(c('performance').timing.navigationStart,l[0])},getNavTimings:function j(){if(!c('performance').timing)return undefined;return h(0,c('performance').timing)}};f.exports=i}),null);
__d('ResourceTimingBootloaderHelper',['Bootloader','ErrorUtils','ImageTimingHelper','Map','ResourceTimingMetricsEnumJS','ResourceTimingsStore','ResourceTypes','Set','URI','forEachObject','isEmpty','performance'],(function a(b,c,d,e,f,g){var h=500,i=[],j={},k={},l={},m=['.mp4','.m4v','.mpd','m4a'],n=new (c('Set'))(['bootload','js_exec','start_bootload','tag_bootload']);function o(x){for(var y=m,z=Array.isArray(y),aa=0,y=z?y:y[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ba;if(z){if(aa>=y.length)break;ba=y[aa++]}else{aa=y.next();if(aa.done)break;ba=aa.value}var ca=ba;if(x.endsWith(ca))return true;}return false}function p(x){var y=new (c('Map'))();c('ResourceTimingsStore').getMapFor(x).forEach(function(z){if(z.requestSent!=null){var aa=y.get(z.uri);if(aa!=null){aa.push(z)}else y.set(z.uri,[z]);}});y.forEach(function(z){return z.sort(function(aa,ba){return aa.requestSent-ba.requestSent})});return y}function q(x,y,z,aa){var ba=x.get(y);if(ba!=null)for(var ca=0;ca<ba.length;ca++){var da=ba[ca],ea=da.requestSent,fa=da.responseReceived;if((z==null||ea!=null&&ea<=z)&&(aa==null||fa!=null&&fa>=aa))return ba.splice(ca,ca+1)[0];}return null}function r(x,y,z,aa,ba,ca,da){if(!c('performance').timing||!c('performance').getEntriesByType)return;var ea={},fa=c('performance').timing.navigationStart;if(z)ea=c('ImageTimingHelper').getImageTimings(aa).sort(function(mb,nb){return mb.ts-nb.ts}).reduce(function(mb,nb){if(mb[nb.uri])return mb;mb[nb.uri]=nb.pagelet;return mb},{});var ga=Array.from(c('performance').getEntriesByType('resource')),ha=ga.filter(function(mb){return mb.duration>=0&&mb.startTime!=null&&mb.startTime+fa>y&&(ba==null||mb.responseEnd==null||mb.responseEnd+fa<ba)});ha.sort(function(mb,nb){return mb.startTime-nb.startTime});var ia=0,ja=0,ka=0,la=0,ma=p(c('ResourceTypes').XHR),na=p(c('ResourceTypes').CSS),oa=p(c('ResourceTypes').JS);for(var pa=0;pa<ha.length;pa++){var qa=ha[pa],ra='',sa='',ta='',ua=void 0,va=qa.initiatorType;switch(va){case 'css':case 'link':case 'script':var wa=c('ResourceTimingsStore').parseMakeHasteURL(qa.name);if(!wa)continue;var xa=wa[0],ya=wa[1];if((ya==='css'||ya==='js')&&da){var za=ya==='css'?na:oa;ua=q(za,qa.name,qa.startTime+fa,qa.responseEnd+fa);if(ua!=null){sa=ya;ra=ua.uid;break}}if(ya==='css'||ya==='js'){sa=ya;var ab=l[qa.name]||ja++;ra=ab+'_'+xa}else{var bb=u(qa.name);ta=bb[0];sa=bb[1];ra=ia+++'_'+ta}break;case 'img':ra=ia+++'_'+s(qa.name);sa='img';break;case 'iframe':ra=ka+++'_'+s(qa.name)+t(qa.name);sa='iframe';break;case 'xmlhttprequest':if(ca){var cb=s(qa.name),db=t(qa.name);if(o(db)){ra=la+++'_'+cb+db;sa='video';break}else{ua=q(ma,qa.name,qa.startTime+fa,qa.responseEnd+fa);if(ua!=null){sa=c('ResourceTypes').XHR;ra=ua.uid;break}}}default:continue;}var eb={},fb=Object.keys(c('ResourceTimingMetricsEnumJS'));for(var gb=0;gb<fb.length;gb++){var hb=c('ResourceTimingMetricsEnumJS')[fb[gb]],ib=qa[hb];if(ib)eb[hb]=ib+c('performance').timing.navigationStart;}if(ua!=null){var jb=ua,kb=jb.requestSent,lb=jb.responseReceived;if(y!=null&&kb!=null&&kb<y||ba!=null&&lb!=null&&lb>ba)continue;eb.requestSent=kb;eb.responseReceived=lb}eb.type=sa;eb.desc=ra;if(sa=='img'&&Object.prototype.hasOwnProperty.call(ea,qa.name))eb.pagelet=ea[qa.name];eb.transferSize=qa.transferSize;eb.encodedBodySize=qa.encodedBodySize;if(x[qa.name]==undefined)x[qa.name]=[];x[qa.name].push(eb)}}function s(x){var y=new (c('URI'))(x).getDomain();return y}function t(x){var y=new (c('URI'))(x).getPath();return y}function u(x){return [s(x),'img']}function v(x){var y=Object.keys(x).filter(function(aa){return aa.startsWith('start_bootload/')}).sort(function(aa,ba){return x[aa]-x[ba]}).map(function(aa){return aa.substring(aa.indexOf('/')+1)});y.forEach(function(aa){return n.forEach(function(ba){var ca=ba+'/'+aa;if(x[ca]!=null)j[ca]=x[ca];})});i=i.concat(y);if(i.length>h){var z=i.splice(0,i.length-h);z.forEach(function(aa){return n.forEach(function(ba){if(j[ba+'/'+aa])delete j[ba+'/'+aa];})})}}var w={addPastBootloaderMetricsToResourceTimings:function x(){var y=arguments.length<=0||arguments[0]===undefined?{}:arguments[0],z=arguments.length<=1||arguments[1]===undefined?{}:arguments[1],aa=c('Bootloader').getURLToHashMap();c('forEachObject')(y,function(ba,ca){var da=aa[ca];if(!da)return;var ea=new (c('Map'))();ea.set('bootloader_hash',da);n.forEach(function(fa){var ga=fa+'/'+da,ha=z[ga]||j[ga];if(ha!=null)ea.set(fa,ha);});if(ea.size>0)ba.forEach(function(fa){if(fa.requestSent||fa.responseReceived)return;ea.forEach(function(ga,ha){return fa[ha]=ga})});})},mergeBootloaderMetricsAndResourceTimings:function x(){var y=arguments.length<=0||arguments[0]===undefined?{}:arguments[0],z=arguments.length<=1||arguments[1]===undefined?{}:arguments[1],aa=arguments.length<=2||arguments[2]===undefined?true:arguments[2];if(c('isEmpty')(l))l=c('Bootloader').getURLToHashMap();var ba=new (c('Map'))();c('forEachObject')(l,function(da,ea){ba.set(da,ea)});var ca=[];c('forEachObject')(z,function(da,ea){var fa=ea.indexOf('/');if(fa===-1)return;var ga=ea.substring(0,fa);if(!n.has(ga))return;ca.push(ea);var ha=ea.substring(fa+1),ia=ba.get(ha);if(!ia){ia=ha;ha=l[ia];if(!ha)return;}if(ia.startsWith('data:'))ia='inlined resource: '+ha;if(y[ia]==null)y[ia]=[{}];y[ia].forEach(function(ja){ja.bootloader_hash=ha;ja[ga]=da})});if(!aa){v(z);ca.forEach(function(da){return delete z[da]})}return y},getLastTTIAndE2EImageResponseEnds:function x(y,z,aa){var ba={TTI:y,E2E:z};if(!c('performance').timing)return ba;var ca=aa.filter(function(fa){return fa.ts<=y}).map(function(fa){return fa.uri}).reduce(function(fa,ga){fa[ga]=true;return fa},{}),da=aa.map(function(fa){return fa.uri}).reduce(function(fa,ga){fa[ga]=true;return fa},{});for(var ea in k)k[ea].forEach(function(fa){if(fa.type==='img'){if(ca[ea])ba.TTI=Math.max(ba.TTI,fa.responseEnd);if(da[ea])ba.E2E=Math.max(ba.E2E,fa.responseEnd);}});return ba},getMetrics:function x(y,z,aa,ba,ca,da){k={};if(c('isEmpty')(l))l=c('Bootloader').getURLToHashMap();r(k,y,z,aa,ba,ca,da);return k}};f.exports=w}),null);
__d('TimeSliceHelper',['LogBuffer','Map','ProfilingCounters','ReactSpeedHelper','sourceMetaToString'],(function a(b,c,d,e,f,g){var h=function o(p,q){return Math.round((p-q)*1000)},i={counterFunction:function o(p){return p.getNestedTotals()}};function j(o,p,q){var r=p.counterFunction,s=void 0;if(q.guard){var t=c('sourceMetaToString')(q),u=q.guard.toString();s=t?u+' at '+t:u}else s=q.desc;var v=q.counters!=null?r(q.counters):null,w={begin:q.begin,end:q.end,name:s,id:q.id,counters:v,isEdgeContinuation:q.isEdgeContinuation};if(q.parentID&&q.parentID!==q.id)w.parentID=q.parentID;o.push(w)}function k(o,p,q){var r=p.counterFunction,s={begin:q.begin,end:q.end,name:'JS['+q.count+']',counters:r(c('ProfilingCounters').wrapInSingleContext(q.contextsToBeMerged))};o.push(s)}function l(o,p){var q=p.indirectParentID,r=p.id,s=p.isEdgeContinuation;if(q!=null){var t=o.get(q),u=void 0;s=s;if(t!=null){u={indirectParentID:t.indirectParentID,isEdgeContinuation:s&&t.isEdgeContinuation}}else u={indirectParentID:q,isEdgeContinuation:s};o.set(r,u)}}function m(o,p){var q=p.indirectParentID,r=p.isEdgeContinuation,s=p.id;if(q!=null&&q!==s){var t=o.get(q);if(t!=null){q=t.indirectParentID;r=t.isEdgeContinuation&&r}return babelHelpers['extends']({},p,{parentID:q,isEdgeContinuation:r})}return p}var n={formatMetricsForTransport:function o(p){var q=[],r=[],s=[],t=new (c('Map'))(),u=new (c('Map'))(),v=0,w=function y(z,aa,ba){var ca=void 0;if(aa.has(z)){ca=aa.get(z)}else{ca=ba.length;aa.set(z,ca);ba.push(z)}return ca},x=[];if(p!=null)p.forEach(function(y){var z=y.begin,aa=y.end,ba=y.name,ca=y.id,da=y.counters,ea=y.parentID,fa=y.isEdgeContinuation,ga=h(z,v),ha=h(aa,z);v=aa;var ia=w(ba,t,q),ja=[ga,ha,ia],ka=da||{},la=Object.keys(ka).filter(function(pa){return ka[pa]!==0}).sort(),ma=void 0;if(la.length>0){var na=la.join(),oa=w(na,u,s);ma=la.map(function(pa){return ka[pa]});ma.unshift(oa)}else ma=[];if(ca)ja.push(ca);if(ea){ja.push(ea);ja.push(fa)}x.push(ja);r.push(ma)});return {version:'compact',items:x,names:q,counters:r,counterSchemas:s}},getMetrics:function o(p,q,r,s,t){var u=function v(w,x){var y=x.end-x.begin<r,z=w&&x.begin-w.end<s&&y;return {shouldMergeIntoCurrentMerge:z,shouldFlushCurrentThenNewMerge:y}};return this.getCustomMergeMetrics(p,q,u,t)},getCustomMergeMetrics:function o(p,q,r,s){var t;if(s==null){s=i}else s=babelHelpers['extends']({},i,s);var u=[],v=j.bind(undefined,u,s),w=k.bind(undefined,u,s),x=c('LogBuffer').read('time_slice'),y=c('LogBuffer').read('time_slice_heartbeat');if(x.length>0)(function(){var ia=Math.max.apply(null,x.map(function(ja){return ja.id}));y.forEach(function(ja){return ja.id+=ia})})();var z=c('ReactSpeedHelper').getMetrics().map(function(ia){return babelHelpers['extends']({},ia,{desc:'React['+ia.name+']'})}),aa=x.concat(y,z),ba=void 0,ca=new (c('Map'))(),da=l.bind(undefined,ca),ea=m.bind(undefined,ca),fa=function ia(){if(ba)if(ba.count>1){w(ba)}else v(ea(ba.first));ba=null},ga=aa.sort(function(ia,ja){if(ia.begin!==ja.begin){return ia.begin-ja.begin}else if(ia.end!==ja.end){return ia.end-ja.end}else return 0;}).filter(function(ia){return (p==null||ia.end>=p)&&(q==null||ia.begin<=q)});if(ga.length>0&&!ga[0].representsExecution&&ga[0].begin<p){var ha=ga[0];ga[0]=babelHelpers['extends']({},ha,{begin:p})}ga.forEach(function(ia){var ja=r(ba,ia),ka=ja.shouldMergeIntoCurrentMerge,la=ja.shouldFlushCurrentThenNewMerge;if(ba&&ka){ba.end=ia.end;ba.count++;if(ia.counters!=null)ba.contextsToBeMerged.push(ia.counters);if(ba.count===2)da(ba.first);da(ia)}else if(la){fa();ba={begin:ia.begin,end:ia.end,count:1,first:ia,contextsToBeMerged:ia.counters!=null?[ia.counters]:[]}}else if(!la){fa();v(ea(ia))}});fa();return u}};f.exports=n}),null);
__d('PerfXFlusher',['invariant','Banzai'],(function a(b,c,d,e,f,g,h){var i='perfx_custom_logger_endpoint',j=['perfx_page','perfx_page_type','lid'];function k(m){j.forEach(function(n){return h(n in m,'PerfXFlusher: Field "%s" missing in the PerfX payload',n)})}var l={flush:function m(n){k(n);c('Banzai').post(i,n,{signal:true})},registerToSendWithBeacon:function m(n){c('Banzai').registerToSendWithBeacon(i,n)}};f.exports=l}),null);
__d("pageLoadedViaSWCache",[],(function a(b,c,d,e,f,g){function h(){return self.__SW_CACHE__===1}f.exports=h}),null);
__d('PerfXLogger',['DataAttributeUtils','NavigationMetrics','NavigationTimingHelper','PerfXFlusher','Set','forEachObject','pageLoadedViaSWCache','performanceAbsoluteNow','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g){var h={},i={},j=65*1000,k=['e2e','tti','all_pagelets_displayed','all_pagelets_loaded'],l={},m={_listenersSetUp:false,_setupListeners:function n(){if(this._listenersSetUp)return;this._subscribeToNavigationMetrics();c('PerfXFlusher').registerToSendWithBeacon(function(){var o=[];c('forEachObject')(h,function(p,q){if(!h[q].sent){var r=this.getPayload(q,'unload fired');if(r!=null)o.push(r);}}.bind(this));h={};return o}.bind(this));this._listenersSetUp=true},_init:function n(o){var p=o.lid;if(p==null)return;var q=i[p]||[];delete i[p];if(o.sw_controlled_tags){if(navigator.serviceWorker&&navigator.serviceWorker.controller)for(var r=0;r<o.sw_controlled_tags.length;r++)q.push(o.sw_controlled_tags[r]);delete o.sw_controlled_tags}h[p]=babelHelpers['extends']({tags:new (c('Set'))(q),sent:false},o);this._registerTimeoutSendback(p);this._setupListeners()},initWithNavigationMetricsLID:function n(o,p){var q=c('NavigationMetrics').getFullPageLoadLid();if(!q)return;this._init(babelHelpers['extends']({},p,{lid:q}));if(o&&o.always)for(var r=0;r<o.always.length;r++)m.addTag(q,o.always[r]);if(o&&o.swCache&&c('pageLoadedViaSWCache')())for(var s=0;s<o.swCache.length;s++)m.addTag(q,o.swCache[s]);},init:function n(o,p){if(p!=null&&o.lid!=null)l[o.lid]=p;this._init(o)},addTag:function n(o,p){var q=h[o];if(q){q.tags.add(p);return}if(!i[o])i[o]=[];i[o].push(p)},addTagWithNavigationMetricsLID:function n(o){var p=c('NavigationMetrics').getFullPageLoadLid();if(!p)return;m.addTag(p,o)},_registerTimeoutSendback:function n(o){var p=this._getFetchStart(o),q=j;if(p!=null)q-=c('performanceAbsoluteNow')()-p;c('setTimeoutAcrossTransitions')(function(){return this._uploadPayload(o,'sendback time out')}.bind(this),q)},_subscribeToNavigationMetrics:function n(){c('NavigationMetrics').addRetroactiveListener(c('NavigationMetrics').Events.EVENT_OCCURRED,function(o,p){if(!(o in h))return;if(k.includes(p.event)&&Object.prototype.hasOwnProperty.call(p,'timestamp')&&p.timestamp!=null){h[o][p.event]=p.timestamp;if(p.visibilityState)h[o][p.event+'_page_visibility']=p.visibilityState;}});c('NavigationMetrics').addRetroactiveListener(c('NavigationMetrics').Events.NAVIGATION_DONE,function(o,p){var q=p.serverLID;if(!(q in h))return;k.forEach(function(event){if(Object.prototype.hasOwnProperty.call(p,event)&&p[event]!=null)h[q][event]=p[event];});this._uploadPayload(q)}.bind(this))},_getPayloadWithOffset:function n(o,p,q){var r=h[o];if(r==null)return null;var s=Object.assign({},r),t=document.querySelector('[id^="hyperfeed_story_id"]');if(t){var u=JSON.parse(c('DataAttributeUtils').getDataFt(t));if(u)s.mf_query_id=u.qid;}s.tags=Array.from(r.tags);this._adjustValues(s,p);s.fetch_start=p;if(s.perfx_page_type==='normal'){var v=c('NavigationTimingHelper').getNavTimings();if(v!=null&&v.navigationStart!=null)s.nav_to_fetch=p-v.navigationStart;}if(q!=null)s.sendback_reason=q;if(navigator&&navigator.hardwareConcurrency)s.num_cores=navigator.hardwareConcurrency;if(navigator&&navigator.deviceMemory)s.ram_gb=navigator.deviceMemory;delete s.sent;return s},_uploadPayload:function n(o,p){if(h[o]!=null&&!h[o].sent){var q=this.getPayload(o,p);if(q!=null){c('PerfXFlusher').flush(q);h[o].sent=true}}},getPayload:function n(o,p){return this._getPayloadWithOffset(o,this._getFetchStart(o),p)},_getFetchStart:function n(o){if(!(o in h))return null;var p=void 0,q=h[o].perfx_page_type;if(q=='quickling'){if(!(o in l)){return null}else p=c('NavigationTimingHelper').getAsyncRequestTimings(l[o]);}else p=c('NavigationTimingHelper').getNavTimings();if(!p||!p.fetchStart)return null;return p.fetchStart},_adjustValues:function n(o,p){k.forEach(function(q){if(Object.prototype.hasOwnProperty.call(o,q))o[q]-=p;})}};f.exports=m}),null);